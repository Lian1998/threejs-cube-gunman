{"version":3,"file":"GameObjectMap.301aea85.js","sources":["../../node_modules/.pnpm/three@0.148.0/node_modules/three/examples/jsm/math/Capsule.js","../../node_modules/.pnpm/three@0.148.0/node_modules/three/examples/jsm/math/Octree.js","../../src/core/lib/threejs_common.ts","../../src/gameplay/abstract/GameObjectMaterialEnum.ts","../../src/gameplay/levels/LevelMirage.ts","../../src/gameplay/abstract/WeaponClassificationEnum.ts","../../src/gameplay/pipes/LayerEventPipe.ts","../../src/gameplay/pipes/UserinputEventPipe.ts","../../src/gameplay/pipes/GameLogicEventPipe.ts","../../src/gameplay/weapon/WeaponSystem.ts","../../src/gameplay/pipes/AnimationEventPipe.ts","../../src/gameplay/weapon/abstract/AutomaticWeapon.ts","../../src/gameplay/weapon/utils/AutomaticWeaponBPointsUtil.ts","../../src/gameplay/weapon/instances/AK47.ts","../../src/gameplay/weapon/abstract/SemiAutomaticWeapon.ts","../../src/gameplay/weapon/instances/USP.ts","../../src/gameplay/weapon/abstract/DaggerWeapon.ts","../../src/gameplay/weapon/instances/M9.ts","../../src/gameplay/input/UserInputSystem.ts","../../src/gameplay/abstract/InventorySlotEnum.ts","../../src/gameplay/Inventory/InventorySystem.ts","../../src/gameplay/input/controllers/FPSCameraController.ts","../../src/gameplay/input/controllers/MovementController.ts","../../src/gameplay/player/LocalPlayer.ts","../../node_modules/.pnpm/three@0.148.0/node_modules/three/examples/jsm/libs/stats.module.js","../../src/viewlayers/DomLayer.ts","../../node_modules/.pnpm/three@0.148.0/node_modules/three/examples/jsm/shaders/FXAAShader.js","../../src/viewlayers/GLViewportLayer.ts","../../assets/shaders/bullet/hole/ash.vert?raw","../../assets/shaders/bullet/hole/ash.frag?raw","../../assets/textures/bullet.hole.ash.png","../../src/viewlayers/scene/BulletHoleAshLayer.ts","../../assets/shaders/bullet/hole/flash.vert?raw","../../assets/shaders/bullet/hole/flash.frag?raw","../../assets/textures/bullet.hole.flash.png","../../src/viewlayers/scene/BulletHoleFlashLayer.ts","../../assets/shaders/bullet/hole/point.vert?raw","../../assets/shaders/bullet/hole/point.frag?raw","../../assets/textures/bullet.hole.point.png","../../src/viewlayers/scene/BulletHoleLayer.ts","../../node_modules/.pnpm/three@0.148.0/node_modules/three/examples/jsm/objects/Sky.js","../../src/viewlayers/SkyLayer.ts","../../assets/shaders/crosshair/up.vert?raw","../../assets/shaders/crosshair/down.vert?raw","../../assets/shaders/crosshair/left.vert?raw","../../assets/shaders/crosshair/right.vert?raw","../../assets/shaders/crosshair/cross.frag?raw","../../src/viewlayers/ui/CrosshairLayer.ts","../../src/viewlayers/ui/HandModelLayer.ts","../../assets/shaders/bullet/shell/bulletshell.vert?raw","../../assets/shaders/bullet/shell/bulletshell.frag?raw","../../assets/textures/bullet.shell.png","../../src/viewlayers/weapon/ChamberBulletShellLayer.ts","../../assets/shaders/chamber/smoke.vert?raw","../../assets/shaders/chamber/smoke.frag?raw","../../assets/textures/smoke.png","../../src/core/lib/WeaponComponentsPositionUtil.ts","../../src/viewlayers/weapon/ChamberSmokeLayer.ts","../../assets/shaders/muzzle/flash.vert?raw","../../assets/shaders/muzzle/flash.frag?raw","../../assets/textures/muzzle.flash.png","../../src/viewlayers/weapon/MuzzleFlashLayer.ts","../../src/core/GameObjectMap.ts"],"sourcesContent":["import {\n\tVector3\n} from 'three';\n\nconst _v1 = new Vector3();\nconst _v2 = new Vector3();\nconst _v3 = new Vector3();\n\nconst EPS = 1e-10;\n\nclass Capsule {\n\n\tconstructor( start = new Vector3( 0, 0, 0 ), end = new Vector3( 0, 1, 0 ), radius = 1 ) {\n\n\t\tthis.start = start;\n\t\tthis.end = end;\n\t\tthis.radius = radius;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Capsule( this.start.clone(), this.end.clone(), this.radius );\n\n\t}\n\n\tset( start, end, radius ) {\n\n\t\tthis.start.copy( start );\n\t\tthis.end.copy( end );\n\t\tthis.radius = radius;\n\n\t}\n\n\tcopy( capsule ) {\n\n\t\tthis.start.copy( capsule.start );\n\t\tthis.end.copy( capsule.end );\n\t\tthis.radius = capsule.radius;\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\treturn target.copy( this.end ).add( this.start ).multiplyScalar( 0.5 );\n\n\t}\n\n\ttranslate( v ) {\n\n\t\tthis.start.add( v );\n\t\tthis.end.add( v );\n\n\t}\n\n\tcheckAABBAxis( p1x, p1y, p2x, p2y, minx, maxx, miny, maxy, radius ) {\n\n\t\treturn (\n\t\t\t( minx - p1x < radius || minx - p2x < radius ) &&\n\t\t\t( p1x - maxx < radius || p2x - maxx < radius ) &&\n\t\t\t( miny - p1y < radius || miny - p2y < radius ) &&\n\t\t\t( p1y - maxy < radius || p2y - maxy < radius )\n\t\t);\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn (\n\t\t\tthis.checkAABBAxis(\n\t\t\t\tthis.start.x, this.start.y, this.end.x, this.end.y,\n\t\t\t\tbox.min.x, box.max.x, box.min.y, box.max.y,\n\t\t\t\tthis.radius ) &&\n\t\t\tthis.checkAABBAxis(\n\t\t\t\tthis.start.x, this.start.z, this.end.x, this.end.z,\n\t\t\t\tbox.min.x, box.max.x, box.min.z, box.max.z,\n\t\t\t\tthis.radius ) &&\n\t\t\tthis.checkAABBAxis(\n\t\t\t\tthis.start.y, this.start.z, this.end.y, this.end.z,\n\t\t\t\tbox.min.y, box.max.y, box.min.z, box.max.z,\n\t\t\t\tthis.radius )\n\t\t);\n\n\t}\n\n\tlineLineMinimumPoints( line1, line2 ) {\n\n\t\tconst r = _v1.copy( line1.end ).sub( line1.start );\n\t\tconst s = _v2.copy( line2.end ).sub( line2.start );\n\t\tconst w = _v3.copy( line2.start ).sub( line1.start );\n\n\t\tconst a = r.dot( s ),\n\t\t\tb = r.dot( r ),\n\t\t\tc = s.dot( s ),\n\t\t\td = s.dot( w ),\n\t\t\te = r.dot( w );\n\n\t\tlet t1, t2;\n\t\tconst divisor = b * c - a * a;\n\n\t\tif ( Math.abs( divisor ) < EPS ) {\n\n\t\t\tconst d1 = - d / c;\n\t\t\tconst d2 = ( a - d ) / c;\n\n\t\t\tif ( Math.abs( d1 - 0.5 ) < Math.abs( d2 - 0.5 ) ) {\n\n\t\t\t\tt1 = 0;\n\t\t\t\tt2 = d1;\n\n\t\t\t} else {\n\n\t\t\t\tt1 = 1;\n\t\t\t\tt2 = d2;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tt1 = ( d * a + e * c ) / divisor;\n\t\t\tt2 = ( t1 * a - d ) / c;\n\n\t\t}\n\n\t\tt2 = Math.max( 0, Math.min( 1, t2 ) );\n\t\tt1 = Math.max( 0, Math.min( 1, t1 ) );\n\n\t\tconst point1 = r.multiplyScalar( t1 ).add( line1.start );\n\t\tconst point2 = s.multiplyScalar( t2 ).add( line2.start );\n\n\t\treturn [ point1, point2 ];\n\n\t}\n\n}\n\nexport { Capsule };\n","import {\n\tBox3,\n\tLine3,\n\tPlane,\n\tSphere,\n\tTriangle,\n\tVector3\n} from 'three';\nimport { Capsule } from '../math/Capsule.js';\n\n\nconst _v1 = new Vector3();\nconst _v2 = new Vector3();\nconst _plane = new Plane();\nconst _line1 = new Line3();\nconst _line2 = new Line3();\nconst _sphere = new Sphere();\nconst _capsule = new Capsule();\n\nclass Octree {\n\n\n\tconstructor( box ) {\n\n\t\tthis.triangles = [];\n\t\tthis.box = box;\n\t\tthis.subTrees = [];\n\n\t}\n\n\taddTriangle( triangle ) {\n\n\t\tif ( ! this.bounds ) this.bounds = new Box3();\n\n\t\tthis.bounds.min.x = Math.min( this.bounds.min.x, triangle.a.x, triangle.b.x, triangle.c.x );\n\t\tthis.bounds.min.y = Math.min( this.bounds.min.y, triangle.a.y, triangle.b.y, triangle.c.y );\n\t\tthis.bounds.min.z = Math.min( this.bounds.min.z, triangle.a.z, triangle.b.z, triangle.c.z );\n\t\tthis.bounds.max.x = Math.max( this.bounds.max.x, triangle.a.x, triangle.b.x, triangle.c.x );\n\t\tthis.bounds.max.y = Math.max( this.bounds.max.y, triangle.a.y, triangle.b.y, triangle.c.y );\n\t\tthis.bounds.max.z = Math.max( this.bounds.max.z, triangle.a.z, triangle.b.z, triangle.c.z );\n\n\t\tthis.triangles.push( triangle );\n\n\t\treturn this;\n\n\t}\n\n\tcalcBox() {\n\n\t\tthis.box = this.bounds.clone();\n\n\t\t// offset small amount to account for regular grid\n\t\tthis.box.min.x -= 0.01;\n\t\tthis.box.min.y -= 0.01;\n\t\tthis.box.min.z -= 0.01;\n\n\t\treturn this;\n\n\t}\n\n\tsplit( level ) {\n\n\t\tif ( ! this.box ) return;\n\n\t\tconst subTrees = [];\n\t\tconst halfsize = _v2.copy( this.box.max ).sub( this.box.min ).multiplyScalar( 0.5 );\n\n\t\tfor ( let x = 0; x < 2; x ++ ) {\n\n\t\t\tfor ( let y = 0; y < 2; y ++ ) {\n\n\t\t\t\tfor ( let z = 0; z < 2; z ++ ) {\n\n\t\t\t\t\tconst box = new Box3();\n\t\t\t\t\tconst v = _v1.set( x, y, z );\n\n\t\t\t\t\tbox.min.copy( this.box.min ).add( v.multiply( halfsize ) );\n\t\t\t\t\tbox.max.copy( box.min ).add( halfsize );\n\n\t\t\t\t\tsubTrees.push( new Octree( box ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet triangle;\n\n\t\twhile ( triangle = this.triangles.pop() ) {\n\n\t\t\tfor ( let i = 0; i < subTrees.length; i ++ ) {\n\n\t\t\t\tif ( subTrees[ i ].box.intersectsTriangle( triangle ) ) {\n\n\t\t\t\t\tsubTrees[ i ].triangles.push( triangle );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < subTrees.length; i ++ ) {\n\n\t\t\tconst len = subTrees[ i ].triangles.length;\n\n\t\t\tif ( len > 8 && level < 16 ) {\n\n\t\t\t\tsubTrees[ i ].split( level + 1 );\n\n\t\t\t}\n\n\t\t\tif ( len !== 0 ) {\n\n\t\t\t\tthis.subTrees.push( subTrees[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tbuild() {\n\n\t\tthis.calcBox();\n\t\tthis.split( 0 );\n\n\t\treturn this;\n\n\t}\n\n\tgetRayTriangles( ray, triangles ) {\n\n\t\tfor ( let i = 0; i < this.subTrees.length; i ++ ) {\n\n\t\t\tconst subTree = this.subTrees[ i ];\n\t\t\tif ( ! ray.intersectsBox( subTree.box ) ) continue;\n\n\t\t\tif ( subTree.triangles.length > 0 ) {\n\n\t\t\t\tfor ( let j = 0; j < subTree.triangles.length; j ++ ) {\n\n\t\t\t\t\tif ( triangles.indexOf( subTree.triangles[ j ] ) === - 1 ) triangles.push( subTree.triangles[ j ] );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tsubTree.getRayTriangles( ray, triangles );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn triangles;\n\n\t}\n\n\ttriangleCapsuleIntersect( capsule, triangle ) {\n\n\t\ttriangle.getPlane( _plane );\n\n\t\tconst d1 = _plane.distanceToPoint( capsule.start ) - capsule.radius;\n\t\tconst d2 = _plane.distanceToPoint( capsule.end ) - capsule.radius;\n\n\t\tif ( ( d1 > 0 && d2 > 0 ) || ( d1 < - capsule.radius && d2 < - capsule.radius ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\tconst delta = Math.abs( d1 / ( Math.abs( d1 ) + Math.abs( d2 ) ) );\n\t\tconst intersectPoint = _v1.copy( capsule.start ).lerp( capsule.end, delta );\n\n\t\tif ( triangle.containsPoint( intersectPoint ) ) {\n\n\t\t\treturn { normal: _plane.normal.clone(), point: intersectPoint.clone(), depth: Math.abs( Math.min( d1, d2 ) ) };\n\n\t\t}\n\n\t\tconst r2 = capsule.radius * capsule.radius;\n\n\t\tconst line1 = _line1.set( capsule.start, capsule.end );\n\n\t\tconst lines = [\n\t\t\t[ triangle.a, triangle.b ],\n\t\t\t[ triangle.b, triangle.c ],\n\t\t\t[ triangle.c, triangle.a ]\n\t\t];\n\n\t\tfor ( let i = 0; i < lines.length; i ++ ) {\n\n\t\t\tconst line2 = _line2.set( lines[ i ][ 0 ], lines[ i ][ 1 ] );\n\n\t\t\tconst [ point1, point2 ] = capsule.lineLineMinimumPoints( line1, line2 );\n\n\t\t\tif ( point1.distanceToSquared( point2 ) < r2 ) {\n\n\t\t\t\treturn { normal: point1.clone().sub( point2 ).normalize(), point: point2.clone(), depth: capsule.radius - point1.distanceTo( point2 ) };\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\ttriangleSphereIntersect( sphere, triangle ) {\n\n\t\ttriangle.getPlane( _plane );\n\n\t\tif ( ! sphere.intersectsPlane( _plane ) ) return false;\n\n\t\tconst depth = Math.abs( _plane.distanceToSphere( sphere ) );\n\t\tconst r2 = sphere.radius * sphere.radius - depth * depth;\n\n\t\tconst plainPoint = _plane.projectPoint( sphere.center, _v1 );\n\n\t\tif ( triangle.containsPoint( sphere.center ) ) {\n\n\t\t\treturn { normal: _plane.normal.clone(), point: plainPoint.clone(), depth: Math.abs( _plane.distanceToSphere( sphere ) ) };\n\n\t\t}\n\n\t\tconst lines = [\n\t\t\t[ triangle.a, triangle.b ],\n\t\t\t[ triangle.b, triangle.c ],\n\t\t\t[ triangle.c, triangle.a ]\n\t\t];\n\n\t\tfor ( let i = 0; i < lines.length; i ++ ) {\n\n\t\t\t_line1.set( lines[ i ][ 0 ], lines[ i ][ 1 ] );\n\t\t\t_line1.closestPointToPoint( plainPoint, true, _v2 );\n\n\t\t\tconst d = _v2.distanceToSquared( sphere.center );\n\n\t\t\tif ( d < r2 ) {\n\n\t\t\t\treturn { normal: sphere.center.clone().sub( _v2 ).normalize(), point: _v2.clone(), depth: sphere.radius - Math.sqrt( d ) };\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tgetSphereTriangles( sphere, triangles ) {\n\n\t\tfor ( let i = 0; i < this.subTrees.length; i ++ ) {\n\n\t\t\tconst subTree = this.subTrees[ i ];\n\n\t\t\tif ( ! sphere.intersectsBox( subTree.box ) ) continue;\n\n\t\t\tif ( subTree.triangles.length > 0 ) {\n\n\t\t\t\tfor ( let j = 0; j < subTree.triangles.length; j ++ ) {\n\n\t\t\t\t\tif ( triangles.indexOf( subTree.triangles[ j ] ) === - 1 ) triangles.push( subTree.triangles[ j ] );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tsubTree.getSphereTriangles( sphere, triangles );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tgetCapsuleTriangles( capsule, triangles ) {\n\n\t\tfor ( let i = 0; i < this.subTrees.length; i ++ ) {\n\n\t\t\tconst subTree = this.subTrees[ i ];\n\n\t\t\tif ( ! capsule.intersectsBox( subTree.box ) ) continue;\n\n\t\t\tif ( subTree.triangles.length > 0 ) {\n\n\t\t\t\tfor ( let j = 0; j < subTree.triangles.length; j ++ ) {\n\n\t\t\t\t\tif ( triangles.indexOf( subTree.triangles[ j ] ) === - 1 ) triangles.push( subTree.triangles[ j ] );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tsubTree.getCapsuleTriangles( capsule, triangles );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tsphereIntersect( sphere ) {\n\n\t\t_sphere.copy( sphere );\n\n\t\tconst triangles = [];\n\t\tlet result, hit = false;\n\n\t\tthis.getSphereTriangles( sphere, triangles );\n\n\t\tfor ( let i = 0; i < triangles.length; i ++ ) {\n\n\t\t\tif ( result = this.triangleSphereIntersect( _sphere, triangles[ i ] ) ) {\n\n\t\t\t\thit = true;\n\n\t\t\t\t_sphere.center.add( result.normal.multiplyScalar( result.depth ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hit ) {\n\n\t\t\tconst collisionVector = _sphere.center.clone().sub( sphere.center );\n\t\t\tconst depth = collisionVector.length();\n\n\t\t\treturn { normal: collisionVector.normalize(), depth: depth };\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tcapsuleIntersect( capsule ) {\n\n\t\t_capsule.copy( capsule );\n\n\t\tconst triangles = [];\n\t\tlet result, hit = false;\n\n\t\tthis.getCapsuleTriangles( _capsule, triangles );\n\n\t\tfor ( let i = 0; i < triangles.length; i ++ ) {\n\n\t\t\tif ( result = this.triangleCapsuleIntersect( _capsule, triangles[ i ] ) ) {\n\n\t\t\t\thit = true;\n\n\t\t\t\t_capsule.translate( result.normal.multiplyScalar( result.depth ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hit ) {\n\n\t\t\tconst collisionVector = _capsule.getCenter( new Vector3() ).sub( capsule.getCenter( _v1 ) );\n\t\t\tconst depth = collisionVector.length();\n\n\t\t\treturn { normal: collisionVector.normalize(), depth: depth };\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\trayIntersect( ray ) {\n\n\t\tif ( ray.direction.length() === 0 ) return;\n\n\t\tconst triangles = [];\n\t\tlet triangle, position, distance = 1e100;\n\n\t\tthis.getRayTriangles( ray, triangles );\n\n\t\tfor ( let i = 0; i < triangles.length; i ++ ) {\n\n\t\t\tconst result = ray.intersectTriangle( triangles[ i ].a, triangles[ i ].b, triangles[ i ].c, true, _v1 );\n\n\t\t\tif ( result ) {\n\n\t\t\t\tconst newdistance = result.sub( ray.origin ).length();\n\n\t\t\t\tif ( distance > newdistance ) {\n\n\t\t\t\t\tposition = result.clone().add( ray.origin );\n\t\t\t\t\tdistance = newdistance;\n\t\t\t\t\ttriangle = triangles[ i ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn distance < 1e100 ? { distance: distance, triangle: triangle, position: position } : false;\n\n\t}\n\n\tfromGraphNode( group ) {\n\n\t\tgroup.updateWorldMatrix( true, true );\n\n\t\tgroup.traverse( ( obj ) => {\n\n\t\t\tif ( obj.isMesh === true ) {\n\n\t\t\t\tlet geometry, isTemp = false;\n\n\t\t\t\tif ( obj.geometry.index !== null ) {\n\n\t\t\t\t\tisTemp = true;\n\t\t\t\t\tgeometry = obj.geometry.toNonIndexed();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgeometry = obj.geometry;\n\n\t\t\t\t}\n\n\t\t\t\tconst positionAttribute = geometry.getAttribute( 'position' );\n\n\t\t\t\tfor ( let i = 0; i < positionAttribute.count; i += 3 ) {\n\n\t\t\t\t\tconst v1 = new Vector3().fromBufferAttribute( positionAttribute, i );\n\t\t\t\t\tconst v2 = new Vector3().fromBufferAttribute( positionAttribute, i + 1 );\n\t\t\t\t\tconst v3 = new Vector3().fromBufferAttribute( positionAttribute, i + 2 );\n\n\t\t\t\t\tv1.applyMatrix4( obj.matrixWorld );\n\t\t\t\t\tv2.applyMatrix4( obj.matrixWorld );\n\t\t\t\t\tv3.applyMatrix4( obj.matrixWorld );\n\n\t\t\t\t\tthis.addTriangle( new Triangle( v1, v2, v3 ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( isTemp ) {\n\n\t\t\t\t\tgeometry.dispose();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\tthis.build();\n\n\t\treturn this;\n\n\t}\n\n}\n\nexport { Octree };\n","// 该文件定义threejs相关通用函数\r\n\r\nimport {\r\n    AddEquation, CustomBlending, FrontSide, LinearFilter, Material,\r\n    Mesh, MeshBasicMaterial, NearestFilter, OneMinusSrcAlphaFactor,\r\n    SrcAlphaFactor, sRGBEncoding, Texture\r\n} from 'three';\r\n\r\n/**\r\n * \r\n * 如果mesh的材质使用blender烘焙出的纹素作为顶点颜色, 使用这个函数处理\r\n * 1. 设置贴图的编码为SRGB\r\n * 2. 关闭flipY\r\n * \r\n * @param mesh 网格体\r\n * @param texture 贴图\r\n */\r\nexport const dealWithBakedTexture = (mesh: Mesh, texture: Texture) => {\r\n    texture.encoding = sRGBEncoding;\r\n    texture.flipY = false;\r\n    const mtl = new MeshBasicMaterial({ map: texture });\r\n    mesh.material = mtl;\r\n}\r\n\r\n/**\r\n * 对某网格实例(包括其孩子)开启8x各向异性\r\n * @param mesh  网格体\r\n */\r\nexport const anisotropy8x = (mesh: Mesh) => {\r\n    mesh.traverse((child: Mesh) => { // 遍历\r\n        if (child.isMesh) {\r\n            child.castShadow = true;\r\n            child.receiveShadow = true;\r\n            const _material = child.material as MeshBasicMaterial;\r\n            if (_material.map) _material.map.anisotropy = 8;// 材质开启采样(8x各向异性)\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * 处理MineCraft风格的角色贴图\r\n * 1. NearestFilter mag, minFilter 取色使用最近像素点原则\r\n * 2. 使用SRGBencoding\r\n * 3. 关闭flipY\r\n * @param texture 贴图\r\n */\r\nexport const dealWithRoleTexture = (texture: Texture) => {\r\n    texture.generateMipmaps = false; // 不需要在显存中生成mipmap\r\n    texture.magFilter = NearestFilter;\r\n    texture.minFilter = NearestFilter;\r\n    texture.encoding = sRGBEncoding; // srgb编码\r\n    texture.flipY = false; // 不需要颠倒贴图\r\n}\r\n\r\n\r\n/**\r\n * 处理MineCraft风格的角色材质\r\n * \r\n * 1. 渲染两面\r\n * 2. alpha测试\r\n * 3. 颜色混合模式\r\n * \r\n * @param material 材质\r\n */\r\nexport const dealWithRoleMaterial = (material: Material) => {\r\n    material.side = FrontSide; // 渲染两面\r\n    material.alphaTest = 1; // alpha检测, 两层材质的minecraft材质图是可以做衣服效果的\r\n    material.blending = CustomBlending;  // 使用threeJs默认的Custom混合模式\r\n    material.blendEquation = AddEquation; //default\r\n    material.blendSrc = SrcAlphaFactor; //default\r\n    material.blendDst = OneMinusSrcAlphaFactor; //default\r\n}\r\n\r\n/**\r\n * 处理武器贴图\r\n * 1. LinearFilter mag, minFilter 取色使用线性取色原则\r\n * 2. 使用SRGBencoding\r\n * 3. 关闭flipY\r\n * @param texture 贴图\r\n */\r\nexport const dealWithWeaponTexture = (texture: Texture) => {\r\n    texture.generateMipmaps = true;\r\n    texture.magFilter = LinearFilter;\r\n    texture.minFilter = LinearFilter;\r\n    texture.encoding = sRGBEncoding;\r\n    texture.flipY = false;\r\n}","// 游戏物体材质系统\r\n\r\nexport enum GameObjectMaterialEnum {\r\n\r\n    PlayerHead, // 头\r\n    PlayerChest, // 胸膛\r\n    PlayerUpperLimb, // 上肢\r\n    PlayerLowerLimb, // 下肢\r\n    PlayerBelly, // 肚子\r\n\r\n    GrassGround, // 草地\r\n\r\n}\r\n\r\n\r\n","\r\n\r\nimport { Octree } from 'three/examples/jsm/math/Octree';\r\nimport { GameContext } from '@src/core/GameContext';\r\nimport { anisotropy8x, dealWithBakedTexture } from '@src/core/lib/threejs_common';\r\nimport { GameObjectMaterialEnum } from '../abstract/GameObjectMaterialEnum';\r\nimport { GLTF } from 'three/examples/jsm/loaders/GLTFLoader';\r\nimport { CycleInterface } from '@src/core/inferface/CycleInterface';\r\n\r\n\r\nclass LevelMirage implements CycleInterface {\r\n\r\n    init() {\r\n\r\n        const boardScene = GameContext.Scenes.Level;\r\n\r\n        // 地图生成物理octree\r\n        const octTree: Octree = new Octree();\r\n        GameContext.Physical.WorldOCTree = octTree;\r\n        const gltf = GameContext.GameResources.resourceMap.get('Map') as GLTF;\r\n        const boardMesh = gltf.scene.children[0]; // 需要渲染的网格\r\n        const physicsMesh = gltf.scene; // 需要计算物理信息的场景\r\n        octTree.fromGraphNode(physicsMesh); // 将物理信息加载到内存中\r\n\r\n        // 地图材质处理\r\n        const bakedTexture = GameContext.GameResources.textureLoader.load('/levels/t.mirage.baked.75.jpg');\r\n        dealWithBakedTexture(boardMesh as THREE.Mesh, bakedTexture); // 使用工具给渲染网格绑定材质\r\n        anisotropy8x(boardMesh as THREE.Mesh);\r\n\r\n        // 绑定游戏逻辑材质\r\n        boardMesh.userData['GameObjectMaterialEnum'] = GameObjectMaterialEnum.GrassGround;\r\n        boardScene.add(boardMesh);\r\n    }\r\n\r\n}\r\n\r\nexport { LevelMirage }","/** \r\n * 武器类型 \r\n */\r\nexport enum WeaponClassificationEnum {\r\n    Rifle, // 步枪\r\n    SniperRifle, // 狙击步枪\r\n    Pistol, // 手枪\r\n    Malee, // 匕首\r\n    SMG, // 微冲\r\n    Shotgun, // 霰弹\r\n    Machinegun, // 机枪\r\n}","\r\nimport { DomPipe } from '@src/core/DOMPipe';\r\nimport { Vector2, Vector3 } from 'three';\r\n\r\n/**\r\n * 广播所有画面渲染层级的事件\r\n */\r\nexport const LayerEventPipe = new DomPipe();\r\n\r\n/**\r\n * 子弹落点需要渲染\r\n * fallenPoint 子弹落点\r\n * fallenNormal 子弹落点法线 \r\n * cameraPosition 发出子弹位置(相机位置)\r\n * recoiledScreenCoord 子弹射出时屏幕投影位置\r\n */\r\nexport const BulletFallenPointEvent = new CustomEvent<{\r\n    fallenPoint: THREE.Vector3;\r\n    fallenNormal: THREE.Vector3;\r\n    cameraPosition: THREE.Vector3;\r\n    recoiledScreenCoord: THREE.Vector2;\r\n}>('bullet fallenpoint', {\r\n    detail: {\r\n        fallenPoint: new Vector3(),\r\n        fallenNormal: new Vector3(),\r\n        cameraPosition: new Vector3(),\r\n        recoiledScreenCoord: new Vector2(),\r\n    }\r\n});\r\n\r\n/** 射出类型武器开火 */\r\nexport const ShotOutWeaponFireEvent = new CustomEvent<{}>('shoutoutweapon fired', {})","import { DomPipe } from '@src/core/DOMPipe';\r\nimport { UserInputEventEnum } from '../abstract/EventsEnum';\r\n\r\n/**\r\n * 记录所有用户输入操作的事件\r\n */\r\nexport const UserInputEventPipe = new DomPipe();\r\n\r\n/**\r\n * 用户输入事件\r\n */\r\nexport const UserInputEvent = new CustomEvent<{ enum: UserInputEventEnum }>('input', {\r\n    detail: { enum: undefined }\r\n});\r\n","import { WeaponInterface } from '../weapon/abstract/WeaponInterface';\r\n\r\nimport { DomPipe } from '@src/core/DOMPipe';\r\nexport const GameLogicEventPipe = new DomPipe();\r\n\r\n/**\r\n * 武器系统开火事件\r\n */\r\nexport const WeaponFireEvent = new CustomEvent<{\r\n    bPointRecoiledScreenCoord: THREE.Vector2, // 子弹经过后坐力计算后在屏幕上实际出弹点\r\n    weaponInstance: WeaponInterface, // 武器ID\r\n}>('weapon fired', {\r\n    detail: {\r\n        bPointRecoiledScreenCoord: undefined,\r\n        weaponInstance: undefined,\r\n    }\r\n});\r\n\r\n/**\r\n * 武器系统切换时间\r\n */\r\nexport const WeaponEquipEvent = new CustomEvent<{\r\n    weaponInstance: WeaponInterface, // 武器\r\n}>(\r\n    'waepon equiped', {\r\n    detail: { weaponInstance: undefined, }\r\n});","import { GameContext } from '@src/core/GameContext';\r\nimport { GameObjectMaterialEnum } from '../abstract/GameObjectMaterialEnum';\r\nimport { WeaponClassificationEnum } from '../abstract/WeaponClassificationEnum';\r\nimport { BulletFallenPointEvent, LayerEventPipe, ShotOutWeaponFireEvent } from '../pipes/LayerEventPipe';\r\nimport { UserInputEvent, UserInputEventPipe } from '../pipes/UserinputEventPipe';\r\nimport { UserInputEventEnum } from '@src/gameplay/abstract/EventsEnum';\r\nimport { GameLogicEventPipe, WeaponFireEvent } from '../pipes/GameLogicEventPipe';\r\nimport { Raycaster } from 'three';\r\n\r\n/** \r\n * 武器系统, 处理武器系统对外事件:\r\n * 1. 通过事件获取开枪计算过后坐力后的子弹屏幕坐标位置; 获取相机位置, 通过相机设置激光; 计算弹点激光最终落点\r\n * 2. 判断击中物体的游戏逻辑材质, 对不同的物体采用不同的逻辑材质使用不同的逻辑事件\r\n * 3. 分发特效渲染事件\r\n * 4. 记录鼠标按键状态\r\n */\r\nexport class WeaponSystem {\r\n\r\n    camera: THREE.Camera = GameContext.Cameras.PlayerCamera; // 武器系统交互使用的相机\r\n    scene: THREE.Scene = GameContext.Scenes.Level; // 武器系统交互的场景\r\n    triggleDown: boolean = false;  // 当前扳机状态\r\n    raycaster = new Raycaster(); // 用于激光检测\r\n    _objectsIntersectedArray: THREE.Intersection<THREE.Object3D<THREE.Event>>[] = [];  // 用于存储激光检测的结果\r\n\r\n    // 单例模式\r\n    private static weaponSystemInstance: WeaponSystem;\r\n    private constructor() {\r\n        UserInputEventPipe.addEventListener(UserInputEvent.type, (e: CustomEvent) => { // 玩家按键事件影响\r\n            switch (e.detail.enum) {\r\n                case UserInputEventEnum.BUTTON_TRIGGLE_DOWN: // 扳机事件\r\n                    this.triggleDown = true;\r\n                    break;\r\n                case UserInputEventEnum.BUTTON_TRIGGLE_UP:\r\n                    this.triggleDown = false;\r\n                    break;\r\n            }\r\n        })\r\n        this.dealWithWeaponOpenFire();\r\n    }\r\n    public static getInstance() {\r\n        if (!this.weaponSystemInstance) this.weaponSystemInstance = new WeaponSystem();\r\n        return this.weaponSystemInstance;\r\n    }\r\n\r\n    /** \r\n     * 处理武器开火事件\r\n     */\r\n    dealWithWeaponOpenFire() {\r\n        GameLogicEventPipe.addEventListener(WeaponFireEvent.type, (e: CustomEvent) => {\r\n            // 1. 向渲染层发出开火效果渲染事件\r\n            if (e.detail.weaponInstance &&\r\n                e.detail.weaponInstance.weaponClassificationEnum !== WeaponClassificationEnum.Malee)\r\n                LayerEventPipe.dispatchEvent(ShotOutWeaponFireEvent); // 给渲染层传递渲染事件(开火特效)\r\n\r\n            // 2. 进行激光碰撞检测\r\n            this._objectsIntersectedArray.length = 0; // 清空数组缓存\r\n            let ifGenerated = false; // 标记是否已经生成过弹点\r\n            const bpPointScreenCoord = e.detail.bPointRecoiledScreenCoord; // 子弹收到后坐力影响后在屏幕坐标的落点\r\n            this.raycaster.setFromCamera(bpPointScreenCoord, this.camera); // 通过相机设置激光\r\n            this.raycaster.params.Mesh.threshold = 1; // threshold是相交对象时光线投射器的精度，以世界单位表示\r\n            this.raycaster.intersectObjects(this.scene.children, true, this._objectsIntersectedArray); // 检测\r\n\r\n            // 3. 渲染弹孔\r\n            if (this._objectsIntersectedArray.length > 0) { // 如果击中了三角面\r\n                for (let i = 0; i < this._objectsIntersectedArray.length; i++) { // 遍历所有的击中信息\r\n                    if (ifGenerated) return; // 如果已经产生弹孔 就直接弹出方法不再产生弹孔\r\n                    const point = this._objectsIntersectedArray[i].point; // 弹点\r\n                    const gameObjectMaterial = this._objectsIntersectedArray[i].object.userData['GameObjectMaterialEnum'] // 用于判断碰撞面属于哪个(游戏逻辑)网格材质\r\n                    if (gameObjectMaterial === undefined) return; // 如果不是游戏逻辑内的材质不会生成弹点\r\n                    switch (gameObjectMaterial) {\r\n                        case GameObjectMaterialEnum.PlayerHead | GameObjectMaterialEnum.PlayerBelly | GameObjectMaterialEnum.PlayerChest | GameObjectMaterialEnum.PlayerUpperLimb | GameObjectMaterialEnum.PlayerLowerLimb: // 如果是玩家身体的一部分\r\n                            ifGenerated = true; // 不生成弹孔,且后续穿透也不会生成弹孔\r\n                            // ... 这里应当发出玩家xxx被击中的事件\r\n                            break;\r\n                        case GameObjectMaterialEnum.GrassGround: // 如果是场景物体的一部分\r\n                            if (e.detail.weaponInstance &&\r\n                                e.detail.weaponInstance.weaponClassificationEnum === WeaponClassificationEnum.Malee) break; // 如果当前持有武器类型是匕首那么不产生弹点\r\n\r\n                            // 使用 addPoint 通用函数向场景中添加弹点\r\n                            const normal = this._objectsIntersectedArray[i].face.normal;\r\n\r\n                            // 渲染的子弹击中场景: 击中烟尘, 击中火光\r\n                            BulletFallenPointEvent.detail.fallenPoint.copy(point);\r\n                            BulletFallenPointEvent.detail.fallenNormal.copy(normal);\r\n                            BulletFallenPointEvent.detail.cameraPosition.copy(this.camera.position);\r\n                            BulletFallenPointEvent.detail.recoiledScreenCoord.copy(bpPointScreenCoord);\r\n                            LayerEventPipe.dispatchEvent(BulletFallenPointEvent);\r\n\r\n                            ifGenerated = true; // 后续穿透不再生成弹孔\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n}","\r\n\r\nimport { WeaponInterface } from '@src/gameplay/weapon/abstract/WeaponInterface'\r\n\r\nimport { DomPipe } from '@src/core/DOMPipe';\r\nimport { WeaponAnimationEventEnum } from '../abstract/EventsEnum';\r\n\r\n/**\r\n * 广播所有动画相关事件\r\n */\r\nexport const AnimationEventPipe = new DomPipe();\r\n\r\n/**\r\n * 记录武器的ID 以及 播放武器动画事件 [HOLD EQUIP RELIEVE_EQUIP FIRE RELOAD PICKUP]\r\n */\r\nexport const WeaponAnimationEvent = new CustomEvent<{\r\n    enum: WeaponAnimationEventEnum,\r\n    weaponInstance: WeaponInterface\r\n}>('weapon animation', {\r\n    detail: {\r\n        enum: undefined,\r\n        weaponInstance: undefined,\r\n    }\r\n});","import { WeaponInterface } from './WeaponInterface';\r\nimport { WeaponSystem } from '../WeaponSystem';\r\nimport { WeaponClassificationEnum } from '@src/gameplay/abstract/WeaponClassificationEnum';\r\nimport { GameContext } from '@src/core/GameContext';\r\nimport { CycleInterface } from '@src/core/inferface/CycleInterface';\r\nimport { LoopInterface } from '@src/core/inferface/LoopInterface';\r\nimport { UserInputEvent, UserInputEventPipe } from '@gameplay/pipes/UserinputEventPipe';\r\nimport { UserInputEventEnum, WeaponAnimationEventEnum } from '@gameplay/abstract/EventsEnum';\r\nimport { AnimationEventPipe, WeaponAnimationEvent } from '@gameplay/pipes/AnimationEventPipe';\r\nimport { GameLogicEventPipe, WeaponFireEvent } from '@gameplay/pipes/GameLogicEventPipe';\r\nimport { LinearInterpolant, LoopOnce, LoopRepeat, MathUtils, Vector2 } from 'three';\r\n\r\n\r\n// 工具计算变量\r\nlet startRecover = true; // 下一帧是否是刚进入恢复状态\r\nlet startRecoverLine = 0; // 此次进入恢复状态初始的膛线值\r\nlet cameraRotateTotalX = 0; // 记录相机受弹道图影响的总值\r\nlet cameraRotateTotalY = 0;\r\nlet cameraRotationBasicTotal = 0; // 基础上下晃动\r\nlet recovercameraRotateTotalX = 0; // 此次恢复需要恢复的总值\r\nlet recovercameraRotateTotalY = 0;\r\nconst bPointRecoiledScreenCoord: THREE.Vector2 = new Vector2(); // 开火后后坐力影响后的弹点\r\n\r\n/** \r\n * 自动武器实体抽象类 \r\n */\r\nexport abstract class AutomaticWeapon implements CycleInterface, LoopInterface, WeaponInterface {\r\n    private weaponSystem: WeaponSystem = WeaponSystem.getInstance(); // 武器系统\r\n    private animationMixer: THREE.AnimationMixer; // 动画/网格混合器\r\n    private weaponSkinnedMesh: THREE.SkinnedMesh; // 武器网格\r\n    private camera: THREE.Camera = GameContext.Cameras.PlayerCamera;\r\n    private scene: THREE.Scene = GameContext.Scenes.Handmodel;\r\n\r\n    // 武器实例状态量\r\n    lastFireTime: number = 0; // 上一次开火时间(ms)\r\n    bulletLeftMagzine: number; // 当前弹夹子弹剩余\r\n    bulletLeftTotal: number; // 总子弹剩余\r\n    active: boolean = false; // 武器当前是否处于激活状态(当equip动画结束时武器进入active状态)\r\n\r\n    // 武器属性\r\n    weaponUUID = MathUtils.generateUUID(); // 该武器对象的唯一标识\r\n    weaponClassificationEnum: WeaponClassificationEnum; // 武器类型\r\n    weaponName: string; // 武器名字\r\n    weaponNameSuffix: string; // 武器后缀名\r\n    magazineSize: number; // 弹夹容量\r\n    recoverTime: number; // 弹道恢复时间\r\n    reloadTime: number;\r\n    speed: number; // 手持移动速度\r\n    killaward: number; // 击杀奖励\r\n    damage: number; // 伤害\r\n    fireRate: number; // 射速\r\n    recoilControl: number; // 弹道控制\r\n    accurateRange: number; // 在accurate range距离内第一发子弹必定会落到30cm内的标靶上\r\n    armorPenetration: number; // 穿透能力\r\n\r\n    // 自动武器属性\r\n    recoverLine: number = 0; // 膛线\r\n    bulletPosition: Array<number>; // 弹道弹点采样图2D转化为屏幕坐标采样点2D\r\n    bulletPositionDelta: Array<number>; // 每发子弹偏移量\r\n    bulletPositionInterpolant: THREE.LinearInterpolant; // 弹道图位点生成插值空间\r\n    bulletPositionDeltaInterpolant: THREE.LinearInterpolant; // 弹道图变化量生成插值空间\r\n\r\n\r\n    // 武器动画\r\n    private equipAnim: THREE.AnimationAction;\r\n    private reloadAnim: THREE.AnimationAction;\r\n    private fireAnim: THREE.AnimationAction;\r\n    private holdAnim: THREE.AnimationAction;\r\n    private viewAnim: THREE.AnimationAction;\r\n\r\n    /**\r\n     * 构造方法\r\n     * @param bulletPosition 自动步枪弹道位点图\r\n     * @param bulletPositionDelta 每发子弹偏移量位点图\r\n     */\r\n    constructor(bulletPosition: Array<number>, bulletPositionDelta: Array<number>) {\r\n        this.bulletPosition = bulletPosition;\r\n        this.bulletPositionDelta = bulletPositionDelta;\r\n    }\r\n\r\n    init() {\r\n        const positions = []; // 采样点\r\n        for (let i = 0; i < this.magazineSize; i++) positions[i] = i * this.fireRate; // 29: 2.9000000000000004\r\n\r\n        this.bulletPositionInterpolant = new LinearInterpolant(\r\n            new Float32Array(positions), // parameterPositions\r\n            new Float32Array(this.bulletPosition), // sampleValues\r\n            2, // sampleSize\r\n            new Float32Array(2) // resultBuffer\r\n        );\r\n\r\n        this.bulletPositionDeltaInterpolant = new LinearInterpolant(\r\n            new Float32Array(positions), // parameterPositions\r\n            new Float32Array(this.bulletPositionDelta), // sampleValues\r\n            2, // sampleSize\r\n            new Float32Array(2) // resultBuffer\r\n        );\r\n\r\n        // 监听键盘获取的武器事件\r\n        UserInputEventPipe.addEventListener(UserInputEvent.type, (e: typeof UserInputEvent) => {\r\n            if (!this.active) return;\r\n            switch (e.detail.enum) {\r\n                case UserInputEventEnum.BUTTON_RELOAD: // 换弹按键\r\n                    if (this.magazineSize <= this.bulletLeftMagzine) return; // 2. 当前弹夹子弹是满的不能换弹\r\n                    this.active = false;\r\n                    WeaponAnimationEvent.detail.enum = WeaponAnimationEventEnum.RELOAD;\r\n                    WeaponAnimationEvent.detail.weaponInstance = this;\r\n                    AnimationEventPipe.dispatchEvent(WeaponAnimationEvent); // 触发武器换弹动画\r\n                    break;\r\n                case UserInputEventEnum.BUTTON_TRIGGLE_UP: // 扳机被抬起\r\n                    if (this.bulletLeftMagzine > 0) return; // 如果扳机抬起时当前的子弹为0,那么会自动换弹\r\n                    this.active = false;\r\n                    WeaponAnimationEvent.detail.enum = WeaponAnimationEventEnum.RELOAD;\r\n                    WeaponAnimationEvent.detail.weaponInstance = this;\r\n                    AnimationEventPipe.dispatchEvent(WeaponAnimationEvent); // 触发武器换弹动画\r\n                    break;\r\n            }\r\n        })\r\n\r\n\r\n    }\r\n\r\n    /** 初始化动画 */\r\n    initAnimation() {\r\n        const equipAnimName = `${this.weaponName}_equip`; // 装备\r\n        const reloadAnimName = `${this.weaponName}_reload`; // 换弹\r\n        const fireAnimName = `${this.weaponName}_fire`; // 开火\r\n        const holdAnimName = `${this.weaponName}_hold`; // 握持\r\n        const viewAnimName = `${this.weaponName}_view`; // 检视\r\n\r\n        this.weaponSkinnedMesh = GameContext.GameResources.resourceMap.get(`${this.weaponName}_1`) as THREE.SkinnedMesh; // 武器网格体\r\n        this.animationMixer = GameContext.GameResources.resourceMap.get('AnimationMixer') as THREE.AnimationMixer; // 动画混合器\r\n\r\n        // 将网格体添加到系统中\r\n        this.scene.add(this.weaponSkinnedMesh);\r\n\r\n        // 获取武器对应动画\r\n        this.equipAnim = GameContext.GameResources.resourceMap.get(equipAnimName) as THREE.AnimationAction;\r\n        if (this.equipAnim) this.equipAnim.loop = LoopOnce;\r\n        this.reloadAnim = GameContext.GameResources.resourceMap.get(reloadAnimName) as THREE.AnimationAction;\r\n        if (this.reloadAnim) this.reloadAnim.loop = LoopOnce;\r\n        this.fireAnim = GameContext.GameResources.resourceMap.get(fireAnimName) as THREE.AnimationAction;\r\n        if (this.fireAnim) this.fireAnim.loop = LoopOnce;\r\n        this.holdAnim = GameContext.GameResources.resourceMap.get(holdAnimName) as THREE.AnimationAction;\r\n        if (this.holdAnim) this.holdAnim.loop = LoopRepeat; // 握持动画需要一直显示\r\n        this.viewAnim = GameContext.GameResources.resourceMap.get(viewAnimName) as THREE.AnimationAction;\r\n        if (this.viewAnim) this.viewAnim.loop = LoopOnce;\r\n\r\n        // 当部分动画结束 需要在回调中改变一些参数\r\n        this.animationMixer.addEventListener('finished', (e: any) => {\r\n            if (e.type === 'finished') {\r\n                switch (e.action._clip.name) {\r\n                    case equipAnimName: // 当装备动画结束\r\n                        this.active = true; // 激活\r\n                        break;\r\n                    case reloadAnimName: // 当换弹动画结束\r\n                        this.bulletLeftMagzine = this.magazineSize; // 子弹填满\r\n                        this.active = true; // 激活\r\n                        break;\r\n                }\r\n            }\r\n        })\r\n\r\n        // 接受武器事件回调处理动画\r\n        AnimationEventPipe.addEventListener(WeaponAnimationEvent.type, (e: CustomEvent) => {\r\n            if (e.detail.weaponInstance !== this) return; // 只有当前武器的事件才给予响应\r\n            switch (e.detail.enum) {\r\n                case WeaponAnimationEventEnum.RELIEVE_EQUIP: // 解除装备\r\n                    this.weaponSkinnedMesh.visible = false; // 武器不可见\r\n                    this.active = false; // 未激活\r\n                    this.animationMixer.stopAllAction(); // 关闭所有正在播放的动画\r\n                    if (this.holdAnim) this.holdAnim.reset();\r\n                    if (this.reloadAnim) this.reloadAnim.reset();\r\n                    if (this.equipAnim) this.equipAnim.reset();\r\n                    if (this.fireAnim) this.fireAnim.reset();\r\n                    if (this.viewAnim) this.viewAnim.reset();\r\n                    break;\r\n                case WeaponAnimationEventEnum.EQUIP: // 装备\r\n                    this.weaponSkinnedMesh.visible = true; // 武器可见性\r\n                    this.holdAnim.play();\r\n                    this.equipAnim.weight = 49;\r\n                    this.equipAnim.reset(); // 当前武器的装备动画\r\n                    this.equipAnim.play();\r\n                    this.active = false; // 装备动画播放时属于未激活状态\r\n                    break;\r\n                case WeaponAnimationEventEnum.FIRE: // 开火\r\n                    this.fireAnim.weight = 49;\r\n                    this.fireAnim.reset(); // 开火动画\r\n                    this.fireAnim.play();\r\n                    break;\r\n                case WeaponAnimationEventEnum.RELOAD: // 换弹\r\n                    this.reloadAnim.weight = 49;\r\n                    this.reloadAnim.reset();\r\n                    this.reloadAnim.play();\r\n                    this.active = false; // 换弹时属于未激活状态\r\n                    break;\r\n            }\r\n        })\r\n    }\r\n\r\n    /** 开火 */\r\n    fire() {\r\n        // 如果进入过恢复状态\r\n        if (!startRecover) {\r\n            // 那么这次相机进入恢复状态的总改变量 初始化为上次恢复后的总改变量\r\n            cameraRotateTotalX = recovercameraRotateTotalX;\r\n            cameraRotateTotalY = recovercameraRotateTotalY;\r\n        }\r\n\r\n        // 提供基础弹点位置,基础弹点的位置出来的是屏幕坐标\r\n        const floatTypedArray0 = this.bulletPositionInterpolant.evaluate(this.recoverLine); // 通过插值函数获取当前膛线点对应的基础位置\r\n        bPointRecoiledScreenCoord.set(floatTypedArray0[0], floatTypedArray0[1]); // 提供武器精准度影响后的位置(武器精准度)\r\n        const deltaRecoiledX = (1 / this.accurateRange) * (Math.random() - 0.5); // 修正公式: delta = 精准度倒数 * 随机±0.5\r\n        const deltaRecoiledY = (1 / this.accurateRange) * Math.random(); // Y轴方向只会往上偏移因此一定是正的\r\n        bPointRecoiledScreenCoord.x += deltaRecoiledX;\r\n        bPointRecoiledScreenCoord.y += deltaRecoiledY;\r\n\r\n        // 相机摆动基础(Y轴, 相机Pitch方向)\r\n        const basicPitch = 0.02 * Math.PI * (1 / this.recoilControl);\r\n        this.camera.rotation.x += basicPitch;\r\n        cameraRotationBasicTotal += basicPitch; // 把相机收到变化的值记录起来\r\n\r\n        // 相机摆动(弹道图)\r\n        const floatTypedArray1 = this.bulletPositionDeltaInterpolant.evaluate(this.recoverLine);\r\n        const deltaYaw = - floatTypedArray1[0] * Math.PI * (1 / this.recoilControl); // 弹道图向右为正方向,相机Yaw向右为负方向\r\n        const deltaPitch = floatTypedArray1[1] * Math.PI * (1 / this.recoilControl);\r\n        this.camera.rotation.x += deltaPitch;\r\n        this.camera.rotation.y += deltaYaw; // 屏幕的x坐标对应的是相机的yaw\r\n        cameraRotateTotalX += deltaPitch; // 把相机收到弹道图变化的值记录起来\r\n        cameraRotateTotalY += deltaYaw;\r\n\r\n        // 开火之后\r\n        this.recoverLine += this.fireRate; // 1. 增加膛线插值\r\n        this.bulletLeftMagzine -= 1; // 2. 减少子弹剩余量\r\n        startRecover = true; // 开过枪之后下一帧可以是恢复准星的第一帧\r\n\r\n        // 发出开火事件\r\n        WeaponAnimationEvent.detail.enum = WeaponAnimationEventEnum.FIRE;\r\n        WeaponAnimationEvent.detail.weaponInstance = this;\r\n        AnimationEventPipe.dispatchEvent(WeaponAnimationEvent); // 动画事件\r\n\r\n        WeaponFireEvent.detail.bPointRecoiledScreenCoord = bPointRecoiledScreenCoord; // 设置后坐力计算后的弹点\r\n        WeaponFireEvent.detail.weaponInstance = this;\r\n        GameLogicEventPipe.dispatchEvent(WeaponFireEvent); // 逻辑判断事件\r\n\r\n        // 由于还没有做UI 这里打印一下子弹剩余量\r\n        console.log(`fire: ${this.bulletLeftMagzine} / ${this.magazineSize}`);\r\n    }\r\n\r\n    /** 相机/准星恢复 */\r\n    recover(deltaTime?: number, elapsedTime?: number): void {\r\n        if (cameraRotationBasicTotal > 0) {\r\n            if (cameraRotationBasicTotal - 0.001 > 0) {\r\n                this.camera.rotation.x -= 0.001;\r\n                cameraRotationBasicTotal -= 0.001;\r\n            } else {\r\n                this.camera.rotation.x -= cameraRotationBasicTotal;\r\n                cameraRotationBasicTotal = 0;\r\n            }\r\n        }\r\n        const triggleDown = this.weaponSystem.triggleDown;\r\n        let deltaRecoverScale = deltaTime / this.recoverTime; // 每段deltaTime的recover量\r\n        if (!triggleDown || this.bulletLeftMagzine <= 0 || !this.active) {// 如果鼠标没有按下或者这一帧刚好没子弹了\r\n            if (startRecover) { // 如果这一帧是这次进入恢复状态的第一帧\r\n                recovercameraRotateTotalX = cameraRotateTotalX; // 记录recovercameraRotateTotalX此次恢复需要恢复的总值\r\n                recovercameraRotateTotalY = cameraRotateTotalY;\r\n                startRecoverLine = this.recoverLine;\r\n            }\r\n            // 判断是否需要恢复准星\r\n            if (this.recoverLine != 0) { // 需要恢复准星\r\n                const recoverLineBeforeMinus = this.recoverLine;\r\n                if (this.recoverLine - (deltaRecoverScale * startRecoverLine) > 0) this.recoverLine -= (deltaRecoverScale * startRecoverLine);\r\n                else { // 如果下一帧就减到<0了\r\n                    deltaRecoverScale = this.recoverLine / startRecoverLine;\r\n                    this.recoverLine = 0; // 膛线插值恢复\r\n                    cameraRotateTotalX = 0;\r\n                    cameraRotateTotalY = 0;\r\n                    recovercameraRotateTotalX = 0;\r\n                    recovercameraRotateTotalY = 0;\r\n                }\r\n                const minusScale = recoverLineBeforeMinus - this.recoverLine;\r\n                const recoverLineScale = minusScale / startRecoverLine;\r\n                const deltaYaw = cameraRotateTotalY * recoverLineScale;\r\n                const deltaPitch = cameraRotateTotalX * recoverLineScale;\r\n                this.camera.rotation.x -= deltaPitch;\r\n                this.camera.rotation.y -= deltaYaw; // 屏幕的x坐标对应的是相机的yaw\r\n                recovercameraRotateTotalX -= deltaPitch;\r\n                recovercameraRotateTotalY -= deltaYaw;\r\n                startRecover = false; // 下一帧不是进入恢复状态的第一帧\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    callEveryFrame(deltaTime?: number, elapsedTime?: number): void {\r\n        if (!GameContext.PointLock.isLocked) return; // 当前处于PointLock锁定状态\r\n        if (!this.active) return; // 武器未被激活\r\n        if (this.bulletLeftMagzine <= 0) return; // 剩余子弹不足\r\n        if (!this.weaponSystem.triggleDown) return; // 当前扳机没有被扣下\r\n        if (performance.now() - this.lastFireTime >= this.fireRate * 1000) { // 大于武器开火间隔\r\n            this.lastFireTime = performance.now();\r\n            this.fire();\r\n        }\r\n    }\r\n}","// https://www.3dmgame.com/gl/3626154_2.html\r\n\r\n/** CSGO弹道相关工具 */\r\nexport class AutomaticWeaponBPointsUtil {\r\n\r\n    /**\r\n     * 将CSGO弹道图转化为屏幕坐标系位点\r\n     * screen coord: 在标准化设备坐标中鼠标的二维坐标, X分量与Y分量应当在-1到1之间\r\n     * 1. CSGO弹道图第一发为屏幕中点 [0, 0]\r\n     * 2. 根据弹道图算出子弹之间的偏移量 deltaX,Y(px)\r\n     * 3. 根据绘制弹道图时屏幕的分辨率缩放2中的偏移量\r\n     * 4. 根据对屏幕中点的偏移量绘制屏幕坐标系位点\r\n     * 5. 施加后坐力值影响\r\n     * \r\n     * @param bulletPositionArray \r\n     * @param bulletNumber \r\n     * @param rateX 弹道图录制时横向的缩放比率\r\n     * @param rateY 弹道图录制时纵向的缩放比率\r\n     * @param recoilForce 后坐力\r\n     * @returns \r\n     */\r\n    static bulletPositionArray2ScreenCoordArray = function (bulletPositionArray: number[], bulletNumber: number, rateX: number, rateY: number, recoilForce: number) {\r\n\r\n        // 输出\r\n        const bulletDeltaArray = []\r\n\r\n        let baseX = bulletPositionArray[0]; // 中心点在弹道图中的x坐标\r\n        let baseY = bulletPositionArray[1]; // 中心点在弹道图中的y坐标\r\n\r\n        const pmMX = 960; // 中心点在当前分辨率下屏幕中的x坐标\r\n        const pmMy = 540; // 中心点在当前分辨率下屏幕中的y坐标\r\n\r\n        for (let i = 0; i < bulletNumber; i++) {\r\n\r\n            // 计算出当前点距离图中中心点x,y坐标的变化量\r\n\r\n            let i2_x = bulletPositionArray[2 * i] - baseX;\r\n            let i2_y = bulletPositionArray[2 * i + 1] - baseY;\r\n\r\n            // 转换弹道图的缩放比率 X 后坐力系数\r\n\r\n            i2_x = i2_x * rateX * recoilForce;\r\n            i2_y = i2_y * rateY * recoilForce;\r\n\r\n            bulletDeltaArray[2 * i] = pmMX + i2_x;\r\n            bulletDeltaArray[2 * i + 1] = pmMy - i2_y;\r\n\r\n        }\r\n\r\n        for (let i = 0; i < bulletNumber; i++) {\r\n            bulletDeltaArray[2 * i] = (bulletDeltaArray[2 * i] - 960) / 960;\r\n            bulletDeltaArray[2 * i + 1] = (bulletDeltaArray[2 * i + 1] - 540) / 540;\r\n        }\r\n\r\n        return bulletDeltaArray;\r\n    }\r\n\r\n\r\n    /**\r\n     * 将CSGO弹道图变化量位移转化为屏幕坐标系位点\r\n     * screen coord: 在标准化设备坐标中鼠标的二维坐标, X分量与Y分量应当在-1到1之间\r\n     * 1. CSGO弹道图第一发为屏幕中点 [0, 0]\r\n     * 2. 根据弹道图算出子弹之间的偏移量 deltaX,Y(px)\r\n     * 3. 根据绘制弹道图时屏幕的分辨率缩放2中的偏移量\r\n     * 4. 根据对屏幕中点的偏移量绘制屏幕坐标系位点\r\n     * 5. 施加后坐力值影响\r\n     * \r\n     * @param bulletPositionArray \r\n     * @param bulletNumber \r\n     * @param rateX 弹道图录制时横向的缩放比率\r\n     * @param rateY 弹道图录制时纵向的缩放比率\r\n     * @param recoilForce 后坐力\r\n     * @returns \r\n     */\r\n    static bulletDeltaPositionArray2ScreenCoordArray = function (bulletPositionArray: number[], bulletNumber: number, rateX: number, rateY: number, recoilForce: number) {\r\n\r\n        // 输出\r\n        const bulletDeltaArray = []\r\n\r\n        let baseX = bulletPositionArray[0]; // 中心点在弹道图中的x坐标\r\n        let baseY = bulletPositionArray[1]; // 中心点在弹道图中的y坐标\r\n\r\n        const pmMX = 960; // 中心点在当前分辨率下屏幕中的x坐标\r\n        const pmMy = 540; // 中心点在当前分辨率下屏幕中的y坐标\r\n\r\n        for (let i = 0; i < bulletNumber; i++) {\r\n\r\n            // 计算出当前点距离图中中心点x,y坐标的变化量\r\n\r\n            let i2_x = bulletPositionArray[2 * i] - baseX;\r\n            let i2_y = bulletPositionArray[2 * i + 1] - baseY;\r\n\r\n            // 转换弹道图的缩放比率 X 后坐力系数\r\n\r\n            i2_x = i2_x * rateX * recoilForce;\r\n            i2_y = i2_y * rateY * recoilForce;\r\n\r\n            bulletDeltaArray[2 * i] = pmMX + i2_x;\r\n            bulletDeltaArray[2 * i + 1] = pmMy - i2_y;\r\n\r\n        }\r\n\r\n        for (let i = 0; i < bulletNumber; i++) {\r\n            bulletDeltaArray[2 * i] = (bulletDeltaArray[2 * i] - 960) / 960;\r\n            bulletDeltaArray[2 * i + 1] = (bulletDeltaArray[2 * i + 1] - 540) / 540;\r\n        }\r\n\r\n        let baseXResolved = bulletDeltaArray[0];\r\n        let baseYResolved = bulletDeltaArray[1];\r\n\r\n        for (let i = 0; i < bulletNumber; i++) {\r\n\r\n            let i2_x = bulletDeltaArray[2 * i];\r\n            let i2_y = bulletDeltaArray[2 * i + 1];\r\n\r\n            bulletDeltaArray[2 * i] = bulletDeltaArray[2 * i] - baseXResolved;\r\n            bulletDeltaArray[2 * i + 1] = bulletDeltaArray[2 * i + 1] - baseYResolved;\r\n\r\n            baseXResolved = i2_x;\r\n            baseYResolved = i2_y;\r\n\r\n        }\r\n\r\n        return bulletDeltaArray;\r\n    }\r\n\r\n}","import { AutomaticWeapon } from '../abstract/AutomaticWeapon';\r\nimport { AutomaticWeaponBPointsUtil } from \"../utils/AutomaticWeaponBPointsUtil\";\r\nimport { GameContext } from '@src/core/GameContext';\r\nimport { dealWithWeaponTexture } from '@src/core/lib/threejs_common';\r\nimport { WeaponClassificationEnum } from '@src/gameplay/abstract/WeaponClassificationEnum';\r\nimport { DoubleSide, MeshBasicMaterial, Vector3 } from 'three';\r\n\r\nconst ak47BulletPositionArray = [\r\n    222, 602, 230, 585, 222, 540, 228, 472, 231, 398,\r\n    200, 320, 180, 255, 150, 208, 190, 173, 290, 183,\r\n    343, 177, 312, 150, 350, 135, 412, 158, 420, 144,\r\n    323, 141, 277, 124, 244, 100, 179, 102, 100, 124,\r\n    149, 130, 134, 123, 149, 100, 170, 92, 125, 100,\r\n    110, 87, 160, 88, 237, 95, 346, 147, 381, 146\r\n]\r\n\r\nconst bulletPosition = AutomaticWeaponBPointsUtil.bulletPositionArray2ScreenCoordArray(ak47BulletPositionArray, 30, 0.2, 0.15, 1.4); // 计算弹道图\r\nconst bulletPositionDelta = AutomaticWeaponBPointsUtil.bulletDeltaPositionArray2ScreenCoordArray(ak47BulletPositionArray, 30, 0.2, 0.15, 1); // 影响相机抖动\r\n\r\nexport class AK47 extends AutomaticWeapon {\r\n\r\n    muzzlePosition: THREE.Vector3 = new Vector3(0.921, 1.057, 0.491);\r\n    chamberPosition: THREE.Vector3 = new Vector3(-0.276, 1.086, 0.565);\r\n\r\n    constructor() {\r\n        super(bulletPosition, bulletPositionDelta);\r\n\r\n        const skinnedMesh = GameContext.GameResources.resourceMap.get('AK47_1') as THREE.SkinnedMesh;\r\n        const texture = GameContext.GameResources.textureLoader.load('/weapons/weapon.AK47.jpg');\r\n        dealWithWeaponTexture(texture);\r\n        const material = new MeshBasicMaterial({ map: texture, side: DoubleSide });\r\n        skinnedMesh.material = material;\r\n\r\n        this.weaponClassificationEnum = WeaponClassificationEnum.Rifle;\r\n        this.weaponName = 'AK47';\r\n        this.magazineSize = 30;\r\n        this.fireRate = 60 / 600.0;\r\n        this.recoverTime = 0.368;\r\n        this.reloadTime = 2.;\r\n        this.recoilControl = 4;\r\n        this.accurateRange = 120;\r\n\r\n        this.bulletLeftMagzine = this.magazineSize;\r\n        this.bulletLeftTotal = 90;\r\n\r\n        this.init();\r\n        this.initAnimation();\r\n    }\r\n\r\n}","import { GameContext } from \"@src/core/GameContext\";\r\nimport { WeaponClassificationEnum } from '@src/gameplay/abstract/WeaponClassificationEnum';\r\nimport { UserInputEvent, UserInputEventPipe } from '@src/gameplay/pipes/UserinputEventPipe';\r\nimport { UserInputEventEnum, WeaponAnimationEventEnum } from '@src/gameplay/abstract/EventsEnum';\r\nimport { AnimationEventPipe, WeaponAnimationEvent } from '@src/gameplay/pipes/AnimationEventPipe';\r\nimport { GameLogicEventPipe, WeaponFireEvent } from '@src/gameplay/pipes/GameLogicEventPipe';\r\nimport { WeaponInterface } from './WeaponInterface';\r\nimport { LoopOnce, LoopRepeat, MathUtils, Vector2 } from 'three';\r\n\r\nconst bPointRecoiledScreenCoord: THREE.Vector2 = new Vector2(); // 开火后后坐力影响后的弹点\r\n\r\nlet startRecover: boolean = true;\r\nlet startRecoverLine: number = 0;\r\nlet cameraRotationBasicTotal = 0; // 半自动武器只收到pitch的影响\r\nlet recovercameraRotateTotalX = 0; // 半自动武器只收到pitch的影响\r\n\r\n/**\r\n * 半自动武器抽象类\r\n */\r\nexport abstract class SemiAutomaticWeapon implements WeaponInterface {\r\n\r\n    private animationMixer: THREE.AnimationMixer; // 动画/网格混合器\r\n    private weaponSkinnedMesh: THREE.SkinnedMesh; // 武器网格\r\n    private camera: THREE.Camera = GameContext.Cameras.PlayerCamera;\r\n    private scene: THREE.Scene = GameContext.Scenes.Handmodel;\r\n\r\n    // 武器实例状态量\r\n    lastFireTime: number = 0; // 上一次开火时间(ms)\r\n    bulletLeftMagzine: number; // 当前弹夹子弹剩余\r\n    bulletLeftTotal: number; // 总子弹剩余\r\n    active: boolean = false; // 武器当前是否处于激活状态(当equip动画结束时武器进入active状态)\r\n\r\n    // 武器属性\r\n    weaponUUID = MathUtils.generateUUID(); // 该武器对象的唯一标识\r\n    weaponClassificationEnum: WeaponClassificationEnum; // 武器类型\r\n    weaponName: string; // 武器名字\r\n    weaponNameSuffix: string; // 武器后缀名\r\n    magazineSize: number; // 弹夹容量\r\n    recoverTime: number; // 弹道恢复时间\r\n    reloadTime: number;\r\n    speed: number; // 手持移动速度\r\n    killaward: number; // 击杀奖励\r\n    damage: number; // 伤害\r\n    fireRate: number; // 射速\r\n    recoilControl: number; // 弹道控制\r\n    accurateRange: number; // 在accurate range距离内第一发子弹必定会落到30cm内的标靶上\r\n    armorPenetration: number; // 穿透能力\r\n\r\n    // 半自动武器\r\n    recoverLine: number = 0;\r\n\r\n    // 武器动画\r\n    private equipAnim: THREE.AnimationAction;\r\n    private reloadAnim: THREE.AnimationAction;\r\n    private fireAnim: THREE.AnimationAction;\r\n    private holdAnim: THREE.AnimationAction;\r\n    private viewAnim: THREE.AnimationAction;\r\n\r\n    init() {\r\n        // 监听键盘获取的武器事件\r\n        UserInputEventPipe.addEventListener(UserInputEvent.type, (e: CustomEvent) => {\r\n            if (!this.active) return; // 判断武器是否激活\r\n            switch (e.detail.enum) {\r\n                case UserInputEventEnum.BUTTON_RELOAD: // 换弹按键\r\n                    if (!this.active) return; // 1. 未激活状态下(如处于切枪过程中)不能进行换弹\r\n                    if (this.magazineSize <= this.bulletLeftMagzine) return; // 2. 当前弹夹子弹是满的不能换弹\r\n                    this.active = false;\r\n                    WeaponAnimationEvent.detail.enum = WeaponAnimationEventEnum.RELOAD;\r\n                    WeaponAnimationEvent.detail.weaponInstance = this;\r\n                    AnimationEventPipe.dispatchEvent(WeaponAnimationEvent); // 触发武器换弹事件\r\n                    break;\r\n                case UserInputEventEnum.BUTTON_TRIGGLE_DOWN: // 扣扳机\r\n                    if (!GameContext.PointLock.isLocked) return;\r\n                    if (!this.active) return; // 非激活状态取消开枪事件接收\r\n                    if (this.bulletLeftMagzine <= 0) { // 如果子弹不够\r\n                        this.active = false;\r\n                        WeaponAnimationEvent.detail.enum = WeaponAnimationEventEnum.RELOAD;\r\n                        WeaponAnimationEvent.detail.weaponInstance = this;\r\n                        AnimationEventPipe.dispatchEvent(WeaponAnimationEvent); // 触发武器换弹事件\r\n                        return;\r\n                    }\r\n                    if (performance.now() - this.lastFireTime >= this.fireRate * 1000) {\r\n                        this.lastFireTime = performance.now();\r\n                        this.fire();\r\n                    }\r\n                    break;\r\n            }\r\n\r\n        })\r\n\r\n    }\r\n\r\n    /** 初始化动画 */\r\n    initAnimation() {\r\n\r\n        const equipAnimName = `${this.weaponName}_equip`; // 装备\r\n        const reloadAnimName = `${this.weaponName}_reload`; // 换弹\r\n        const fireAnimName = `${this.weaponName}_fire`; // 开火\r\n        const holdAnimName = `${this.weaponName}_hold`; // 握持\r\n        const viewAnimName = `${this.weaponName}_view`; // 检视\r\n\r\n        this.weaponSkinnedMesh = GameContext.GameResources.resourceMap.get(`${this.weaponName}_1`) as THREE.SkinnedMesh; // 武器网格体\r\n        this.animationMixer = GameContext.GameResources.resourceMap.get('AnimationMixer') as THREE.AnimationMixer; // 动画混合器\r\n\r\n        // 将网格体添加到系统中\r\n        this.scene.add(this.weaponSkinnedMesh);\r\n\r\n\r\n        this.equipAnim = GameContext.GameResources.resourceMap.get(equipAnimName) as THREE.AnimationAction;\r\n        if (this.equipAnim) this.equipAnim.loop = LoopOnce;\r\n        this.reloadAnim = GameContext.GameResources.resourceMap.get(reloadAnimName) as THREE.AnimationAction;\r\n        if (this.reloadAnim) this.reloadAnim.loop = LoopOnce;\r\n        this.fireAnim = GameContext.GameResources.resourceMap.get(fireAnimName) as THREE.AnimationAction;\r\n        if (this.fireAnim) this.fireAnim.loop = LoopOnce;\r\n        this.holdAnim = GameContext.GameResources.resourceMap.get(holdAnimName) as THREE.AnimationAction;\r\n        if (this.holdAnim) this.holdAnim.loop = LoopRepeat; // 握持动画需要一直显示\r\n        this.viewAnim = GameContext.GameResources.resourceMap.get(viewAnimName) as THREE.AnimationAction;\r\n        if (this.viewAnim) this.viewAnim.loop = LoopOnce;\r\n\r\n        // 当部分动画结束 需要在回调中改变一些参数\r\n\r\n        this.animationMixer.addEventListener('finished', (e: any) => {\r\n            if (e.type === 'finished') {\r\n                switch (e.action._clip.name) {\r\n                    case equipAnimName: // 当装备动画结束\r\n                        this.active = true; // 激活\r\n                        break;\r\n                    case reloadAnimName: // 当换弹动画结束\r\n                        this.bulletLeftMagzine = this.magazineSize; // 子弹填满\r\n                        this.active = true; // 激活\r\n                        break;\r\n                }\r\n            }\r\n        })\r\n\r\n        // 接受武器事件回调处理动画\r\n        AnimationEventPipe.addEventListener(WeaponAnimationEvent.type, (e: CustomEvent) => {\r\n            if (e.detail.weaponInstance !== this) return; // 只有当前武器的事件才给予响应\r\n            switch (e.detail.enum) {\r\n                case WeaponAnimationEventEnum.RELIEVE_EQUIP:  // 解除装备\r\n                    this.weaponSkinnedMesh.visible = false; // 武器不可见\r\n                    this.active = false; // 未激活\r\n                    this.animationMixer.stopAllAction(); // 关闭所有正在播放的动画\r\n                    if (this.holdAnim) this.holdAnim.reset();\r\n                    if (this.reloadAnim) this.reloadAnim.reset();\r\n                    if (this.equipAnim) this.equipAnim.reset();\r\n                    if (this.fireAnim) this.fireAnim.reset();\r\n                    if (this.viewAnim) this.viewAnim.reset();\r\n                    break;\r\n                case WeaponAnimationEventEnum.EQUIP: // 装备\r\n                    this.weaponSkinnedMesh.visible = true; // 武器可见性\r\n                    this.holdAnim.play();\r\n                    this.equipAnim.weight = 49;\r\n                    this.equipAnim.reset(); // 当前武器的装备动画\r\n                    this.equipAnim.play();\r\n                    this.active = false; // 装备动画播放时属于未激活状态\r\n                    break;\r\n                case WeaponAnimationEventEnum.FIRE:\r\n                    this.fireAnim.weight = 49;\r\n                    this.fireAnim.reset(); // 开火动画\r\n                    this.fireAnim.play();\r\n                    break;\r\n                case WeaponAnimationEventEnum.RELOAD:\r\n                    this.reloadAnim.weight = 49;\r\n                    this.reloadAnim.reset();\r\n                    this.reloadAnim.play();\r\n                    this.active = false; // 换弹时属于未激活状态\r\n                    break;\r\n            }\r\n        })\r\n    }\r\n\r\n    /** 开火 */\r\n    fire(): void {\r\n\r\n        if (!startRecover) { // 如果进入过恢复状态\r\n            cameraRotationBasicTotal = recovercameraRotateTotalX; // 那么相机总改变量要等于恢复后的量\r\n        }\r\n\r\n        const bpX = (1 / this.accurateRange) * (Math.random() - 0.5);\r\n        const bpY = (1 / this.accurateRange) * Math.random(); // Y轴方向只会往上偏移\r\n\r\n        // 相机位置改变\r\n        const deltaPitch = 0.05 * Math.PI * (1 / this.recoilControl);\r\n        this.camera.rotation.x += deltaPitch;\r\n        cameraRotationBasicTotal += deltaPitch; // 把相机收到弹道图变化的值记录起来\r\n\r\n        // 添加膛线, 越是连发就越不准\r\n        this.recoverLine += this.fireRate;\r\n        const k = ((this.recoverLine / this.fireRate) - 1.0) * 60 / this.recoilControl;\r\n\r\n        const deltaRecoiledX = bpX * k;\r\n        const deltaRecoiledY = bpY * k;\r\n        bPointRecoiledScreenCoord.set(deltaRecoiledX, deltaRecoiledY);\r\n\r\n        // 发出动画事件\r\n        WeaponAnimationEvent.detail.enum = WeaponAnimationEventEnum.FIRE;\r\n        WeaponAnimationEvent.detail.weaponInstance = this;\r\n        AnimationEventPipe.dispatchEvent(WeaponAnimationEvent);\r\n        // 发出开火逻辑事件\r\n        WeaponFireEvent.detail.bPointRecoiledScreenCoord = bPointRecoiledScreenCoord;\r\n        WeaponFireEvent.detail.weaponInstance = this;\r\n        GameLogicEventPipe.dispatchEvent(WeaponFireEvent);\r\n\r\n        this.bulletLeftMagzine -= 1;\r\n        startRecover = true;\r\n\r\n    };\r\n\r\n    recover(deltaTime?: number, elapsedTime?: number): void {\r\n        if (this.recoverLine != 0) { // 需要恢复准星\r\n\r\n            // 如果是开始恢复的第一帧\r\n            if (startRecover) {\r\n                recovercameraRotateTotalX = cameraRotationBasicTotal; // 记录recovercameraRotateTotalX此次恢复需要恢复的总值\r\n                startRecoverLine = this.recoverLine;\r\n            }\r\n\r\n            let deltaRecoverScale = deltaTime / this.recoverTime; // 每段deltaTime的recover量\r\n            const recoverLineBeforeMinus = this.recoverLine;\r\n            if (this.recoverLine - (deltaRecoverScale * startRecoverLine) > 0) this.recoverLine -= (deltaRecoverScale * startRecoverLine);\r\n            else { // 如果下一帧就减到<0了\r\n                deltaRecoverScale = this.recoverLine / startRecoverLine;\r\n                this.recoverLine = 0; // 膛线插值恢复\r\n                cameraRotationBasicTotal = 0;\r\n                recovercameraRotateTotalX = 0;\r\n            }\r\n            const minusScale = recoverLineBeforeMinus - this.recoverLine;\r\n            const recoverLineScale = minusScale / startRecoverLine;\r\n            const deltaPitch = cameraRotationBasicTotal * recoverLineScale;\r\n            this.camera.rotation.x -= deltaPitch;\r\n            recovercameraRotateTotalX -= deltaPitch;\r\n            startRecover = false; // 下一帧不是进入恢复状态的第一帧\r\n            //\r\n        }\r\n    }\r\n}","import { GameContext } from '@src/core/GameContext';\r\nimport { dealWithWeaponTexture } from '@src/core/lib/threejs_common';\r\nimport { WeaponClassificationEnum } from '@src/gameplay/abstract/WeaponClassificationEnum';\r\nimport { SemiAutomaticWeapon } from '../abstract/SemiAutomaticWeapon';\r\nimport { DoubleSide, MeshBasicMaterial, Vector3 } from 'three';\r\n\r\nexport class USP extends SemiAutomaticWeapon {\r\n\r\n    muzzlePosition: THREE.Vector3 = new Vector3(0.887, 1.079, 0.494);\r\n    chamberPosition: THREE.Vector3 = new Vector3(0.109, 1.101, 0.579);\r\n\r\n    constructor() {\r\n        super();\r\n        const skinnedMesh = GameContext.GameResources.resourceMap.get('USP_1');\r\n        const texture = GameContext.GameResources.textureLoader.load('/weapons/weapon.USP.jpg');\r\n        dealWithWeaponTexture(texture);\r\n        const material = new MeshBasicMaterial({ map: texture, side: DoubleSide });\r\n        (skinnedMesh as THREE.SkinnedMesh).material = material;\r\n\r\n        this.weaponClassificationEnum = WeaponClassificationEnum.Pistol;\r\n        this.weaponName = 'USP';\r\n        this.magazineSize = 12;\r\n        this.fireRate = 0.17;\r\n        this.recoverTime = 0.34;\r\n        this.reloadTime = 2.;\r\n        this.recoilControl = 5;\r\n        this.accurateRange = 120;\r\n\r\n        this.bulletLeftMagzine = this.magazineSize;\r\n\r\n        this.init();\r\n        this.initAnimation();\r\n\r\n    }\r\n\r\n}","import { GameContext } from '@src/core/GameContext';\r\nimport { UserInputEventEnum, WeaponAnimationEventEnum } from '@src/gameplay/abstract/EventsEnum';\r\nimport { WeaponClassificationEnum } from '@src/gameplay/abstract/WeaponClassificationEnum';\r\nimport { AnimationEventPipe, WeaponAnimationEvent } from '@src/gameplay/pipes/AnimationEventPipe';\r\nimport { GameLogicEventPipe, WeaponFireEvent } from '@src/gameplay/pipes/GameLogicEventPipe';\r\nimport { UserInputEvent, UserInputEventPipe } from '@src/gameplay/pipes/UserinputEventPipe';\r\nimport { LoopOnce, LoopRepeat, MathUtils, Vector2 } from 'three';\r\n\r\nimport { WeaponInterface } from \"./WeaponInterface\";\r\n\r\nconst bPointRecoiledScreenCoord: THREE.Vector2 = new Vector2(); // 开火后后坐力影响后的弹点 匕首永远是屏幕中央\r\n\r\nexport class DaggerWeapon implements WeaponInterface {\r\n\r\n    private animationMixer: THREE.AnimationMixer; // 动画/网格混合器\r\n    private weaponSkinnedMesh: THREE.SkinnedMesh; // 武器网格\r\n    private scene: THREE.Scene = GameContext.Scenes.Handmodel;\r\n\r\n    active: boolean;\r\n\r\n    weaponClassificationEnum: WeaponClassificationEnum = WeaponClassificationEnum.Malee;\r\n    weaponUUID: string = MathUtils.generateUUID();\r\n    lastFireTime: number = 0; // 上一次开火时间\r\n    bulletLeftMagzine: number;\r\n    bulletLeftTotal: number;\r\n    weaponName: string;\r\n    weaponNameSuffix: string;\r\n    magazineSize: number;\r\n    recoverTime: number;\r\n    reloadTime: number;\r\n    speed: number;\r\n    killaward: number;\r\n    damage: number;\r\n    fireRate: number = 0.5;\r\n    recoilControl: number;\r\n    accurateRange: number;\r\n    armorPenetration: number;\r\n\r\n    constructor() {\r\n        // 监听键盘获取的武器事件\r\n        UserInputEventPipe.addEventListener(UserInputEvent.type, (e: CustomEvent) => {\r\n            if (!this.active) return; // 判断武器是否激活\r\n            switch (e.detail.enum) {\r\n                case UserInputEventEnum.BUTTON_TRIGGLE_DOWN: // 当扳机被扣下\r\n                    const performanceNow = performance.now();\r\n                    if (!GameContext.PointLock.isLocked) return;\r\n                    if (!this.active) return;\r\n                    if (performanceNow - this.lastFireTime < this.fireRate * 1000) return;\r\n                    this.lastFireTime = performanceNow;\r\n                    WeaponAnimationEvent.detail.enum = WeaponAnimationEventEnum.FIRE;\r\n                    WeaponAnimationEvent.detail.weaponInstance = this;\r\n                    AnimationEventPipe.dispatchEvent(WeaponAnimationEvent);\r\n                    WeaponFireEvent.detail.bPointRecoiledScreenCoord = bPointRecoiledScreenCoord;\r\n                    WeaponFireEvent.detail.weaponInstance = this;\r\n                    GameLogicEventPipe.dispatchEvent(WeaponFireEvent);\r\n                    break;\r\n            }\r\n        })\r\n    }\r\n\r\n    // 武器动画\r\n    private equipAnim: THREE.AnimationAction;\r\n    private fireAnim: THREE.AnimationAction;\r\n    private holdAnim: THREE.AnimationAction;\r\n    private viewAnim: THREE.AnimationAction;\r\n\r\n    /** 初始化动画 */\r\n    initAnimation() {\r\n\r\n        const equipAnimName = `${this.weaponName}_equip`; // 装备\r\n        const fireAnimName = `${this.weaponName}_fire`; // 开火\r\n        const holdAnimName = `${this.weaponName}_hold`; // 握持\r\n        const viewAnimName = `${this.weaponName}_view`; // 检视\r\n\r\n        this.weaponSkinnedMesh = GameContext.GameResources.resourceMap.get(`${this.weaponName}_1`) as THREE.SkinnedMesh; // 武器网格体\r\n        this.animationMixer = GameContext.GameResources.resourceMap.get('AnimationMixer') as THREE.AnimationMixer; // 动画混合器\r\n\r\n        // 将网格体添加到系统中\r\n        this.scene.add(this.weaponSkinnedMesh);\r\n        this.equipAnim = GameContext.GameResources.resourceMap.get(equipAnimName) as THREE.AnimationAction;\r\n        if (this.equipAnim) this.equipAnim.loop = LoopOnce;\r\n        this.fireAnim = GameContext.GameResources.resourceMap.get(fireAnimName) as THREE.AnimationAction;\r\n        if (this.fireAnim) this.fireAnim.loop = LoopOnce;\r\n        this.holdAnim = GameContext.GameResources.resourceMap.get(holdAnimName) as THREE.AnimationAction;\r\n        if (this.holdAnim) this.holdAnim.loop = LoopRepeat; // 握持动画需要一直显示\r\n        this.viewAnim = GameContext.GameResources.resourceMap.get(viewAnimName) as THREE.AnimationAction;\r\n        if (this.viewAnim) this.viewAnim.loop = LoopOnce;\r\n\r\n        // 当部分动画结束 需要在回调中改变一些参数\r\n        this.animationMixer.addEventListener('finished', (e: any) => {\r\n            if (e.type === 'finished') {\r\n                switch (e.action._clip.name) {\r\n                    case equipAnimName: // 当装备动画结束\r\n                        this.active = true; // 激活\r\n                        break;\r\n                }\r\n            }\r\n        })\r\n\r\n        // 接受武器事件回调处理动画\r\n        AnimationEventPipe.addEventListener(WeaponAnimationEvent.type, (e: CustomEvent) => {\r\n            if (e.detail.weaponInstance !== this) return; // 只有当前武器的事件才给予响应\r\n            switch (e.detail.enum) {\r\n                case WeaponAnimationEventEnum.RELIEVE_EQUIP:  // 解除装备\r\n                    this.weaponSkinnedMesh.visible = false; // 武器不可见\r\n                    this.active = false; // 未激活\r\n                    this.animationMixer.stopAllAction(); // 关闭所有正在播放的动画\r\n                    if (this.holdAnim) this.holdAnim.reset();\r\n                    if (this.equipAnim) this.equipAnim.reset();\r\n                    if (this.fireAnim) this.fireAnim.reset();\r\n                    if (this.viewAnim) this.viewAnim.reset();\r\n                    break;\r\n                case WeaponAnimationEventEnum.EQUIP:  // 装备\r\n                    this.weaponSkinnedMesh.visible = true; // 武器可见性\r\n                    this.holdAnim.play();\r\n                    this.equipAnim.weight = 49;\r\n                    this.equipAnim.reset(); // 当前武器的装备动画\r\n                    this.equipAnim.play();\r\n                    this.active = false; // 装备动画播放时属于未激活状态\r\n                    break;\r\n                case WeaponAnimationEventEnum.FIRE:\r\n                    this.fireAnim.weight = 49;\r\n                    this.fireAnim.reset(); // 开火动画\r\n                    this.fireAnim.play();\r\n                    break;\r\n            }\r\n        })\r\n    }\r\n\r\n}","import { GameContext } from '@src/core/GameContext';\r\nimport { dealWithWeaponTexture } from '@src/core/lib/threejs_common';\r\nimport { DoubleSide, MeshBasicMaterial } from 'three';\r\nimport { DaggerWeapon } from '../abstract/DaggerWeapon';\r\n\r\nexport class M9 extends DaggerWeapon {\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        const skinnedMesh = GameContext.GameResources.resourceMap.get('M9_1') as THREE.SkinnedMesh;\r\n        const texture = GameContext.GameResources.textureLoader.load('/weapons/weapon.M9.jpg');\r\n        dealWithWeaponTexture(texture);\r\n        const material = new MeshBasicMaterial({ map: texture, side: DoubleSide });\r\n        skinnedMesh.material = material;\r\n\r\n        this.weaponName = 'M9';\r\n        this.initAnimation();\r\n    }\r\n\r\n}","import { UserInputEventEnum } from '../abstract/EventsEnum';\r\nimport { UserInputEventPipe, UserInputEvent, } from '../pipes/UserinputEventPipe';\r\n\r\n/** \r\n * 处理玩家输入按键映射的控制器\r\n */\r\nexport class UserInputSystem {\r\n\r\n    constructor() {\r\n        this.browserEnviromentDefaultBinding();\r\n    }\r\n\r\n    /**\r\n     * 浏览器环境下默认的按键绑定\r\n     */\r\n    browserEnviromentDefaultBinding() {\r\n        // 鼠标事件\r\n        document.addEventListener('mousedown', (e: MouseEvent) => {\r\n            if (e.button === 0) { // 鼠标左键绑定开火状态\r\n                UserInputEvent.detail.enum = UserInputEventEnum.BUTTON_TRIGGLE_DOWN;\r\n                UserInputEventPipe.dispatchEvent(UserInputEvent);\r\n            }\r\n        })\r\n        document.addEventListener('mouseup', (e: MouseEvent) => {\r\n            if (e.button === 0) { // 鼠标左键绑定开火状态\r\n                UserInputEvent.detail.enum = UserInputEventEnum.BUTTON_TRIGGLE_UP;\r\n                UserInputEventPipe.dispatchEvent(UserInputEvent);\r\n            }\r\n        })\r\n\r\n        // 键盘事件\r\n        document.addEventListener('keydown', (e: KeyboardEvent) => {\r\n            switch (e.code) {\r\n                case 'KeyR': // 换子弹\r\n                    UserInputEvent.detail.enum = UserInputEventEnum.BUTTON_RELOAD;\r\n                    UserInputEventPipe.dispatchEvent(UserInputEvent);\r\n                    break;\r\n\r\n                case 'Digit1': // 物品切换\r\n                    UserInputEvent.detail.enum = UserInputEventEnum.BUTTON_SWITCH_PRIMARY_WEAPON;\r\n                    UserInputEventPipe.dispatchEvent(UserInputEvent);\r\n                    break;\r\n                case 'Digit2':\r\n                    UserInputEvent.detail.enum = UserInputEventEnum.BUTTON_SWITCH_SECONDARY_WEAPON;\r\n                    UserInputEventPipe.dispatchEvent(UserInputEvent);\r\n                    break;\r\n                case 'Digit3':\r\n                    UserInputEvent.detail.enum = UserInputEventEnum.BUTTON_SWITCH_MALEE_WEAPON;\r\n                    UserInputEventPipe.dispatchEvent(UserInputEvent);\r\n                    break;\r\n                case 'KeyQ':\r\n                    UserInputEvent.detail.enum = UserInputEventEnum.BUTTON_SWITCH_LAST_WEAPON;\r\n                    UserInputEventPipe.dispatchEvent(UserInputEvent);\r\n                    break;\r\n\r\n                case 'KeyW': // 玩家移动\r\n                    UserInputEvent.detail.enum = UserInputEventEnum.MOVE_FORWARD_DOWN;\r\n                    UserInputEventPipe.dispatchEvent(UserInputEvent);\r\n                    break;\r\n                case 'KeyA':\r\n                    UserInputEvent.detail.enum = UserInputEventEnum.MOVE_LEFT_DOWN;\r\n                    UserInputEventPipe.dispatchEvent(UserInputEvent);\r\n                    break;\r\n                case 'KeyS':\r\n                    UserInputEvent.detail.enum = UserInputEventEnum.MOVE_BACKWARD_DOWN;\r\n                    UserInputEventPipe.dispatchEvent(UserInputEvent);\r\n                    break;\r\n                case 'KeyD':\r\n                    UserInputEvent.detail.enum = UserInputEventEnum.MOVE_RIGHT_DOWN;\r\n                    UserInputEventPipe.dispatchEvent(UserInputEvent);\r\n                    break;\r\n                case 'Space': // 跳跃\r\n                    UserInputEvent.detail.enum = UserInputEventEnum.JUMP;\r\n                    UserInputEventPipe.dispatchEvent(UserInputEvent);\r\n                    break;\r\n\r\n            }\r\n\r\n        })\r\n        document.addEventListener('keyup', (e: KeyboardEvent) => {\r\n            switch (e.code) {\r\n                case 'KeyW':\r\n                    UserInputEvent.detail.enum = UserInputEventEnum.MOVE_FORWARD_UP;\r\n                    UserInputEventPipe.dispatchEvent(UserInputEvent);\r\n                    break;\r\n                case 'KeyA':\r\n                    UserInputEvent.detail.enum = UserInputEventEnum.MOVE_LEFT_UP;\r\n                    UserInputEventPipe.dispatchEvent(UserInputEvent);\r\n                    break;\r\n                case 'KeyS':\r\n                    UserInputEvent.detail.enum = UserInputEventEnum.MOVE_BACKWARD_UP;\r\n                    UserInputEventPipe.dispatchEvent(UserInputEvent);\r\n                    break;\r\n                case 'KeyD':\r\n                    UserInputEvent.detail.enum = UserInputEventEnum.MOVE_RIGHT_UP;\r\n                    UserInputEventPipe.dispatchEvent(UserInputEvent);\r\n                    break;\r\n            }\r\n        })\r\n    }\r\n\r\n}","import { WeaponClassificationEnum } from './WeaponClassificationEnum';\r\n\r\n/**\r\n * 物品栏类型\r\n */\r\nexport enum InventorySlotEnum {\r\n    Hands, // 空手\r\n    Primary, // 主武器\r\n    Secondary, // 副武器\r\n    Malee, // 匕首\r\n}\r\n\r\n\r\n/**\r\n * 判断对应的武器分类类型属于的武器槽位\r\n * @param weaponClassificationEnum : 武器分类类型\r\n * @returns :Inventory 武器槽位\r\n */\r\nexport function mapIventorySlotByWeaponClassficationEnum(weaponClassificationEnum: WeaponClassificationEnum): InventorySlotEnum {\r\n    switch (weaponClassificationEnum) {\r\n        case WeaponClassificationEnum.Rifle:\r\n            return InventorySlotEnum.Primary;\r\n        case WeaponClassificationEnum.SniperRifle:\r\n            return InventorySlotEnum.Primary;\r\n        case WeaponClassificationEnum.Pistol:\r\n            return InventorySlotEnum.Secondary;\r\n        case WeaponClassificationEnum.Malee:\r\n            return InventorySlotEnum.Malee;\r\n        case WeaponClassificationEnum.SMG:\r\n            return InventorySlotEnum.Primary;\r\n        case WeaponClassificationEnum.Shotgun:\r\n            return InventorySlotEnum.Primary;\r\n        case WeaponClassificationEnum.Machinegun:\r\n            return InventorySlotEnum.Primary;\r\n    }\r\n}","\r\nimport { WeaponInterface } from '../weapon/abstract/WeaponInterface';\r\nimport { InventorySlotEnum, mapIventorySlotByWeaponClassficationEnum } from '../abstract/InventorySlotEnum';\r\nimport { CycleInterface } from '../../core/inferface/CycleInterface';\r\nimport { LoopInterface } from '../../core/inferface/LoopInterface';\r\nimport { UserInputEvent, UserInputEventPipe } from '../pipes/UserinputEventPipe';\r\nimport { UserInputEventEnum, WeaponAnimationEventEnum } from '../abstract/EventsEnum';\r\nimport { AnimationEventPipe, WeaponAnimationEvent } from '../pipes/AnimationEventPipe';\r\nimport { GameLogicEventPipe, WeaponEquipEvent } from '../pipes/GameLogicEventPipe';\r\n\r\n\r\n/**\r\n * 物品栏系统\r\n */\r\nexport class InventorySystem implements CycleInterface, LoopInterface {\r\n\r\n    weapons: Map<InventorySlotEnum, WeaponInterface> = new Map<InventorySlotEnum, WeaponInterface>(); // 武器列表,存储玩家当前所持有的所有武器\r\n    nowEquipInventory: InventorySlotEnum = InventorySlotEnum.Hands; // 当前装备的武器\r\n    lastEquipInventory: InventorySlotEnum = InventorySlotEnum.Malee; // 上一个装备的武器, 初始化时切换到匕首武器\r\n\r\n    init(): void {\r\n        this.weapons.set(InventorySlotEnum.Hands, null); // 初始化武器为空武器\r\n        this.switchEquipment(InventorySlotEnum.Hands); // 装备武器 \r\n        UserInputEventPipe.addEventListener(UserInputEvent.type, (e: CustomEvent) => { // 玩家按键事件影响\r\n            switch (e.detail.enum) { // 物品栏切换\r\n                case UserInputEventEnum.BUTTON_SWITCH_PRIMARY_WEAPON: // 主武器\r\n                    this.switchEquipment(InventorySlotEnum.Primary);\r\n                    break;\r\n                case UserInputEventEnum.BUTTON_SWITCH_SECONDARY_WEAPON: // 副武器\r\n                    this.switchEquipment(InventorySlotEnum.Secondary);\r\n                    break;\r\n                case UserInputEventEnum.BUTTON_SWITCH_MALEE_WEAPON: // 匕首\r\n                    this.switchEquipment(InventorySlotEnum.Malee);\r\n                    break;\r\n                case UserInputEventEnum.BUTTON_SWITCH_LAST_WEAPON: // 上一次装备武器\r\n                    this.switchEquipment(this.lastEquipInventory);\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n\r\n    callEveryFrame(deltaTime?: number, elapsedTime?: number): void {\r\n        // 准星恢复 必须和callEveryFrame分开计算 因为切枪后也会准星恢复\r\n        this.weapons.forEach(weapon => { if (weapon && weapon.recover) weapon.recover(deltaTime, elapsedTime) });\r\n\r\n        const nowEquipWeapon = this.weapons.get(this.nowEquipInventory);\r\n        if (!nowEquipWeapon) return; // 如果当前没有装备任何武器那么就退出循环方法\r\n        if (nowEquipWeapon.callEveryFrame) nowEquipWeapon.callEveryFrame(deltaTime, elapsedTime); // 当前装备的武器激活帧计算方法\r\n    }\r\n\r\n    /**\r\n     * 切换到目标武器\r\n     * @param inventory 目标武器栏位\r\n     */\r\n    switchEquipment(targetInventory: InventorySlotEnum) {\r\n        const nowEquipInventory = this.nowEquipInventory;\r\n        if (nowEquipInventory !== targetInventory) { // 目前装备武器不和切换目标武器一样才执行动作\r\n            // 发出解除旧武器的事件\r\n            WeaponAnimationEvent.detail.enum = WeaponAnimationEventEnum.RELIEVE_EQUIP;\r\n            if (this.weapons.get(nowEquipInventory)) WeaponAnimationEvent.detail.weaponInstance = this.weapons.get(nowEquipInventory);\r\n            AnimationEventPipe.dispatchEvent(WeaponAnimationEvent);\r\n\r\n            // 发出装备新武器的事件\r\n            WeaponAnimationEvent.detail.enum = WeaponAnimationEventEnum.EQUIP;\r\n            if (this.weapons.get(targetInventory)) WeaponAnimationEvent.detail.weaponInstance = this.weapons.get(targetInventory);\r\n            AnimationEventPipe.dispatchEvent(WeaponAnimationEvent); // 武器系统层\r\n\r\n            WeaponEquipEvent.detail.weaponInstance = this.weapons.get(targetInventory);\r\n            GameLogicEventPipe.dispatchEvent(WeaponEquipEvent); // 渲染层\r\n\r\n            this.nowEquipInventory = targetInventory;\r\n            this.lastEquipInventory = nowEquipInventory;\r\n        }\r\n    }\r\n\r\n    /** \r\n     * 从地面捡起武器 \r\n     */\r\n    pickUpWeapon(weaponInstance: WeaponInterface) {\r\n        const belongInventory = mapIventorySlotByWeaponClassficationEnum(weaponInstance.weaponClassificationEnum); // 判断武器应该属于哪个槽位\r\n        if (!this.weapons.get(belongInventory)) this.weapons.set(belongInventory, weaponInstance); // 如果当前武器栏位为空, 那么就将武器捡起\r\n    }\r\n\r\n}","import { GameContext } from \"@src/core/GameContext\";\r\nimport { CycleInterface } from '@src/core/inferface/CycleInterface';\r\nimport { DomEventPipe, PointLockEvent } from '@src/gameplay/pipes/DomEventPipe';\r\nimport { PointLockEventEnum } from '@src/gameplay/abstract/EventsEnum';\r\n\r\nconst mouseConfig = { // 鼠标参数配置\r\n    dpi: 1000,\r\n    mouseSensitivity: 0.5\r\n}\r\n\r\nconst _PI_2 = Math.PI / 2; // PI/2\r\n\r\n/**\r\n * FPS 相机控制类\r\n * 改变相机轴序'YXZ'; Y轴Yaw,左y+,右y-; X轴Pitch,上x+,下x-\r\n */\r\nexport class FPSCameraController extends EventTarget implements CycleInterface {\r\n\r\n    domElement: HTMLElement;\r\n    camera: THREE.Camera;\r\n\r\n    init(): void {\r\n\r\n        this.camera = GameContext.Cameras.PlayerCamera;\r\n\r\n        // 轴向使用YXZ主要有下面的好处 ThreeJscamera是Yup的,因此YXZ第一个值代表着水平运动契合screenCoord的XY坐标\r\n\r\n        this.camera.rotation.order = 'YXZ';\r\n\r\n        this.domElement = GameContext.GameView.Container;\r\n\r\n        const scope = this;\r\n\r\n        DomEventPipe.addEventListener(PointLockEvent.type, function (e: CustomEvent) {\r\n            switch (e.detail.enum) {\r\n                case PointLockEventEnum.MOUSEMOVE:\r\n                    const { dpi, mouseSensitivity } = mouseConfig; // 计算参数\r\n\r\n                    // 屏幕两轴右下角为正方向\r\n                    const screenTrasformX = e.detail.movementX / dpi * mouseSensitivity; // 屏幕横坐标\r\n                    const screenTrasformY = e.detail.movementY / dpi * mouseSensitivity; // 屏幕纵坐标\r\n\r\n                    // 改变相机位置\r\n                    scope.camera.rotation.y = scope.camera.rotation.y - screenTrasformX;\r\n                    scope.camera.rotation.x = Math.max(_PI_2 - Math.PI, Math.min(_PI_2 - 0, scope.camera.rotation.x - screenTrasformY));\r\n                    break;\r\n\r\n            }\r\n\r\n        })\r\n\r\n    }\r\n\r\n}","\r\nimport { Capsule } from \"three/examples/jsm/math/Capsule\";\r\nimport { Octree } from \"three/examples/jsm/math/Octree\";\r\nimport { GameContext } from '@src/core/GameContext';\r\nimport { CycleInterface } from '@src/core/inferface/CycleInterface';\r\nimport { LoopInterface } from '@src/core/inferface/LoopInterface';\r\nimport { UserInputEventEnum } from '@src/gameplay/abstract/EventsEnum';\r\nimport { UserInputEvent, UserInputEventPipe } from '@src/gameplay/pipes/UserinputEventPipe';\r\nimport { Vector3 } from 'three';\r\n\r\nconst STEPS_PER_FRAME = 5;\r\nconst GRAVITY = 30;\r\nconst vec3Util = new Vector3();\r\n\r\nconst config = {\r\n    groundControlFactor: 20.,\r\n    airControlFactor: 5.,\r\n    dampFactor: -10.,\r\n    movespeedFactor: 2.4\r\n}\r\n\r\n/**\r\n * 移动控制器, 根据输入映射控制玩家的移动\r\n */\r\nexport class MovementController implements CycleInterface, LoopInterface {\r\n\r\n    playerOctree: Octree = GameContext.Physical.WorldOCTree; // 用于检测玩家碰撞场景的OCTree\r\n    playerCamera: THREE.Camera; // 玩家相机\r\n    playerCollider: Capsule; // 玩家碰撞模型\r\n\r\n    playerOnFloor: boolean = true;\r\n    keyStates: Map<UserInputEventEnum, boolean> = new Map();\r\n\r\n    playerVelocity: THREE.Vector3 = new Vector3(); // 玩家速度\r\n    playerDirection: THREE.Vector3 = new Vector3(); // 玩家键盘运动方向\r\n\r\n    init(): void {\r\n\r\n        this.playerOctree = GameContext.Physical.WorldOCTree;\r\n        this.playerCamera = GameContext.Cameras.PlayerCamera;\r\n        this.playerCollider = new Capsule(new Vector3(0, 0.35, 0), new Vector3(0, 1.45, 0), 0.35);\r\n\r\n        UserInputEventPipe.addEventListener(UserInputEvent.type, (e: CustomEvent) => {\r\n            switch (e.detail.enum) {\r\n                case UserInputEventEnum.MOVE_FORWARD_DOWN:\r\n                    this.keyStates.set(UserInputEventEnum.MOVE_FORWARD_DOWN, true);\r\n                    break;\r\n                case UserInputEventEnum.MOVE_BACKWARD_DOWN:\r\n                    this.keyStates.set(UserInputEventEnum.MOVE_BACKWARD_DOWN, true);\r\n                    break;\r\n                case UserInputEventEnum.MOVE_LEFT_DOWN:\r\n                    this.keyStates.set(UserInputEventEnum.MOVE_LEFT_DOWN, true);\r\n                    break;\r\n                case UserInputEventEnum.MOVE_RIGHT_DOWN:\r\n                    this.keyStates.set(UserInputEventEnum.MOVE_RIGHT_DOWN, true);\r\n                    break;\r\n                case UserInputEventEnum.MOVE_FORWARD_UP:\r\n                    this.keyStates.set(UserInputEventEnum.MOVE_FORWARD_DOWN, false);\r\n                    break;\r\n                case UserInputEventEnum.MOVE_BACKWARD_UP:\r\n                    this.keyStates.set(UserInputEventEnum.MOVE_BACKWARD_DOWN, false);\r\n                    break;\r\n                case UserInputEventEnum.MOVE_LEFT_UP:\r\n                    this.keyStates.set(UserInputEventEnum.MOVE_LEFT_DOWN, false);\r\n                    break;\r\n                case UserInputEventEnum.MOVE_RIGHT_UP:\r\n                    this.keyStates.set(UserInputEventEnum.MOVE_RIGHT_DOWN, false);\r\n                    break;\r\n                case UserInputEventEnum.JUMP: // 跳跃\r\n                    this.jump();\r\n                    break;\r\n            }\r\n\r\n        })\r\n\r\n    }\r\n\r\n    callEveryFrame(deltaTime?: number, elapsedTime?: number): void {\r\n        const dt = Math.min(0.05, deltaTime) / STEPS_PER_FRAME; // 最小deltaTime\r\n        for (let i = 0; i < STEPS_PER_FRAME; i++) { // 在cpu中多次计算, 以免出现速度过快穿墙的问题\r\n            this.controls(dt); // 接受控制器输入控制身体方向\r\n            this.updatePlayer(dt); // 更新玩家位置\r\n            this.teleportPlayerIfOob(); // 检测玩家是否出了地图\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 身体方向控制\r\n     * @param deltaTime 帧间隔时间 \r\n     */\r\n    controls(deltaTime: number): void {\r\n        const airControlFactor = deltaTime * (this.playerOnFloor ? config.groundControlFactor : config.airControlFactor); // 在空中只有一点点的身体控制\r\n        this.playerDirection.set(0, 0, 0);\r\n        if (this.playerOnFloor) {\r\n            if (this.keyStates.get(UserInputEventEnum.MOVE_FORWARD_DOWN))\r\n                this.playerDirection.add(this.getForwardVector().normalize());\r\n            if (this.keyStates.get(UserInputEventEnum.MOVE_BACKWARD_DOWN))\r\n                this.playerDirection.add(this.getForwardVector().normalize().multiplyScalar(-1));\r\n            if (this.keyStates.get(UserInputEventEnum.MOVE_LEFT_DOWN))\r\n                this.playerDirection.add(this.getSideVector().normalize().multiplyScalar(-1));\r\n            if (this.keyStates.get(UserInputEventEnum.MOVE_RIGHT_DOWN))\r\n                this.playerDirection.add(this.getSideVector().normalize());\r\n            if (this.playerDirection.lengthSq() > 1.)\r\n                this.playerDirection.normalize(); // 方向向量\r\n        }\r\n        this.playerVelocity.add(this.playerDirection.multiplyScalar(airControlFactor * config.movespeedFactor));\r\n    }\r\n\r\n    /**\r\n     * 碰撞检测玩家位置\r\n     * @param deltaTime 帧间隔时间\r\n     */\r\n    updatePlayer(deltaTime: number) {\r\n\r\n        // 对数 e^x\r\n        let damping = Math.exp(config.dampFactor * deltaTime) - 1;\r\n\r\n        if (!this.playerOnFloor) {\r\n            this.playerVelocity.y -= GRAVITY * deltaTime;\r\n            damping *= 0.1; // small air resistance\r\n        }\r\n\r\n        this.playerVelocity.addScaledVector(this.playerVelocity, damping);\r\n        const deltaPosition = this.playerVelocity.clone().multiplyScalar(deltaTime);\r\n        this.playerCollider.translate(deltaPosition);\r\n        const result = this.playerOctree.capsuleIntersect(this.playerCollider);\r\n        this.playerOnFloor = false;\r\n        if (result) {\r\n            this.playerOnFloor = result.normal.y > 0;\r\n            if (!this.playerOnFloor) this.playerVelocity.addScaledVector(result.normal, - result.normal.dot(this.playerVelocity));\r\n            this.playerCollider.translate(result.normal.multiplyScalar(result.depth));\r\n        }\r\n        this.playerCamera.position.copy(this.playerCollider.end);\r\n\r\n    }\r\n\r\n    /**\r\n     * 检测玩家是否跳出地图\r\n     */\r\n    teleportPlayerIfOob() {\r\n        if (this.playerCamera.position.y <= -25) {\r\n            this.playerCollider.start.set(0, 0.35, 0);\r\n            this.playerCollider.end.set(0, 1, 0);\r\n            this.playerCollider.radius = 0.35;\r\n            this.playerCamera.position.copy(this.playerCollider.end);\r\n            this.playerCamera.rotation.set(0, 0, 0);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取相机正向的方向\r\n     * @returns THREE.Vector3 正向方向\r\n     */\r\n    getForwardVector() {\r\n        this.playerCamera.getWorldDirection(vec3Util);\r\n        vec3Util.y = 0;\r\n        vec3Util.normalize();\r\n        return vec3Util;\r\n    }\r\n\r\n    /**\r\n     * 获取相机侧向的方向\r\n     * @returns THREE.Vector3 侧向方向\r\n     */\r\n    getSideVector() {\r\n        this.playerCamera.getWorldDirection(vec3Util);\r\n        vec3Util.y = 0;\r\n        vec3Util.normalize();\r\n        vec3Util.cross(this.playerCamera.up);\r\n        return vec3Util;\r\n    }\r\n\r\n    /**\r\n     * 跳跃\r\n     */\r\n    jump() {\r\n        if (this.playerOnFloor) { this.playerVelocity.y = 8; }\r\n    }\r\n\r\n}","\r\nimport { AK47 } from \"../weapon/instances/AK47\";\r\nimport { USP } from \"../weapon/instances/USP\";\r\nimport { M9 } from \"../weapon/instances/M9\";\r\nimport { LoopInterface } from '../../core/inferface/LoopInterface';\r\nimport { UserInputSystem } from '../input/UserInputSystem';\r\nimport { WeaponSystem } from '../weapon/WeaponSystem';\r\nimport { InventorySystem } from '../Inventory/InventorySystem';\r\nimport { FPSCameraController } from '../input/controllers/FPSCameraController';\r\nimport { MovementController } from '../input/controllers/MovementController';\r\nimport { GameContext } from '../../core/GameContext';\r\nimport { InventorySlotEnum } from '../abstract/InventorySlotEnum';\r\nimport { dealWithRoleMaterial, dealWithRoleTexture } from '@src/core/lib/threejs_common';\r\nimport { CycleInterface } from '../../core/inferface/CycleInterface';\r\nimport { MeshBasicMaterial } from 'three';\r\n\r\nconst roleTexture = GameContext.GameResources.textureLoader.load('/role/role.TF2.heavy.png');\r\ndealWithRoleTexture(roleTexture);\r\nconst roleMaterial = new MeshBasicMaterial({ map: roleTexture });\r\ndealWithRoleMaterial(roleMaterial);\r\n\r\n/**\r\n * 本地玩家\r\n */\r\nexport class LocalPlayer implements CycleInterface, LoopInterface {\r\n\r\n    private static localPlayerInstance: LocalPlayer;\r\n    private constructor() { }\r\n    public static getInstance(): LocalPlayer {\r\n        if (!this.localPlayerInstance) this.localPlayerInstance = new LocalPlayer();\r\n        return this.localPlayerInstance;\r\n    }\r\n\r\n    init() {\r\n        // 用户输入系统\r\n        this.userInputSystem = new UserInputSystem();\r\n        this.weaponSystem = WeaponSystem.getInstance(); // 武器系统\r\n\r\n        this.cameraController = new FPSCameraController(); // 相机控制器\r\n        this.cameraController.init();\r\n        this.movementController = new MovementController(); // 移动控制器\r\n        this.movementController.init();\r\n        this.inventorySystem = new InventorySystem(); // 物品栏\r\n        this.inventorySystem.init();\r\n\r\n        // 枪械初始化\r\n        const ak47 = new AK47(); // 生成一把AK\r\n        this.inventorySystem.pickUpWeapon(ak47); // 捡起AK\r\n        const usp = new USP(); // 生成USP\r\n        this.inventorySystem.pickUpWeapon(usp); // 捡起USP\r\n        const m9 = new M9(); // 生成USP\r\n        this.inventorySystem.pickUpWeapon(m9); // 捡起USP\r\n\r\n        // 装备主武器\r\n        this.inventorySystem.switchEquipment(InventorySlotEnum.Primary);\r\n    }\r\n\r\n    userInputSystem: UserInputSystem; // 处理输入事件\r\n    inventorySystem: InventorySystem; // 处理物品栏信息\r\n    weaponSystem: WeaponSystem; // 处理武器信息(弹道计算,落点计算,武器动画)\r\n\r\n    cameraController: FPSCameraController; // 相机控制器\r\n    movementController: MovementController; // 位移控制器\r\n\r\n    roleMaterial: THREE.Material = roleMaterial; // 玩家网格当前的材质(角色)\r\n\r\n    callEveryFrame(deltaTime?: number, elapsedTime?: number): void {\r\n        this.movementController.callEveryFrame(deltaTime, elapsedTime);\r\n        this.inventorySystem.callEveryFrame(deltaTime, elapsedTime);\r\n    }\r\n\r\n}","var Stats = function () {\n\n\tvar mode = 0;\n\n\tvar container = document.createElement( 'div' );\n\tcontainer.style.cssText = 'position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000';\n\tcontainer.addEventListener( 'click', function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tshowPanel( ++ mode % container.children.length );\n\n\t}, false );\n\n\t//\n\n\tfunction addPanel( panel ) {\n\n\t\tcontainer.appendChild( panel.dom );\n\t\treturn panel;\n\n\t}\n\n\tfunction showPanel( id ) {\n\n\t\tfor ( var i = 0; i < container.children.length; i ++ ) {\n\n\t\t\tcontainer.children[ i ].style.display = i === id ? 'block' : 'none';\n\n\t\t}\n\n\t\tmode = id;\n\n\t}\n\n\t//\n\n\tvar beginTime = ( performance || Date ).now(), prevTime = beginTime, frames = 0;\n\n\tvar fpsPanel = addPanel( new Stats.Panel( 'FPS', '#0ff', '#002' ) );\n\tvar msPanel = addPanel( new Stats.Panel( 'MS', '#0f0', '#020' ) );\n\n\tif ( self.performance && self.performance.memory ) {\n\n\t\tvar memPanel = addPanel( new Stats.Panel( 'MB', '#f08', '#201' ) );\n\n\t}\n\n\tshowPanel( 0 );\n\n\treturn {\n\n\t\tREVISION: 16,\n\n\t\tdom: container,\n\n\t\taddPanel: addPanel,\n\t\tshowPanel: showPanel,\n\n\t\tbegin: function () {\n\n\t\t\tbeginTime = ( performance || Date ).now();\n\n\t\t},\n\n\t\tend: function () {\n\n\t\t\tframes ++;\n\n\t\t\tvar time = ( performance || Date ).now();\n\n\t\t\tmsPanel.update( time - beginTime, 200 );\n\n\t\t\tif ( time >= prevTime + 1000 ) {\n\n\t\t\t\tfpsPanel.update( ( frames * 1000 ) / ( time - prevTime ), 100 );\n\n\t\t\t\tprevTime = time;\n\t\t\t\tframes = 0;\n\n\t\t\t\tif ( memPanel ) {\n\n\t\t\t\t\tvar memory = performance.memory;\n\t\t\t\t\tmemPanel.update( memory.usedJSHeapSize / 1048576, memory.jsHeapSizeLimit / 1048576 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn time;\n\n\t\t},\n\n\t\tupdate: function () {\n\n\t\t\tbeginTime = this.end();\n\n\t\t},\n\n\t\t// Backwards Compatibility\n\n\t\tdomElement: container,\n\t\tsetMode: showPanel\n\n\t};\n\n};\n\nStats.Panel = function ( name, fg, bg ) {\n\n\tvar min = Infinity, max = 0, round = Math.round;\n\tvar PR = round( window.devicePixelRatio || 1 );\n\n\tvar WIDTH = 80 * PR, HEIGHT = 48 * PR,\n\t\tTEXT_X = 3 * PR, TEXT_Y = 2 * PR,\n\t\tGRAPH_X = 3 * PR, GRAPH_Y = 15 * PR,\n\t\tGRAPH_WIDTH = 74 * PR, GRAPH_HEIGHT = 30 * PR;\n\n\tvar canvas = document.createElement( 'canvas' );\n\tcanvas.width = WIDTH;\n\tcanvas.height = HEIGHT;\n\tcanvas.style.cssText = 'width:80px;height:48px';\n\n\tvar context = canvas.getContext( '2d' );\n\tcontext.font = 'bold ' + ( 9 * PR ) + 'px Helvetica,Arial,sans-serif';\n\tcontext.textBaseline = 'top';\n\n\tcontext.fillStyle = bg;\n\tcontext.fillRect( 0, 0, WIDTH, HEIGHT );\n\n\tcontext.fillStyle = fg;\n\tcontext.fillText( name, TEXT_X, TEXT_Y );\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\tcontext.fillStyle = bg;\n\tcontext.globalAlpha = 0.9;\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\treturn {\n\n\t\tdom: canvas,\n\n\t\tupdate: function ( value, maxValue ) {\n\n\t\t\tmin = Math.min( min, value );\n\t\t\tmax = Math.max( max, value );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 1;\n\t\t\tcontext.fillRect( 0, 0, WIDTH, GRAPH_Y );\n\t\t\tcontext.fillStyle = fg;\n\t\t\tcontext.fillText( round( value ) + ' ' + name + ' (' + round( min ) + '-' + round( max ) + ')', TEXT_X, TEXT_Y );\n\n\t\t\tcontext.drawImage( canvas, GRAPH_X + PR, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT, GRAPH_X, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 0.9;\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, round( ( 1 - ( value / maxValue ) ) * GRAPH_HEIGHT ) );\n\n\t\t}\n\n\t};\n\n};\n\nexport default Stats;\n","import { GameContext } from '@src/core/GameContext';\r\n\r\nimport Stats from 'three/examples/jsm/libs/stats.module';\r\nimport { DomEventPipe, PointLockEvent } from '../gameplay/pipes/DomEventPipe';\r\nimport { CycleInterface } from '../core/inferface/CycleInterface';\r\nimport { LoopInterface } from '../core/inferface/LoopInterface';\r\nimport { PointLockEventEnum } from '../gameplay/abstract/EventsEnum';\r\n\r\n\r\n/**\r\n * Dom元素的交互层, 控制是否在网页中显示webgl输出, 以及UI事件接口\r\n */\r\nexport class DOMLayer extends EventTarget implements CycleInterface, LoopInterface {\r\n    stats: Stats = Stats();\r\n\r\n    init(): void {\r\n\r\n        // 游戏提示和指导\r\n        const blocker = document.createElement('div');\r\n        blocker.id = 'blocker';\r\n        const instructions = document.createElement('div');\r\n        instructions.id = 'instructions'\r\n        const tip1 = document.createElement('p');\r\n        tip1.innerHTML = 'CLICK TO PLAY';\r\n        instructions.appendChild(tip1);\r\n        blocker.appendChild(instructions);\r\n        GameContext.GameView.Container.appendChild(blocker);\r\n\r\n        // 将渲染器出图挂载到页面容器上\r\n        GameContext.GameView.Container.appendChild(GameContext.GameView.Renderer.domElement);\r\n\r\n        // PointLock事件\r\n        GameContext.PointLock.pointLockListen();\r\n        instructions.addEventListener('click', () => { if (!GameContext.PointLock.isLocked) GameContext.PointLock.lock(); });\r\n        DomEventPipe.addEventListener(PointLockEvent.type, (e: CustomEvent) => { // 通过事件通道接收事件\r\n            switch (e.detail.enum) {\r\n                case PointLockEventEnum.LOCK: // 锁定事件\r\n                    instructions.style.display = 'none';\r\n                    blocker.style.display = 'none';\r\n                    break;\r\n                case PointLockEventEnum.UNLOCK: // 解锁事件\r\n                    blocker.style.display = 'block';\r\n                    instructions.style.display = '';\r\n                    break;\r\n            }\r\n        });\r\n        GameContext.GameView.Container.appendChild(this.stats.dom);\r\n    }\r\n\r\n    callEveryFrame(deltaTime?: number, elapsedTime?: number): void {\r\n        this.stats.update();\r\n    }\r\n\r\n}","import {\n\tVector2\n} from 'three';\n\n/**\n * NVIDIA FXAA by Timothy Lottes\n * https://developer.download.nvidia.com/assets/gamedev/files/sdk/11/FXAA_WhitePaper.pdf\n * - WebGL port by @supereggbert\n * http://www.glge.org/demos/fxaa/\n * Further improved by Daniel Sturk\n */\n\nconst FXAAShader = {\n\n\tuniforms: {\n\n\t\t'tDiffuse': { value: null },\n\t\t'resolution': { value: new Vector2( 1 / 1024, 1 / 512 ) }\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader: `\n\tprecision highp float;\n\n\tuniform sampler2D tDiffuse;\n\n\tuniform vec2 resolution;\n\n\tvarying vec2 vUv;\n\n\t// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)\n\n\t//----------------------------------------------------------------------------------\n\t// File:        es3-kepler\\FXAA\\assets\\shaders/FXAA_DefaultES.frag\n\t// SDK Version: v3.00\n\t// Email:       gameworks@nvidia.com\n\t// Site:        http://developer.nvidia.com/\n\t//\n\t// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n\t//\n\t// Redistribution and use in source and binary forms, with or without\n\t// modification, are permitted provided that the following conditions\n\t// are met:\n\t//  * Redistributions of source code must retain the above copyright\n\t//    notice, this list of conditions and the following disclaimer.\n\t//  * Redistributions in binary form must reproduce the above copyright\n\t//    notice, this list of conditions and the following disclaimer in the\n\t//    documentation and/or other materials provided with the distribution.\n\t//  * Neither the name of NVIDIA CORPORATION nor the names of its\n\t//    contributors may be used to endorse or promote products derived\n\t//    from this software without specific prior written permission.\n\t//\n\t// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY\n\t// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n\t// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n\t// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n\t// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n\t// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n\t// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n\t// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n\t// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n\t// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n\t// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\t//\n\t//----------------------------------------------------------------------------------\n\n\t#ifndef FXAA_DISCARD\n\t\t\t//\n\t\t\t// Only valid for PC OpenGL currently.\n\t\t\t// Probably will not work when FXAA_GREEN_AS_LUMA = 1.\n\t\t\t//\n\t\t\t// 1 = Use discard on pixels which don't need AA.\n\t\t\t//     For APIs which enable concurrent TEX+ROP from same surface.\n\t\t\t// 0 = Return unchanged color on pixels which don't need AA.\n\t\t\t//\n\t\t\t#define FXAA_DISCARD 0\n\t#endif\n\n\t/*--------------------------------------------------------------------------*/\n\t#define FxaaTexTop(t, p) texture2D(t, p, -100.0)\n\t#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), -100.0)\n\t/*--------------------------------------------------------------------------*/\n\n\t#define NUM_SAMPLES 5\n\n\t// assumes colors have premultipliedAlpha, so that the calculated color contrast is scaled by alpha\n\tfloat contrast( vec4 a, vec4 b ) {\n\t\t\tvec4 diff = abs( a - b );\n\t\t\treturn max( max( max( diff.r, diff.g ), diff.b ), diff.a );\n\t}\n\n\t/*============================================================================\n\n\t\t\t\t\t\t\t\t\tFXAA3 QUALITY - PC\n\n\t============================================================================*/\n\n\t/*--------------------------------------------------------------------------*/\n\tvec4 FxaaPixelShader(\n\t\t\tvec2 posM,\n\t\t\tsampler2D tex,\n\t\t\tvec2 fxaaQualityRcpFrame,\n\t\t\tfloat fxaaQualityEdgeThreshold,\n\t\t\tfloat fxaaQualityinvEdgeThreshold\n\t) {\n\t\t\tvec4 rgbaM = FxaaTexTop(tex, posM);\n\t\t\tvec4 rgbaS = FxaaTexOff(tex, posM, vec2( 0.0, 1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaE = FxaaTexOff(tex, posM, vec2( 1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaN = FxaaTexOff(tex, posM, vec2( 0.0,-1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaW = FxaaTexOff(tex, posM, vec2(-1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\t// . S .\n\t\t\t// W M E\n\t\t\t// . N .\n\n\t\t\tbool earlyExit = max( max( max(\n\t\t\t\t\tcontrast( rgbaM, rgbaN ),\n\t\t\t\t\tcontrast( rgbaM, rgbaS ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaE ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaW ) )\n\t\t\t\t\t< fxaaQualityEdgeThreshold;\n\t\t\t// . 0 .\n\t\t\t// 0 0 0\n\t\t\t// . 0 .\n\n\t\t\t#if (FXAA_DISCARD == 1)\n\t\t\t\t\tif(earlyExit) FxaaDiscard;\n\t\t\t#else\n\t\t\t\t\tif(earlyExit) return rgbaM;\n\t\t\t#endif\n\n\t\t\tfloat contrastN = contrast( rgbaM, rgbaN );\n\t\t\tfloat contrastS = contrast( rgbaM, rgbaS );\n\t\t\tfloat contrastE = contrast( rgbaM, rgbaE );\n\t\t\tfloat contrastW = contrast( rgbaM, rgbaW );\n\n\t\t\tfloat relativeVContrast = ( contrastN + contrastS ) - ( contrastE + contrastW );\n\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\tbool horzSpan = relativeVContrast > 0.;\n\t\t\t// . 1 .\n\t\t\t// 0 0 0\n\t\t\t// . 1 .\n\n\t\t\t// 45 deg edge detection and corners of objects, aka V/H contrast is too similar\n\t\t\tif( abs( relativeVContrast ) < .3 ) {\n\t\t\t\t\t// locate the edge\n\t\t\t\t\tvec2 dirToEdge;\n\t\t\t\t\tdirToEdge.x = contrastE > contrastW ? 1. : -1.;\n\t\t\t\t\tdirToEdge.y = contrastS > contrastN ? 1. : -1.;\n\t\t\t\t\t// . 2 .      . 1 .\n\t\t\t\t\t// 1 0 2  ~=  0 0 1\n\t\t\t\t\t// . 1 .      . 0 .\n\n\t\t\t\t\t// tap 2 pixels and see which ones are \"outside\" the edge, to\n\t\t\t\t\t// determine if the edge is vertical or horizontal\n\n\t\t\t\t\tvec4 rgbaAlongH = FxaaTexOff(tex, posM, vec2( dirToEdge.x, -dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\t\tfloat matchAlongH = contrast( rgbaM, rgbaAlongH );\n\t\t\t\t\t// . 1 .\n\t\t\t\t\t// 0 0 1\n\t\t\t\t\t// . 0 H\n\n\t\t\t\t\tvec4 rgbaAlongV = FxaaTexOff(tex, posM, vec2( -dirToEdge.x, dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\t\tfloat matchAlongV = contrast( rgbaM, rgbaAlongV );\n\t\t\t\t\t// V 1 .\n\t\t\t\t\t// 0 0 1\n\t\t\t\t\t// . 0 .\n\n\t\t\t\t\trelativeVContrast = matchAlongV - matchAlongH;\n\t\t\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\t\t\tif( abs( relativeVContrast ) < .3 ) { // 45 deg edge\n\t\t\t\t\t\t\t// 1 1 .\n\t\t\t\t\t\t\t// 0 0 1\n\t\t\t\t\t\t\t// . 0 1\n\n\t\t\t\t\t\t\t// do a simple blur\n\t\t\t\t\t\t\treturn mix(\n\t\t\t\t\t\t\t\t\trgbaM,\n\t\t\t\t\t\t\t\t\t(rgbaN + rgbaS + rgbaE + rgbaW) * .25,\n\t\t\t\t\t\t\t\t\t.4\n\t\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\thorzSpan = relativeVContrast > 0.;\n\t\t\t}\n\n\t\t\tif(!horzSpan) rgbaN = rgbaW;\n\t\t\tif(!horzSpan) rgbaS = rgbaE;\n\t\t\t// . 0 .      1\n\t\t\t// 1 0 1  ->  0\n\t\t\t// . 0 .      1\n\n\t\t\tbool pairN = contrast( rgbaM, rgbaN ) > contrast( rgbaM, rgbaS );\n\t\t\tif(!pairN) rgbaN = rgbaS;\n\n\t\t\tvec2 offNP;\n\t\t\toffNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n\t\t\toffNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n\n\t\t\tbool doneN = false;\n\t\t\tbool doneP = false;\n\n\t\t\tfloat nDist = 0.;\n\t\t\tfloat pDist = 0.;\n\n\t\t\tvec2 posN = posM;\n\t\t\tvec2 posP = posM;\n\n\t\t\tint iterationsUsed = 0;\n\t\t\tint iterationsUsedN = 0;\n\t\t\tint iterationsUsedP = 0;\n\t\t\tfor( int i = 0; i < NUM_SAMPLES; i++ ) {\n\t\t\t\t\titerationsUsed = i;\n\n\t\t\t\t\tfloat increment = float(i + 1);\n\n\t\t\t\t\tif(!doneN) {\n\t\t\t\t\t\t\tnDist += increment;\n\t\t\t\t\t\t\tposN = posM + offNP * nDist;\n\t\t\t\t\t\t\tvec4 rgbaEndN = FxaaTexTop(tex, posN.xy);\n\t\t\t\t\t\t\tdoneN = contrast( rgbaEndN, rgbaM ) > contrast( rgbaEndN, rgbaN );\n\t\t\t\t\t\t\titerationsUsedN = i;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!doneP) {\n\t\t\t\t\t\t\tpDist += increment;\n\t\t\t\t\t\t\tposP = posM - offNP * pDist;\n\t\t\t\t\t\t\tvec4 rgbaEndP = FxaaTexTop(tex, posP.xy);\n\t\t\t\t\t\t\tdoneP = contrast( rgbaEndP, rgbaM ) > contrast( rgbaEndP, rgbaN );\n\t\t\t\t\t\t\titerationsUsedP = i;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(doneN || doneP) break;\n\t\t\t}\n\n\n\t\t\tif ( !doneP && !doneN ) return rgbaM; // failed to find end of edge\n\n\t\t\tfloat dist = min(\n\t\t\t\t\tdoneN ? float( iterationsUsedN ) / float( NUM_SAMPLES - 1 ) : 1.,\n\t\t\t\t\tdoneP ? float( iterationsUsedP ) / float( NUM_SAMPLES - 1 ) : 1.\n\t\t\t);\n\n\t\t\t// hacky way of reduces blurriness of mostly diagonal edges\n\t\t\t// but reduces AA quality\n\t\t\tdist = pow(dist, .5);\n\n\t\t\tdist = 1. - dist;\n\n\t\t\treturn mix(\n\t\t\t\t\trgbaM,\n\t\t\t\t\trgbaN,\n\t\t\t\t\tdist * .5\n\t\t\t);\n\t}\n\n\tvoid main() {\n\t\t\tconst float edgeDetectionQuality = .2;\n\t\t\tconst float invEdgeDetectionQuality = 1. / edgeDetectionQuality;\n\n\t\t\tgl_FragColor = FxaaPixelShader(\n\t\t\t\t\tvUv,\n\t\t\t\t\ttDiffuse,\n\t\t\t\t\tresolution,\n\t\t\t\t\tedgeDetectionQuality, // [0,1] contrast needed, otherwise early discard\n\t\t\t\t\tinvEdgeDetectionQuality\n\t\t\t);\n\n\t}\n\t`\n\n};\n\nexport { FXAAShader };\n","\r\n\r\nimport { Vector2 } from 'three';\r\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass.js';\r\nimport { FXAAShader } from 'three/examples/jsm/shaders/FXAAShader.js';\r\nimport { GameContext } from '../core/GameContext';\r\nimport { CycleInterface } from '../core/inferface/CycleInterface';\r\nimport { LoopInterface } from '../core/inferface/LoopInterface';\r\n\r\n/**\r\n * WebGl输出画面\r\n */\r\nexport class GLViewportLayer implements CycleInterface, LoopInterface {\r\n\r\n    fxaaPass: ShaderPass = new ShaderPass(FXAAShader);\r\n    rendererSize: Vector2 = new Vector2();\r\n\r\n    init(): void {\r\n\r\n        GameContext.GameView.Renderer.autoClear = false;\r\n        GameContext.GameView.Renderer.autoClearDepth = false;\r\n        GameContext.GameView.Renderer.autoClearStencil = false;\r\n\r\n        // // FXAA(快速近似抗锯齿) 目前版本的threejs的FXAA-shaderpass出了点问题\r\n        // this.fxaaPass = new ShaderPass(FXAAShader);\r\n        // GameContext.GameView.EffectComposer.addPass(this.fxaaPass);\r\n        // this.updateFXAAUnifroms();\r\n        // window.addEventListener('resize', () => { this.updateFXAAUnifroms() }); // resize时需要更新FXAA参数\r\n    }\r\n\r\n    updateFXAAUnifroms() {\r\n        GameContext.GameView.Renderer.getSize(this.rendererSize);\r\n        (this.fxaaPass.material.uniforms['resolution'].value as Vector2).set(1 / this.rendererSize.x, 1 / this.rendererSize.y);\r\n    }\r\n\r\n    callEveryFrame(deltaTime?: number, elapsedTime?: number): void {\r\n\r\n        // 天空盒\r\n        GameContext.GameView.Renderer.render(GameContext.Scenes.Skybox, GameContext.Cameras.PlayerCamera);\r\n        GameContext.GameView.Renderer.clearDepth();\r\n\r\n        // 渲染场景\r\n        GameContext.GameView.Renderer.render(GameContext.Scenes.Level, GameContext.Cameras.PlayerCamera);\r\n\r\n        // 渲染特效层\r\n        GameContext.GameView.Renderer.render(GameContext.Scenes.Sprites, GameContext.Cameras.PlayerCamera);\r\n        GameContext.GameView.Renderer.clearDepth();\r\n\r\n        // 手部模型\r\n        GameContext.GameView.Renderer.render(GameContext.Scenes.Handmodel, GameContext.Cameras.HandModelCamera);\r\n        GameContext.GameView.Renderer.clearDepth();\r\n\r\n        // UI\r\n        GameContext.GameView.Renderer.render(GameContext.Scenes.UI, GameContext.Cameras.UICamera);\r\n\r\n        // GameContext.GameView.EffectComposer.render();\r\n    }\r\n\r\n}","export default \"attribute float rand;// 给弹孔随机大小 0.5 ~ 1\\r\\nattribute float generTime;\\r\\n\\r\\nuniform float uExitTime;\\r\\nuniform float uFadeTime;// 渐变消失时间\\r\\nuniform float uTime;// 当前时间\\r\\nuniform float uScale;// 弹孔大小\\r\\n\\r\\nvarying float vElapsed;// 传递弹点生成时间\\r\\nvarying float vRand;\\r\\n\\r\\nvec3 upperDirection=vec3(0.,1.,0.);\\r\\n\\r\\nvoid main()\\r\\n{\\r\\n    \\r\\n    vRand=rand;\\r\\n    \\r\\n    // 计算弹孔点的位置(基础位置)\\r\\n    \\r\\n    vec3 pointPosition=position;\\r\\n    pointPosition+=normalize(cameraPosition-position)*.01;//朝着相机方向移动(基础)\\r\\n    pointPosition+=normal*.2;// 灰尘会朝着命中的面的法线方向移动\\r\\n    pointPosition+=upperDirection*.1;\\r\\n    \\r\\n    // 计算弹孔点的大小\\r\\n    \\r\\n    float pointSize=32.;// 弹孔默认大小\\r\\n    pointSize+=64.*rand;// 弹孔默认大小受到随机值影响后的值\\r\\n    pointSize*=uScale;// 点大小受到uniform自定义值影响\\r\\n    \\r\\n    float elapsed=uTime-generTime;// 已经存在时间\\r\\n    vElapsed=elapsed;\\r\\n    float disapperTime=uExitTime+uFadeTime;// 消失总时间\\r\\n    \\r\\n    pointPosition+=(1.*normal+.5*upperDirection)*elapsed;// S=v*t\\r\\n    pointSize*=.25+elapsed/disapperTime*.2;\\r\\n    \\r\\n    // 点位置\\r\\n    \\r\\n    gl_Position=projectionMatrix*viewMatrix*modelMatrix*vec4(pointPosition,1.);\\r\\n    \\r\\n    // 点大小\\r\\n    \\r\\n    gl_PointSize=pointSize;\\r\\n    vec4 viewPosition=viewMatrix*vec4(pointPosition,1.);\\r\\n    gl_PointSize*=(1./-viewPosition.z);// 点大小受到距离远近影响\\r\\n    \\r\\n}\"","export default \"uniform float uOpacity;\\r\\nuniform float uExitTime;\\r\\nuniform float uFadeTime;// 渐变消失时间\\r\\nuniform sampler2D uAshT;\\r\\n\\r\\nvarying float vElapsed;// 传递弹点生成时间\\r\\nvarying float vRand;\\r\\n\\r\\nmat4 makeRotationZ(float theta)\\r\\n{\\r\\n    return mat4(\\r\\n        cos(theta),-sin(theta),0,0,\\r\\n        sin(theta),cos(theta),0,0,\\r\\n        0,0,1,0,\\r\\n        0,0,0,1\\r\\n    );\\r\\n}\\r\\n\\r\\nvoid main()\\r\\n{\\r\\n    float fadeMask=step(uExitTime,vElapsed);// 开始渐变消失为1\\r\\n    fadeMask*=(vElapsed-uExitTime)/uFadeTime;\\r\\n    \\r\\n    if(uOpacity-fadeMask<0.){// 提升一下性能\\r\\n        discard;\\r\\n    }\\r\\n    \\r\\n    vec4 randRotate=makeRotationZ(vRand*3.14)*vec4(gl_PointCoord-vec2(.5),0.,1.);// gl.POINTS, (left,top):(0,0) (right, bottom): (1, 1)\\r\\n    vec4 colorFromT=texture2D(uAshT,randRotate.xy+vec2(.5));// matrix 是用(0, 0)点做中心点进行旋转的\\r\\n    \\r\\n    gl_FragColor=vec4(colorFromT.rgb,colorFromT.a*(uOpacity-fadeMask)*vRand);\\r\\n}\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAeFBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////GqOSsAAAAKHRSTlMABR8kKS43EQ0JGjJAFTtMUEhYVEVlYFxqF25yfYx4dYCHkZaEm56k5s4VQQAADrpJREFUeNrsWdly2zAMrHjJEmmKOqwjmWn//y+7C9C1J32ymrQvRcd2ZpoIy8ViASbf/sf/+B+fFk3TfPtHweRd1zC+/QsQXYu4XP4NhKZre2OubcUgCAjhL8FoLshure37/rhegYAQNL4cgp7+evS99dEZoxBaFqLGVwOg8C5EYL0nALJwkIWuxpcjUADX3jpnjakQqhokui9D0DwAtALAWUsMSoKG1OMLEGibNffev4ABAwT+gUGj0tF9ev7nr7UG7APnvUUgv9FXjf5zETT15F0t7gOAj1GUyJ7UzF+BoLmXAPL6DUBI4xJQBhc9JBmCR1UUQfPp2nu8CYJDAPi4DCla63PyxpetjMPipSiX5vPo/+gwlQLRgA+ZOowhxjBst/22zksIDjb95whIu9o7M8rU+SgC50MaAij3Kaey7m9vt9s2j8n/uQya7uGuHdOr0zw1otQAGpjmBCkO07Tu7+9vt2kuS6ZFnqZAUzChjhjNfhWruXykIGYgwKGHeb29IXZ8nUKKfwpA3VYQXJiqN2z3nrQ+jwPj4EUxTeu63hD7G163ObgQbH98AoArLV7mjmMmb462+QCAfZDKtm04/w4A6zqNHl1pe9jheQCVYufEYmzNb4/LswrpxhzJeYbwoP99B4Z1DBFdIRU4D6CqzHoEipwCjokwbfcbAIfmA/0rji4kTNE6qdbRngbQSH5kMGyyZRzKkFLK0RHAhxIYF6DBHQysEOH7+76N2Ut+COjUYqB9L43X9i7mZSzzXMYlIf9xeQBoFAAsME0g/7YSwE4Zzsn2kh8AmrO+TwraqwEBaSzTNA84FwC0DwSyltGJHPxv3aYJb6v0wVSCLord2fx3tz8s678MM6xlWHI0z+tn9WIOAUAc0zCxEUkEfIDfKQy8br33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\"","import bulletHoleAshVertex from '@assets/shaders/bullet/hole/ash.vert?raw';\r\nimport bulletHoleAshFrag from '@assets/shaders/bullet/hole/ash.frag?raw';\r\n\r\nimport ashTexture from '@assets/textures/bullet.hole.ash.png';\r\nimport { CycleInterface } from '@src/core/inferface/CycleInterface';\r\nimport { LoopInterface } from '@src/core/inferface/LoopInterface';\r\nimport { GameContext } from '@src/core/GameContext';\r\nimport { BulletFallenPointEvent, LayerEventPipe } from '@src/gameplay/pipes/LayerEventPipe';\r\nimport { AdditiveBlending, BufferAttribute, BufferGeometry, Points, ShaderMaterial, Texture } from 'three';\r\n\r\nconst image = new Image();\r\nconst texture = new Texture(image);\r\nimage.src = ashTexture;\r\nimage.onload = () => { texture.needsUpdate = true; }\r\n\r\nconst array3Util: Array<number> = new Array<number>(3);\r\nconst array1Util: Array<number> = new Array<number>(1);\r\n\r\n/**\r\n * 子弹击中场景物体导致的尘土特效\r\n */\r\nexport class BulletHoleAshLayer implements CycleInterface, LoopInterface {\r\n\r\n    scene: THREE.Scene;\r\n\r\n    maximun: number = 10; // 最大产生弹点数量\r\n\r\n    bulletHoleOpacity: number = .4; // 弹孔透明度\r\n    bulletHoleScale: number = 15.; // 弹孔大小\r\n    exitTime: number = .1; // 弹孔存在时间(多少秒后开始渐变消失)\r\n    fadeTime: number = .1; // 弹孔消失渐变时间\r\n\r\n    bulletHoleGeometry: THREE.BufferGeometry = new BufferGeometry();\r\n    bulletHoleMaterial: THREE.ShaderMaterial = new ShaderMaterial({\r\n        uniforms: {\r\n            uTime: { value: 0. },\r\n            uOpacity: { value: this.bulletHoleOpacity },\r\n            uScale: { value: this.bulletHoleScale },\r\n            uExitTime: { value: this.exitTime },\r\n            uFadeTime: { value: this.fadeTime },\r\n            uAshT: { value: texture },\r\n        },\r\n        blending: AdditiveBlending,\r\n        transparent: true,\r\n        vertexShader: bulletHoleAshVertex,\r\n        fragmentShader: bulletHoleAshFrag,\r\n    });\r\n\r\n    // geometry.attributes 指针用于记录集合体可以复用的buffer\r\n    positionFoat32Array: Float32Array; // 击中三角面的点位置\r\n    normalFoat32Array: Float32Array; // 击中三角面的法线\r\n    generTimeFLoat32Array: Float32Array; // 生成该弹点的时间\r\n    randFoat32Array: Float32Array; // 该弹点的随机大小\r\n\r\n    positionBufferAttribute: THREE.BufferAttribute;\r\n    normalBufferAttribute: THREE.BufferAttribute;\r\n    generTimeBufferAttribute: THREE.BufferAttribute;\r\n    randBufferAttribute: THREE.BufferAttribute;\r\n\r\n    // 下一发弹点的位置指针\r\n\r\n    bulletHoleIndex: number = 0;\r\n\r\n    init(): void {\r\n\r\n        // 绑定指针/初始化\r\n        this.scene = GameContext.Scenes.Sprites;\r\n        this.bulletHoleMaterial.depthWrite = false; // 目的是在进行深度检测时自己不会影响自己\r\n\r\n        // 生成 array buffer\r\n        this.positionFoat32Array = new Float32Array(new ArrayBuffer(4 * 3 * this.maximun));\r\n        this.normalFoat32Array = new Float32Array(new ArrayBuffer(4 * 3 * this.maximun));\r\n        this.generTimeFLoat32Array = new Float32Array(new ArrayBuffer(4 * this.maximun));\r\n        this.randFoat32Array = new Float32Array(new ArrayBuffer(4 * this.maximun));\r\n        for (let i = 0; i < this.maximun; i++) { // 默认初始化时所有弹点都不显示, 给他们赋予生成时间为-10s\r\n            array1Util[0] = -10;\r\n            this.generTimeFLoat32Array.set(array1Util, i);\r\n        }\r\n\r\n        // 添加弹点精灵\r\n        const bulletHoles = new Points(this.bulletHoleGeometry, this.bulletHoleMaterial);\r\n        bulletHoles.frustumCulled = false; // 不管如何都会渲染\r\n        this.scene.add(bulletHoles);\r\n\r\n        // 生成 BufferAttribute\r\n        this.positionBufferAttribute = new BufferAttribute(this.positionFoat32Array, 3);\r\n        this.normalBufferAttribute = new BufferAttribute(this.normalFoat32Array, 3);\r\n        this.generTimeBufferAttribute = new BufferAttribute(this.generTimeFLoat32Array, 1);\r\n        this.randBufferAttribute = new BufferAttribute(this.randFoat32Array, 1);\r\n\r\n        // 指定 BufferAttribute\r\n        this.bulletHoleGeometry.setAttribute('position', this.positionBufferAttribute);\r\n        this.bulletHoleGeometry.setAttribute('normal', this.normalBufferAttribute);\r\n        this.bulletHoleGeometry.setAttribute('generTime', this.generTimeBufferAttribute);\r\n        this.bulletHoleGeometry.setAttribute('rand', this.randBufferAttribute);\r\n\r\n        // 监听事件管线, 触发三维特效\r\n        LayerEventPipe.addEventListener(BulletFallenPointEvent.type, (e: CustomEvent) => { this.addPoint(e.detail.fallenPoint, e.detail.fallenNormal); })\r\n\r\n    }\r\n\r\n    /** 添加弹点的通用方法 */\r\n    addPoint(point: THREE.Vector3, normal: THREE.Vector3) {\r\n\r\n        const random = 0.5 + Math.random() * .5; // 0.5 ~ 1\r\n\r\n        // 弹点位置\r\n\r\n        this.positionFoat32Array.set(point.toArray(array3Util, 0), this.bulletHoleIndex * 3);\r\n\r\n        // 弹点法线\r\n\r\n        this.normalFoat32Array.set(normal.toArray(array3Util, 0), this.bulletHoleIndex * 3);\r\n\r\n        // 弹点生成时间\r\n\r\n        array1Util[0] = GameContext.GameLoop.Clock.getElapsedTime();\r\n        this.generTimeFLoat32Array.set(array1Util, this.bulletHoleIndex);\r\n\r\n        // 弹点随机大小影响值\r\n\r\n        array1Util[0] = random;\r\n        this.randFoat32Array.set(array1Util, this.bulletHoleIndex);\r\n\r\n        if (this.bulletHoleIndex + 1 >= this.maximun) this.bulletHoleIndex = 0; // 如果index+1超过了设置最大显示弹点的上限,那么就从0开始重新循环\r\n        else this.bulletHoleIndex += 1;\r\n\r\n        // 更新 BufferAttribute\r\n\r\n        this.positionBufferAttribute.needsUpdate = true;\r\n        this.normalBufferAttribute.needsUpdate = true;\r\n        this.generTimeBufferAttribute.needsUpdate = true;\r\n        this.randBufferAttribute.needsUpdate = true;\r\n\r\n    }\r\n\r\n    callEveryFrame(deltaTime?: number, elapsedTime?: number): void {\r\n\r\n        this.bulletHoleMaterial.uniforms.uTime.value = elapsedTime;\r\n\r\n    }\r\n\r\n}","export default \"attribute float rand;// 给弹孔随机大小\\r\\nattribute float generTime;\\r\\n\\r\\nuniform float uTime;// 当前时间\\r\\nuniform float uScale;// 弹孔大小\\r\\n\\r\\nvarying float vRand;\\r\\nvarying float elapsed;// 传递弹点存在时间\\r\\n\\r\\nvoid main()\\r\\n{\\r\\n    \\r\\n    vRand=rand;\\r\\n    elapsed=uTime-generTime;// 已经存在时间\\r\\n    \\r\\n    // 计算弹孔点的位置\\r\\n    vec3 position1=position;\\r\\n    position1+=normalize(cameraPosition-position)*.05;//朝着相机方向移动(基础)\\r\\n    position1+=normal*.05;// 朝着命中的面的法线方向移动\\r\\n    gl_Position=projectionMatrix*viewMatrix*modelMatrix*vec4(position1,1.);// 点位置\\r\\n    \\r\\n    // 计算弹孔点的大小\\r\\n    \\r\\n    gl_PointSize=32.;// 弹孔默认大小\\r\\n    gl_PointSize+=(48.*rand);// 弹孔默认大小受到随机值影响后的值\\r\\n    gl_PointSize*=uScale;// 点大小受到uniform自定义值影响\\r\\n    vec4 viewPosition=viewMatrix*vec4(position1,1.);\\r\\n    gl_PointSize*=(1./-viewPosition.z);// 点大小受到距离远近影响\\r\\n    \\r\\n}\"","export default \"uniform float uOpacity;\\r\\nuniform float uFlashTime;//闪烁时间\\r\\nuniform sampler2D uFlashT;\\r\\n\\r\\nvarying float vRand;\\r\\nvarying float elapsed;// 传递弹点存在时间\\r\\n\\r\\nmat4 makeRotationZ(float theta)\\r\\n{\\r\\n    return mat4(\\r\\n        cos(theta),-sin(theta),0,0,\\r\\n        sin(theta),cos(theta),0,0,\\r\\n        0,0,1,0,\\r\\n        0,0,0,1\\r\\n    );\\r\\n}\\r\\n\\r\\nvoid main()\\r\\n{\\r\\n    \\r\\n    float fadeMask=step(elapsed,uFlashTime);\\r\\n    \\r\\n    if(fadeMask<1.){\\r\\n        discard;\\r\\n    }\\r\\n    \\r\\n    vec4 randRotate=makeRotationZ(vRand*3.14)*vec4(gl_PointCoord-vec2(.5),0.,1.);\\r\\n    vec4 colorFromT=texture2D(uFlashT,randRotate.xy+vec2(.5));\\r\\n    \\r\\n    gl_FragColor=vec4(colorFromT.rgb,fadeMask*uOpacity*colorFromT.a);\\r\\n    \\r\\n}\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAADAFBMVEUAAADankDXnkHipUbmpkXkp0nlqEjprEborEXrs07oq0frs07rsEzwtEzwtU/vtE3vtE3ssUzrr0zytE7vs07us0/xtUz2uU/0t1Dglzn1tUv3tVL3tVH2t1DztEv0tk3nmS71tk/ytFD0tU34uVX3tkv3tE7mli76t1X5uVf6tVP3pyPoq0j5tFH3qST4szPvqDr5slb4tkr3pSL0qC34rSn3riT5wE/5tFbxoiHrmyTplyTqlyT5vEv2rzv4tUf5qB/6tk/5sU/zpSHvoCbupCX3qyH5vFH6uk/5sTb4uVXwpC3slR7nkib2qSzxpjH5sjT6uDr5rCH6tzr4skb3tkHzqzj7xDv6wU35tC75vkv5szT1qSP1rDr2sDj5wFP1ox75sUH4skH1rDb4qx76uU70oyL3qB/4tj33qR/6v0X6vzT6uzz3ox70oh30qzblkSzxqCr5szr3rDHvqTv6tCH2u1L0py75rzH4szXulhnyqzn6y036xD74tyv6vUX6uTz0oiHrlyD5ukr5sDf3rjP5sTP5uS782Er1ulH1t0/5wjP71Er70jT5uj/5szH4uTP5uDrrojz5wkn5px73sSf4tkf7zUT71Uv6zE74sDT4vif3sUT5syfnkB35vUT2uiX3tyL60zP71zb6zy/7zUf5xjT5xDXwnxn6xzfkjB784FP1uTT84jPyoB7pkxjqkhf87ELjgxb51jD85z7//////37//3T//4P//2P//4////n//2v//6b//2///1P//3n//2f//1///1f//5T//7H//6H//07//5j//1v//9v//4r//7f//0r//z3///X//6v//0H//8X//7z//zb//+P//+r//8///5z91zr//9X//4f//8r//8D/+U792Sr///D/7GD+3kD7vDX/5V75xlX//0X911r7zlb8zTv//yz/8FD/6y38wyH/8mb2vlT/70D/+UT/9UP/9S38zSb6qyL/+Wb/3lv+5UH8uyT+5k//8zT8xy/+4i370C7/+jrNrqzkAAAAtXRSTlMAAgMEBgUIDQsQCRUSHyglLB0XLxsZIkc3EENPU0s0OhhAMj1jXVgUc2yPgiF5c2gpf2aNbXvAv4hdOSMe2IJsqZWDVFAt1aqbmlxMPimJ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\"","import { GameContext } from '@src/core/GameContext'\r\n\r\nimport bulletHoleVertex from '@assets/shaders/bullet/hole/flash.vert?raw';\r\nimport bulletHoleFrag from '@assets/shaders/bullet/hole/flash.frag?raw';\r\n\r\n\r\nimport flashTexture from '@assets/textures/bullet.hole.flash.png';\r\nimport { CycleInterface } from '@src/core/inferface/CycleInterface';\r\nimport { LoopInterface } from '@src/core/inferface/LoopInterface';\r\nimport { BulletFallenPointEvent, LayerEventPipe } from '@src/gameplay/pipes/LayerEventPipe';\r\nimport { AdditiveBlending, BufferAttribute, BufferGeometry, FrontSide, Points, ShaderMaterial, Texture } from 'three';\r\n\r\nconst image = new Image();\r\nconst texture = new Texture(image);\r\nimage.src = flashTexture;\r\nimage.onload = () => { texture.needsUpdate = true; }\r\n\r\nconst array3Util: Array<number> = new Array<number>(3);\r\nconst array1Util: Array<number> = new Array<number>(1);\r\n\r\n/**\r\n * 子弹击中场景物体导致的闪光特效\r\n */\r\nexport class BulletHoleFlashLayer implements CycleInterface, LoopInterface {\r\n\r\n    scene: THREE.Scene;\r\n\r\n    maximun: number = 10; // 最大产生弹点数量\r\n\r\n    bulletHoleOpacity: number = 1.; // 闪光透明度\r\n    bulletHoleScale: number = 1.5; // 闪光特效大小\r\n    bulletHoleFlashTime: number = .03; // 闪光持续时间\r\n\r\n    bulletHoleGeometry: THREE.BufferGeometry = new BufferGeometry();\r\n    bulletHoleMaterial: THREE.ShaderMaterial = new ShaderMaterial({\r\n        uniforms: {\r\n            uTime: { value: 0. },\r\n            uOpacity: { value: this.bulletHoleOpacity },\r\n            uScale: { value: this.bulletHoleScale },\r\n            uFlashTime: { value: this.bulletHoleFlashTime },\r\n            uFlashT: { value: texture }\r\n        },\r\n        depthWrite: false, // 目的是在进行深度检测时自己不会影响自己\r\n        blending: AdditiveBlending,\r\n        side: FrontSide,\r\n        transparent: true,\r\n        vertexShader: bulletHoleVertex,\r\n        fragmentShader: bulletHoleFrag,\r\n    });\r\n\r\n    // geometry.attributes 指针用于记录集合体可以复用的buffer\r\n    positionFoat32Array: Float32Array; // 击中三角面的点位置\r\n    normalFoat32Array: Float32Array; // 击中三角面的法线\r\n    generTimeFLoat32Array: Float32Array; // 生成该弹点的时间\r\n    randFoat32Array: Float32Array; // 该弹点的随机大小\r\n\r\n    positionBufferAttribute: THREE.BufferAttribute;\r\n    normalBufferAttribute: THREE.BufferAttribute;\r\n    generTimeBufferAttribute: THREE.BufferAttribute;\r\n    randBufferAttribute: THREE.BufferAttribute;\r\n\r\n    // 下一发弹点的位置指针\r\n\r\n    bulletHoleIndex: number = 0;\r\n\r\n    init(): void {\r\n\r\n        // 生成 array buffer\r\n        this.positionFoat32Array = new Float32Array(new ArrayBuffer(4 * 3 * this.maximun));\r\n        this.normalFoat32Array = new Float32Array(new ArrayBuffer(4 * 3 * this.maximun));\r\n        this.generTimeFLoat32Array = new Float32Array(new ArrayBuffer(4 * this.maximun));\r\n        this.randFoat32Array = new Float32Array(new ArrayBuffer(4 * this.maximun));\r\n        for (let i = 0; i < this.maximun; i++) { // 默认初始化时所有弹点都不显示, 给他们赋予生成时间为-10s\r\n            array1Util[0] = -10;\r\n            this.generTimeFLoat32Array.set(array1Util, i);\r\n        }\r\n\r\n        // 添加弹点精灵\r\n        this.scene = GameContext.Scenes.Sprites;\r\n        const bulletHoles = new Points(this.bulletHoleGeometry, this.bulletHoleMaterial);\r\n        bulletHoles.frustumCulled = false; // 不管如何都会渲染\r\n        this.scene.add(bulletHoles);\r\n\r\n        // 生成 BufferAttribute\r\n        this.positionBufferAttribute = new BufferAttribute(this.positionFoat32Array, 3);\r\n        this.normalBufferAttribute = new BufferAttribute(this.normalFoat32Array, 3);\r\n        this.generTimeBufferAttribute = new BufferAttribute(this.generTimeFLoat32Array, 1);\r\n        this.randBufferAttribute = new BufferAttribute(this.randFoat32Array, 1);\r\n\r\n        // 指定 BufferAttribute\r\n        this.bulletHoleGeometry.setAttribute('position', this.positionBufferAttribute);\r\n        this.bulletHoleGeometry.setAttribute('normal', this.normalBufferAttribute);\r\n        this.bulletHoleGeometry.setAttribute('generTime', this.generTimeBufferAttribute);\r\n        this.bulletHoleGeometry.setAttribute('rand', this.randBufferAttribute);\r\n\r\n        // 监听事件管线\r\n        LayerEventPipe.addEventListener(BulletFallenPointEvent.type, (e: CustomEvent) => { this.addPoint(e.detail.fallenPoint, e.detail.fallenNormal); })\r\n    }\r\n\r\n    /** 添加弹点的通用方法 */\r\n    addPoint(point: THREE.Vector3, normal: THREE.Vector3) {\r\n\r\n        const random = 0.5 + Math.random() * .5; // 0.5 ~ 1\r\n\r\n        // 弹点位置\r\n\r\n        this.positionFoat32Array.set(point.toArray(array3Util, 0), this.bulletHoleIndex * 3);\r\n\r\n        // 弹点法线\r\n\r\n        this.normalFoat32Array.set(normal.toArray(array3Util, 0), this.bulletHoleIndex * 3);\r\n\r\n        // 弹点生成时间\r\n\r\n        array1Util[0] = GameContext.GameLoop.Clock.getElapsedTime();\r\n        this.generTimeFLoat32Array.set(array1Util, this.bulletHoleIndex);\r\n\r\n        // 弹点随机大小影响值\r\n\r\n        array1Util[0] = random;\r\n        this.randFoat32Array.set(array1Util, this.bulletHoleIndex);\r\n\r\n        if (this.bulletHoleIndex + 1 >= this.maximun) this.bulletHoleIndex = 0; // 如果index+1超过了设置最大显示弹点的上限,那么就从0开始重新循环\r\n        else this.bulletHoleIndex += 1;\r\n\r\n        // 更新 BufferAttribute\r\n\r\n        this.positionBufferAttribute.needsUpdate = true;\r\n        this.normalBufferAttribute.needsUpdate = true;\r\n        this.generTimeBufferAttribute.needsUpdate = true;\r\n        this.randBufferAttribute.needsUpdate = true;\r\n\r\n    }\r\n\r\n    callEveryFrame(deltaTime?: number, elapsedTime?: number): void {\r\n\r\n        this.bulletHoleMaterial.uniforms.uTime.value = elapsedTime;\r\n\r\n    }\r\n\r\n}","export default \"attribute float rand;// 给弹孔随机大小\\r\\nattribute float generTime;\\r\\n\\r\\nuniform float uTime;// 当前时间\\r\\nuniform float uScale;// 弹孔大小\\r\\n\\r\\nvarying float vElapsed;// 传递弹点生成时间\\r\\nvarying float vRand;\\r\\n\\r\\nvoid main()\\r\\n{\\r\\n    vRand=rand;\\r\\n    vElapsed=uTime-generTime;// 已经存在时间\\r\\n    \\r\\n    // 计算弹孔点的位置\\r\\n    vec3 position1=position;\\r\\n    position1+=normalize(cameraPosition-position)*.01;//朝着相机方向移动(基础)\\r\\n    position1+=normal*.01;// 朝着命中的面的法线方向移动\\r\\n    gl_Position=projectionMatrix*viewMatrix*modelMatrix*vec4(position1,1.);// 点位置\\r\\n    \\r\\n    // 计算弹孔点的大小\\r\\n    \\r\\n    gl_PointSize=32.;// 弹孔默认大小\\r\\n    gl_PointSize+=(48.*rand);// 弹孔默认大小受到随机值影响后的值\\r\\n    gl_PointSize*=uScale;// 点大小受到uniform自定义值影响\\r\\n    vec4 viewPosition=viewMatrix*vec4(position1,1.);\\r\\n    gl_PointSize*=(1./-viewPosition.z);// 点大小受到距离远近影响\\r\\n    \\r\\n}\"","export default \"uniform float uOpacity;\\r\\nuniform float uExitTime;\\r\\nuniform float uFadeTime;// 渐变消失时间\\r\\nuniform sampler2D uBulletHoleT;\\r\\n\\r\\nvarying float vElapsed;// 传递弹点生成时间\\r\\nvarying float vRand;// [.5,1.]\\r\\n\\r\\nvoid main()\\r\\n{\\r\\n    \\r\\n    float fadeMask=step(uExitTime,vElapsed);// 开始渐变消失为1\\r\\n    fadeMask*=(vElapsed-uExitTime)/uFadeTime;\\r\\n    \\r\\n    // 性能优化\\r\\n    \\r\\n    if(uOpacity-fadeMask<0.){\\r\\n        discard;\\r\\n    }\\r\\n    \\r\\n    // 利用随机数显示4种弹孔其中的一种\\r\\n    \\r\\n    vec2 pointCoord=gl_PointCoord/2.;\\r\\n    pointCoord.x+=.5;\\r\\n    pointCoord.y+=.5;\\r\\n    float index=floor(vRand/.125);// [4, 8]\\r\\n    if(index==4.){\\r\\n        pointCoord.x-=.5;\\r\\n        pointCoord.y-=.5;\\r\\n    }else if(index==5.){\\r\\n        pointCoord.y-=.5;\\r\\n    }else if(index==6.){\\r\\n        pointCoord.x-=.5;\\r\\n    }\\r\\n    vec4 temp=texture2D(uBulletHoleT,pointCoord);\\r\\n    \\r\\n    // gl_FragColor=vec4(vec3(0.),uOpacity-fadeMask);\\r\\n    gl_FragColor=vec4(temp.rgb,(uOpacity-fadeMask)*temp.a);\\r\\n    \\r\\n}\"","export default \"data:image/png;base64,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\"","import { GameContext } from '@src/core/GameContext'\r\nimport bulletHoleVertex from '@assets/shaders/bullet/hole/point.vert?raw';\r\nimport bulletHoleFrag from '@assets/shaders/bullet/hole/point.frag?raw';\r\nimport pointTexture from '@assets/textures/bullet.hole.point.png';\r\nimport { CycleInterface } from '@src/core/inferface/CycleInterface';\r\nimport { LoopInterface } from '@src/core/inferface/LoopInterface';\r\nimport { BulletFallenPointEvent, LayerEventPipe } from '@src/gameplay/pipes/LayerEventPipe';\r\nimport { BufferAttribute, BufferGeometry, CustomBlending, Points, ShaderMaterial, Texture } from 'three';\r\n\r\nconst image = new Image();\r\nconst texture = new Texture(image);\r\nimage.src = pointTexture;\r\nimage.onload = () => { texture.needsUpdate = true; }\r\n\r\nconst array3Util: Array<number> = new Array<number>(3);\r\nconst array1Util: Array<number> = new Array<number>(1);\r\n\r\n/**\r\n * 弹点渲染\r\n */\r\nexport class BulletHoleLayer implements CycleInterface, LoopInterface {\r\n\r\n    scene: THREE.Scene;\r\n\r\n    maximun: number = 40; // 最大产生弹点数量\r\n\r\n    bulletHoleOpacity: number = .8; // 弹孔透明度\r\n    bulletHoleScale: number = 1.5; // 弹孔大小\r\n    exitTime: number = 5; // 弹孔存在时间(多少秒后开始渐变消失)\r\n    fadeTime: number = .5; // 弹孔消失渐变时间\r\n\r\n    bulletHoleGeometry: THREE.BufferGeometry = new BufferGeometry();\r\n    bulletHoleMaterial: THREE.ShaderMaterial = new ShaderMaterial({\r\n        uniforms: {\r\n            uTime: { value: 0. },\r\n            uOpacity: { value: this.bulletHoleOpacity },\r\n            uScale: { value: this.bulletHoleScale },\r\n            uExitTime: { value: this.exitTime },\r\n            uFadeTime: { value: this.fadeTime },\r\n            uBulletHoleT: { value: texture },\r\n        },\r\n        blending: CustomBlending,\r\n        depthWrite: false, // 目的是在进行深度检测时自己不会影响自己\r\n        transparent: true,\r\n        vertexShader: bulletHoleVertex,\r\n        fragmentShader: bulletHoleFrag,\r\n    });\r\n\r\n    // geometry.attributes 指针用于记录集合体可以复用的buffer\r\n\r\n    positionFoat32Array: Float32Array; // 击中三角面的点位置\r\n    normalFoat32Array: Float32Array; // 击中三角面的法线\r\n    generTimeFLoat32Array: Float32Array; // 生成该弹点的时间\r\n    randFoat32Array: Float32Array; // 该弹点的随机大小\r\n\r\n    positionBufferAttribute: THREE.BufferAttribute;\r\n    normalBufferAttribute: THREE.BufferAttribute;\r\n    generTimeBufferAttribute: THREE.BufferAttribute;\r\n    randBufferAttribute: THREE.BufferAttribute;\r\n\r\n    // 下一发弹点的位置指针\r\n\r\n    bulletHoleIndex: number = 0;\r\n\r\n    init(): void {\r\n\r\n        // 绑定指针/初始化\r\n        this.scene = GameContext.Scenes.Sprites;\r\n\r\n        // 生成 array buffer\r\n        this.positionFoat32Array = new Float32Array(new ArrayBuffer(4 * 3 * this.maximun));\r\n        this.normalFoat32Array = new Float32Array(new ArrayBuffer(4 * 3 * this.maximun));\r\n        this.generTimeFLoat32Array = new Float32Array(new ArrayBuffer(4 * this.maximun));\r\n        this.randFoat32Array = new Float32Array(new ArrayBuffer(4 * this.maximun));\r\n        for (let i = 0; i < this.maximun; i++) { // 默认初始化时所有弹点都不显示, 给他们赋予生成时间为-10s\r\n            array1Util[0] = -10;\r\n            this.generTimeFLoat32Array.set(array1Util, i);\r\n        }\r\n\r\n        // 生成 BufferAttribute\r\n        this.positionBufferAttribute = new BufferAttribute(this.positionFoat32Array, 3);\r\n        this.normalBufferAttribute = new BufferAttribute(this.normalFoat32Array, 3);\r\n        this.generTimeBufferAttribute = new BufferAttribute(this.generTimeFLoat32Array, 1);\r\n        this.randBufferAttribute = new BufferAttribute(this.randFoat32Array, 1);\r\n\r\n        // 指定 BufferAttribute\r\n        this.bulletHoleGeometry.setAttribute('position', this.positionBufferAttribute);\r\n        this.bulletHoleGeometry.setAttribute('normal', this.normalBufferAttribute);\r\n        this.bulletHoleGeometry.setAttribute('generTime', this.generTimeBufferAttribute);\r\n        this.bulletHoleGeometry.setAttribute('rand', this.randBufferAttribute);\r\n\r\n        // 添加弹点精灵\r\n        const bulletHoles = new Points(this.bulletHoleGeometry, this.bulletHoleMaterial);\r\n        bulletHoles.frustumCulled = false; // 不管如何都会渲染\r\n        this.scene.add(bulletHoles);\r\n        LayerEventPipe.addEventListener(BulletFallenPointEvent.type, (e: CustomEvent) => { this.addPoint(e.detail.fallenPoint, e.detail.fallenNormal); });\r\n    }\r\n\r\n    /** 添加弹点的通用方法 */\r\n    addPoint(point: THREE.Vector3, normal: THREE.Vector3) {\r\n        const random = 0.5 + Math.random() * .5; // 0.5 ~ 1\r\n\r\n        // 弹点位置\r\n        this.positionFoat32Array.set(point.toArray(array3Util, 0), this.bulletHoleIndex * 3);\r\n        this.positionBufferAttribute.needsUpdate = true;\r\n\r\n        // 弹点法线\r\n        this.normalFoat32Array.set(normal.toArray(array3Util, 0), this.bulletHoleIndex * 3);\r\n        this.normalBufferAttribute.needsUpdate = true;\r\n\r\n        // 弹点生成时间\r\n        array1Util[0] = GameContext.GameLoop.Clock.getElapsedTime();\r\n        this.generTimeFLoat32Array.set(array1Util, this.bulletHoleIndex);\r\n        this.generTimeBufferAttribute.needsUpdate = true;\r\n\r\n        // 弹点随机大小影响值\r\n        array1Util[0] = random;\r\n        this.randFoat32Array.set(array1Util, this.bulletHoleIndex);\r\n        this.randBufferAttribute.needsUpdate = true;\r\n\r\n        // 更新index\r\n        if (this.bulletHoleIndex + 1 >= this.maximun) this.bulletHoleIndex = 0; // 如果index+1超过了设置最大显示弹点的上限,那么就从0开始重新循环\r\n        else this.bulletHoleIndex += 1;\r\n    }\r\n\r\n    callEveryFrame(deltaTime?: number, elapsedTime?: number): void {\r\n        this.bulletHoleMaterial.uniforms.uTime.value = elapsedTime;\r\n    }\r\n\r\n}","import {\n\tBackSide,\n\tBoxGeometry,\n\tMesh,\n\tShaderMaterial,\n\tUniformsUtils,\n\tVector3\n} from 'three';\n\n/**\n * Based on \"A Practical Analytic Model for Daylight\"\n * aka The Preetham Model, the de facto standard analytic skydome model\n * https://www.researchgate.net/publication/220720443_A_Practical_Analytic_Model_for_Daylight\n *\n * First implemented by Simon Wallner\n * http://simonwallner.at/project/atmospheric-scattering/\n *\n * Improved by Martin Upitis\n * http://blenderartists.org/forum/showthread.php?245954-preethams-sky-impementation-HDR\n *\n * Three.js integration by zz85 http://twitter.com/blurspline\n*/\n\nclass Sky extends Mesh {\n\n\tconstructor() {\n\n\t\tconst shader = Sky.SkyShader;\n\n\t\tconst material = new ShaderMaterial( {\n\t\t\tname: 'SkyShader',\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\t\tside: BackSide,\n\t\t\tdepthWrite: false\n\t\t} );\n\n\t\tsuper( new BoxGeometry( 1, 1, 1 ), material );\n\n\t\tthis.isSky = true;\n\n\t}\n\n}\n\nSky.SkyShader = {\n\n\tuniforms: {\n\t\t'turbidity': { value: 2 },\n\t\t'rayleigh': { value: 1 },\n\t\t'mieCoefficient': { value: 0.005 },\n\t\t'mieDirectionalG': { value: 0.8 },\n\t\t'sunPosition': { value: new Vector3() },\n\t\t'up': { value: new Vector3( 0, 1, 0 ) }\n\t},\n\n\tvertexShader: /* glsl */`\n\t\tuniform vec3 sunPosition;\n\t\tuniform float rayleigh;\n\t\tuniform float turbidity;\n\t\tuniform float mieCoefficient;\n\t\tuniform vec3 up;\n\n\t\tvarying vec3 vWorldPosition;\n\t\tvarying vec3 vSunDirection;\n\t\tvarying float vSunfade;\n\t\tvarying vec3 vBetaR;\n\t\tvarying vec3 vBetaM;\n\t\tvarying float vSunE;\n\n\t\t// constants for atmospheric scattering\n\t\tconst float e = 2.71828182845904523536028747135266249775724709369995957;\n\t\tconst float pi = 3.141592653589793238462643383279502884197169;\n\n\t\t// wavelength of used primaries, according to preetham\n\t\tconst vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n\t\t// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n\t\t// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n\t\tconst vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n\n\t\t// mie stuff\n\t\t// K coefficient for the primaries\n\t\tconst float v = 4.0;\n\t\tconst vec3 K = vec3( 0.686, 0.678, 0.666 );\n\t\t// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n\t\tconst vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n\n\t\t// earth shadow hack\n\t\t// cutoffAngle = pi / 1.95;\n\t\tconst float cutoffAngle = 1.6110731556870734;\n\t\tconst float steepness = 1.5;\n\t\tconst float EE = 1000.0;\n\n\t\tfloat sunIntensity( float zenithAngleCos ) {\n\t\t\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n\t\t\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n\t\t}\n\n\t\tvec3 totalMie( float T ) {\n\t\t\tfloat c = ( 0.2 * T ) * 10E-18;\n\t\t\treturn 0.434 * c * MieConst;\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\tvWorldPosition = worldPosition.xyz;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n\t\t\tvSunDirection = normalize( sunPosition );\n\n\t\t\tvSunE = sunIntensity( dot( vSunDirection, up ) );\n\n\t\t\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n\n\t\t\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n\n\t\t\t// extinction (absorbtion + out scattering)\n\t\t\t// rayleigh coefficients\n\t\t\tvBetaR = totalRayleigh * rayleighCoefficient;\n\n\t\t\t// mie coefficients\n\t\t\tvBetaM = totalMie( turbidity ) * mieCoefficient;\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\t\tvarying vec3 vWorldPosition;\n\t\tvarying vec3 vSunDirection;\n\t\tvarying float vSunfade;\n\t\tvarying vec3 vBetaR;\n\t\tvarying vec3 vBetaM;\n\t\tvarying float vSunE;\n\n\t\tuniform float mieDirectionalG;\n\t\tuniform vec3 up;\n\n\t\tconst vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\n\n\t\t// constants for atmospheric scattering\n\t\tconst float pi = 3.141592653589793238462643383279502884197169;\n\n\t\tconst float n = 1.0003; // refractive index of air\n\t\tconst float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)\n\n\t\t// optical length at zenith for molecules\n\t\tconst float rayleighZenithLength = 8.4E3;\n\t\tconst float mieZenithLength = 1.25E3;\n\t\t// 66 arc seconds -> degrees, and the cosine of that\n\t\tconst float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n\n\t\t// 3.0 / ( 16.0 * pi )\n\t\tconst float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n\t\t// 1.0 / ( 4.0 * pi )\n\t\tconst float ONE_OVER_FOURPI = 0.07957747154594767;\n\n\t\tfloat rayleighPhase( float cosTheta ) {\n\t\t\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n\t\t}\n\n\t\tfloat hgPhase( float cosTheta, float g ) {\n\t\t\tfloat g2 = pow( g, 2.0 );\n\t\t\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n\t\t\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec3 direction = normalize( vWorldPosition - cameraPos );\n\n\t\t\t// optical length\n\t\t\t// cutoff angle at 90 to avoid singularity in next formula.\n\t\t\tfloat zenithAngle = acos( max( 0.0, dot( up, direction ) ) );\n\t\t\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n\t\t\tfloat sR = rayleighZenithLength * inverse;\n\t\t\tfloat sM = mieZenithLength * inverse;\n\n\t\t\t// combined extinction factor\n\t\t\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n\n\t\t\t// in scattering\n\t\t\tfloat cosTheta = dot( direction, vSunDirection );\n\n\t\t\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n\t\t\tvec3 betaRTheta = vBetaR * rPhase;\n\n\t\t\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );\n\t\t\tvec3 betaMTheta = vBetaM * mPhase;\n\n\t\t\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n\t\t\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n\n\t\t\t// nightsky\n\t\t\tfloat theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]\n\t\t\tfloat phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]\n\t\t\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n\t\t\tvec3 L0 = vec3( 0.1 ) * Fex;\n\n\t\t\t// composition + solar disc\n\t\t\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n\t\t\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n\n\t\t\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n\n\t\t\tvec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n\n\t\t\tgl_FragColor = vec4( retColor, 1.0 );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\n\t\t}`\n\n};\n\nexport { Sky };\n","import { Sky } from 'three/examples/jsm/objects/Sky'\r\nimport { GameContext } from \"@src/core/GameContext\"\r\nimport { CycleInterface } from '../core/inferface/CycleInterface';\r\nimport { MathUtils, Vector3 } from 'three';\r\n\r\n// 天空盒\r\nconst skyEffectConfig = {\r\n    turbidity: 4,\r\n    rayleigh: 1,\r\n    mieCoefficient: 0.003,\r\n    mieDirectionalG: 0.7,\r\n    elevation: 20,\r\n    azimuth: -10,\r\n    exposure: GameContext.GameView.Renderer.toneMappingExposure,\r\n}\r\n\r\n/**\r\n * 利用ThreeJs SkyShader生成材质, 赋予盒子网格作为天空盒\r\n */\r\nexport class SkyLayer implements CycleInterface {\r\n\r\n    scene: THREE.Scene;\r\n    sky: Sky = new Sky();\r\n    sun: THREE.Vector3 = new Vector3();\r\n\r\n    /** 当前情况不需要每帧都更新信息 */\r\n    init(): void {\r\n        this.scene = GameContext.Scenes.Skybox;\r\n        this.sky.scale.setScalar(1000);  // THREE.Sky 本质上是通过shader构造材质, 添加给一个盒体; 这里设置盒体的大小\r\n\r\n        const uniforms = this.sky.material.uniforms;\r\n        uniforms['turbidity'].value = skyEffectConfig.turbidity;\r\n        uniforms['rayleigh'].value = skyEffectConfig.rayleigh;\r\n        uniforms['mieCoefficient'].value = skyEffectConfig.mieCoefficient;\r\n        uniforms['mieDirectionalG'].value = skyEffectConfig.mieDirectionalG;\r\n\r\n        const phi = MathUtils.degToRad(90 - skyEffectConfig.elevation);\r\n        const theta = MathUtils.degToRad(skyEffectConfig.azimuth);\r\n        this.sun.setFromSphericalCoords(1, phi, theta);\r\n\r\n        uniforms['sunPosition'].value.copy(this.sun);\r\n        GameContext.GameView.Renderer.toneMappingExposure = skyEffectConfig.exposure;\r\n        this.scene.add(this.sky);\r\n    }\r\n\r\n}","export default \"uniform float uSize;\\r\\nuniform float uThinkness;\\r\\nuniform float uGap;\\r\\nuniform float uAspect;\\r\\n\\r\\nmat4 scale(float x,float y,float z)\\r\\n{\\r\\n    return mat4(\\r\\n        x,0,0,0,\\r\\n        0,y,0,0,\\r\\n        0,0,z,0,\\r\\n        0,0,0,1\\r\\n    );\\r\\n}\\r\\n\\r\\nmat4 translate(float x,float y,float z)\\r\\n{\\r\\n    return mat4(\\r\\n        1,0,0,0,\\r\\n        0,1,0,0,\\r\\n        0,0,1,0,\\r\\n        x,y,z,1\\r\\n    );\\r\\n}\\r\\n\\r\\nvoid main(){\\r\\n    \\r\\n    mat4 withoutAspect=scale(1.,uAspect,1.);// 缩放y轴, 去除浏览器aspect影响\\r\\n    mat4 thinknessAndSize=scale(uThinkness,uSize,1.);// 应用长短粗细\\r\\n    mat4 crossIndex=translate(0.,uSize/2.,0.);// 向上位移1个准星长度\\r\\n    mat4 crossGap=translate(0.,uGap,0.);// gap变换\\r\\n    \\r\\n    // projectionMatrix*viewMatrix*modelMatrix*vec4(position,1.); // 由于使用了正交相机因此不用mvp\\r\\n    gl_Position=crossGap*crossIndex*thinknessAndSize*vec4(position,1.);\\r\\n    \\r\\n}\"","export default \"uniform float uSize;\\r\\nuniform float uThinkness;\\r\\nuniform float uGap;\\r\\nuniform float uAspect;\\r\\n\\r\\nmat4 scale(float x,float y,float z)\\r\\n{\\r\\n    return mat4(\\r\\n        x,0,0,0,\\r\\n        0,y,0,0,\\r\\n        0,0,z,0,\\r\\n        0,0,0,1\\r\\n    );\\r\\n}\\r\\n\\r\\nmat4 translate(float x,float y,float z)\\r\\n{\\r\\n    return mat4(\\r\\n        1,0,0,0,\\r\\n        0,1,0,0,\\r\\n        0,0,1,0,\\r\\n        x,y,z,1\\r\\n    );\\r\\n}\\r\\n\\r\\nmat4 makeRotationZ(float angle)\\r\\n{\\r\\n    return mat4(\\r\\n        cos(angle),-sin(angle),0,0,\\r\\n        sin(angle),cos(angle),0,0,\\r\\n        0,0,1,0,\\r\\n        0,0,0,1\\r\\n    );\\r\\n}\\r\\n\\r\\nvoid main(){\\r\\n    \\r\\n    mat4 withoutAspect=scale(1.,uAspect,1.);// 缩放y轴, 去除浏览器aspect影响\\r\\n    mat4 thinknessAndSize=scale(uThinkness,uSize,1.);// 应用长短粗细\\r\\n    mat4 crossIndex=translate(0.,-uSize/2.,0.);// 向上位移1个准星长度\\r\\n    mat4 crossGap=translate(0.,-uGap,0.);// gap变换\\r\\n    \\r\\n    // projectionMatrix*viewMatrix*modelMatrix*vec4(position,1.); // 由于使用了正交相机因此不用mvp\\r\\n    gl_Position=crossGap*crossIndex*thinknessAndSize*vec4(position,1.);\\r\\n    \\r\\n}\\r\\n\"","export default \"uniform float uSize;\\r\\nuniform float uThinkness;\\r\\nuniform float uGap;\\r\\nuniform float uAspect;\\r\\n\\r\\nmat4 scale(float x,float y,float z)\\r\\n{\\r\\n    return mat4(\\r\\n        x,0,0,0,\\r\\n        0,y,0,0,\\r\\n        0,0,z,0,\\r\\n        0,0,0,1\\r\\n    );\\r\\n}\\r\\n\\r\\nmat4 translate(float x,float y,float z)\\r\\n{\\r\\n    return mat4(\\r\\n        1,0,0,0,\\r\\n        0,1,0,0,\\r\\n        0,0,1,0,\\r\\n        x,y,z,1\\r\\n    );\\r\\n}\\r\\n\\r\\nmat4 makeRotationZ(float angle)\\r\\n{\\r\\n    return mat4(\\r\\n        cos(angle),-sin(angle),0,0,\\r\\n        sin(angle),cos(angle),0,0,\\r\\n        0,0,1,0,\\r\\n        0,0,0,1\\r\\n    );\\r\\n}\\r\\n\\r\\nvoid main(){\\r\\n    \\r\\n    float PI=3.141592653589793;\\r\\n    \\r\\n    mat4 withoutAspect=scale(1./uAspect,uAspect,1.);// 缩放y轴, 去除浏览器aspect影响\\r\\n    mat4 thinknessAndSize=scale(uThinkness,uSize,1.);// 应用长短粗细\\r\\n    mat4 crossLeft=makeRotationZ(-PI/2.);// 左转90\\r\\n    mat4 crossIndex=translate(-uSize/2.,0.,0.);// 向左平移1个准星长度\\r\\n    mat4 crossGap=translate(-uGap,0.,0.);// gap变换\\r\\n    \\r\\n    // projectionMatrix*viewMatrix*modelMatrix*vec4(position,1.); // 由于使用了正交相机因此不用mvp\\r\\n    gl_Position=withoutAspect*crossGap*crossIndex*crossLeft*thinknessAndSize*vec4(position,1.);\\r\\n    \\r\\n}\"","export default \"uniform float uSize;\\r\\nuniform float uThinkness;\\r\\nuniform float uGap;\\r\\nuniform float uAspect;\\r\\n\\r\\nmat4 scale(float x,float y,float z)\\r\\n{\\r\\n    return mat4(\\r\\n        x,0,0,0,\\r\\n        0,y,0,0,\\r\\n        0,0,z,0,\\r\\n        0,0,0,1\\r\\n    );\\r\\n}\\r\\n\\r\\nmat4 translate(float x,float y,float z)\\r\\n{\\r\\n    return mat4(\\r\\n        1,0,0,0,\\r\\n        0,1,0,0,\\r\\n        0,0,1,0,\\r\\n        x,y,z,1\\r\\n    );\\r\\n}\\r\\n\\r\\nmat4 makeRotationZ(float angle)\\r\\n{\\r\\n    return mat4(\\r\\n        cos(angle),-sin(angle),0,0,\\r\\n        sin(angle),cos(angle),0,0,\\r\\n        0,0,1,0,\\r\\n        0,0,0,1\\r\\n    );\\r\\n}\\r\\n\\r\\nvoid main(){\\r\\n    \\r\\n    float PI=3.141592653589793;\\r\\n    \\r\\n    mat4 withoutAspect=scale(1./uAspect,uAspect,1.);// 缩放y轴, 去除浏览器aspect影响\\r\\n    mat4 thinknessAndSize=scale(uThinkness,uSize,1.);// 应用长短粗细\\r\\n    mat4 crossLeft=makeRotationZ(PI/2.);// 左转90\\r\\n    mat4 crossIndex=translate(uSize/2.,0.,0.);// 向右平移1个准星长度\\r\\n    mat4 crossGap=translate(uGap,0.,0.);// gap变换\\r\\n    \\r\\n    // projectionMatrix*viewMatrix*modelMatrix*vec4(position,1.); // 由于使用了正交相机因此不用mvp\\r\\n    gl_Position=withoutAspect*crossGap*crossIndex*crossLeft*thinknessAndSize*vec4(position,1.);\\r\\n    \\r\\n}\"","export default \"uniform vec3 uColor;\\r\\nuniform float uAlpha;\\r\\n\\r\\nvoid main(){\\r\\n    \\r\\n    gl_FragColor=vec4(uColor,uAlpha);\\r\\n    \\r\\n}\"","\r\nimport upVert from '@assets/shaders/crosshair/up.vert?raw' // 上\r\nimport downVert from '@assets/shaders/crosshair/down.vert?raw' // 下\r\nimport leftVert from '@assets/shaders/crosshair/left.vert?raw' // 左\r\nimport rightVert from '@assets/shaders/crosshair/right.vert?raw' // 右\r\nimport crossFrag from '@assets/shaders/crosshair/cross.frag?raw'\r\n\r\nimport { GameContext } from '@src/core/GameContext'\r\nimport { CycleInterface } from '@src/core/inferface/CycleInterface'\r\nimport { BufferAttribute, BufferGeometry, Color, CustomBlending, DoubleSide, Mesh, ShaderMaterial } from 'three'\r\n\r\nconst indexes = new Uint16Array([0, 2, 1, 2, 3, 1]);\r\nconst normals = new Float32Array([0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1]);\r\nconst positions = new Float32Array([-.5, .5, 0, .5, .5, 0, -.5, -.5, 0, .5, -.5, 0]);\r\nconst geom = new BufferGeometry();\r\n\r\n\r\n/**\r\n * 准星显示:\r\n * 1. 定义参数: 颜色,长短,粗细,alpha,中心点,分离度,准星状态\r\n * 2. 在场景中塞4个PlaneMesh, 并用正交相机渲染4个planeMesh\r\n * 3. 定义PlaneMesh的shader, 用GPU计算准星位置并显示\r\n */\r\nexport class CrosshairLayer implements CycleInterface {\r\n\r\n    scene: THREE.Scene;\r\n    camera: THREE.Camera;\r\n\r\n    crossMaterials: THREE.ShaderMaterial[] = [];\r\n\r\n    crosshaircolor = new Color(0, 1, 0); // 颜色\r\n    crosshairsize = .02; // 长短\r\n    crosshairthinkness = .004; // 粗细\r\n    crosshairalpha = .8; // alpha\r\n    crosshairdot = false; // 中心点\r\n    crosshairgap = .01; // 分离度\r\n    crosshairstyle = 4; // 0默认 1默认静态 2经典 3经典动态 4经典静态\r\n\r\n    uniforms: {};\r\n\r\n    init(): void {\r\n        this.scene = GameContext.Scenes.UI;\r\n        this.uniforms = {\r\n            uColor: { value: this.crosshaircolor },\r\n            uSize: { value: this.crosshairsize },\r\n            uThinkness: { value: this.crosshairthinkness },\r\n            uGap: { value: this.crosshairgap },\r\n            uAlpha: { value: this.crosshairalpha },\r\n            uAspect: { value: GameContext.Cameras.PlayerCamera.aspect }\r\n        }\r\n\r\n        const crossMaterial1 = new ShaderMaterial({ uniforms: this.uniforms, vertexShader: upVert, fragmentShader: crossFrag }); // 上\r\n        const crossMaterial2 = new ShaderMaterial({ uniforms: this.uniforms, vertexShader: downVert, fragmentShader: crossFrag }); // 下\r\n        const crossMaterial3 = new ShaderMaterial({ uniforms: this.uniforms, vertexShader: leftVert, fragmentShader: crossFrag }); // 左\r\n        const crossMaterial4 = new ShaderMaterial({ uniforms: this.uniforms, vertexShader: rightVert, fragmentShader: crossFrag }); // 右\r\n\r\n        window.addEventListener('resize', () => { // 找到当前渲染的aspect\r\n            crossMaterial1.uniforms.uAspect.value = GameContext.Cameras.PlayerCamera.aspect;\r\n            crossMaterial2.uniforms.uAspect.value = GameContext.Cameras.PlayerCamera.aspect;\r\n            crossMaterial3.uniforms.uAspect.value = GameContext.Cameras.PlayerCamera.aspect;\r\n            crossMaterial4.uniforms.uAspect.value = GameContext.Cameras.PlayerCamera.aspect;\r\n        });\r\n\r\n        // 定义4个顶点两个三角面\r\n\r\n        geom.setIndex(new BufferAttribute(indexes, 1));\r\n        geom.setAttribute('position', new BufferAttribute(positions, 3));\r\n        geom.setAttribute('normal', new BufferAttribute(normals, 3));\r\n\r\n        const cross1 = new Mesh(geom, crossMaterial1);\r\n        const cross2 = new Mesh(geom, crossMaterial2);\r\n        const cross3 = new Mesh(geom, crossMaterial3);\r\n        const cross4 = new Mesh(geom, crossMaterial4);\r\n\r\n        this.scene.add(cross1);\r\n        this.scene.add(cross2);\r\n        this.scene.add(cross3);\r\n        this.scene.add(cross4);\r\n\r\n        this.crossMaterials.push(crossMaterial1);\r\n        this.crossMaterials.push(crossMaterial2);\r\n        this.crossMaterials.push(crossMaterial3);\r\n        this.crossMaterials.push(crossMaterial4);\r\n\r\n        this.crossMaterials.forEach(item => {\r\n            item.blending = CustomBlending;\r\n            // item.depthTest = THREE.NeverDepth;\r\n            item.side = DoubleSide;\r\n            item.dithering = true;\r\n            item.transparent = true;\r\n        })\r\n\r\n    }\r\n\r\n\r\n    setGap(gapSize: number) {\r\n        if (this.uniforms['uGap']) this.uniforms['uGap'].value = gapSize;\r\n    }\r\n\r\n}","import { GameContext } from '@src/core/GameContext';\r\nimport { CycleInterface } from '@src/core/inferface/CycleInterface';\r\nimport { LoopInterface } from '@src/core/inferface/LoopInterface';\r\nimport { PointLockEventEnum } from '@src/gameplay/abstract/EventsEnum';\r\nimport { DomEventPipe, PointLockEvent } from '@src/gameplay/pipes/DomEventPipe';\r\nimport { LocalPlayer } from '@src/gameplay/player/LocalPlayer';\r\nimport { MathUtils, Vector3 } from 'three';\r\n\r\nlet deltaZUtil = 0;\r\nlet deltaYUtil = 0;\r\n\r\nlet screenMoveX = 0; // 不断记录鼠标移动的距离, 横拉\r\nlet screenMoveY = 0; // 不断记录鼠标移动的距离, 纵拉\r\nlet mouseFloatX = 0.08; // 鼠标横拉导致的相机z轴坐标变化最大值\r\nlet mouseFloatY = 0.12; // 鼠标纵拉导致的相机y轴坐标变化最大值\r\n\r\nlet breathFloatScale = 0.01; // 呼吸导致的相机y轴变化最大值\r\nlet cameraDefaultPosition = new Vector3();\r\n\r\n// breath   -1, 1   - breathFloatScale, breathFloatScale\r\n// screenMoveX   -256, 256   -mouseFloatX, mouseFloatX\r\n// screenMoveY   -256, 256   -mouseFloatY, mouseFloatY\r\n\r\n/**\r\n * 手部模型动画\r\n */\r\nexport class HandModelLayer implements CycleInterface, LoopInterface {\r\n\r\n    scene: THREE.Scene;\r\n    camera: THREE.PerspectiveCamera;\r\n    localPlayer: LocalPlayer = LocalPlayer.getInstance();\r\n    animationMixer: THREE.AnimationMixer;\r\n\r\n    init(): void {\r\n        this.scene = GameContext.Scenes.Handmodel;\r\n        DomEventPipe.addEventListener(PointLockEvent.type, function (e: CustomEvent) { // 监听自定义的 pointlock.mousemove 事件\r\n            if (e.detail.enum === PointLockEventEnum.MOUSEMOVE) {\r\n                screenMoveX = MathUtils.clamp(screenMoveX + e.detail.movementX, -256, 256);\r\n                screenMoveY = MathUtils.clamp(screenMoveY + e.detail.movementY, -256, 256);\r\n            }\r\n        })\r\n        this.initCameraStatus(); // 初始化相机位置\r\n        this.addHandMesh(); // 加载手模型\r\n    }\r\n\r\n    callEveryFrame(deltaTime?: number, elapsedTime?: number): void {\r\n        if (this.animationMixer) this.animationMixer.update(deltaTime);\r\n        if (!GameContext.PointLock.isLocked) return;\r\n\r\n        // 工具变量\r\n        deltaZUtil = 0;\r\n        deltaYUtil = 0;\r\n\r\n        // 1. 拉动瞄准位置带来的惯性 (浏览器大概每秒输出70次鼠标变化的事件)\r\n        const cameraDeltaZ = MathUtils.mapLinear(screenMoveX, -256, 256, -mouseFloatX, mouseFloatX);\r\n        deltaZUtil += cameraDeltaZ;\r\n\r\n        const cameraDeltaY = MathUtils.mapLinear(screenMoveY, -256, 256, -mouseFloatY, mouseFloatY);\r\n        deltaYUtil += cameraDeltaY;\r\n\r\n        // 2. 呼吸带来的模型上下浮动, 由于只渲染模型和枪支, 因此移动模型就是相对于移动相机\r\n        const sinDeltaTime = (Math.sin(elapsedTime) + 1) / 2;\r\n        const breathDelta = MathUtils.lerp(-breathFloatScale, breathFloatScale, sinDeltaTime);\r\n        deltaYUtil += breathDelta;\r\n\r\n        // 3. 改变增量值\r\n        this.camera.position.z = cameraDefaultPosition.z + deltaZUtil;\r\n        this.camera.position.y = cameraDefaultPosition.y - deltaYUtil;\r\n\r\n        // 实时递减变量 screenMoveX, screenMoveY\r\n        const base = deltaTime;\r\n        if (screenMoveX > 0) screenMoveX = Math.min(0, screenMoveX - base);\r\n        else if (screenMoveX < 0) screenMoveX = Math.max(0, screenMoveX + base);\r\n        if (screenMoveY > 0) screenMoveY = Math.min(0, screenMoveY - base);\r\n        else if (screenMoveY < 0) screenMoveY = Math.max(0, screenMoveY + base);\r\n    }\r\n\r\n\r\n    /** 初始化手模型的相机位置(和blender一致) */\r\n    initCameraStatus() {\r\n        this.camera = GameContext.Cameras.HandModelCamera;\r\n        this.camera.clearViewOffset();\r\n        this.camera.near = 0.001;\r\n        this.camera.far = 999;\r\n        this.camera.fov = 70; // 60 ~ 80\r\n        this.camera.scale.z = 1.5; // 1 ~ 1.6\r\n        this.camera.position.set(-1.6, 1.4, 0);\r\n        cameraDefaultPosition.copy(this.camera.position);\r\n        this.camera.rotation.y = - Math.PI / 2;\r\n    }\r\n\r\n\r\n    /** 添加手模型 */\r\n    addHandMesh() {\r\n        const armature = GameContext.GameResources.resourceMap.get('Armature') as THREE.Object3D;\r\n        const arms = GameContext.GameResources.resourceMap.get('Arms') as THREE.SkinnedMesh;\r\n        arms.material = this.localPlayer.roleMaterial;\r\n        arms.frustumCulled = false;\r\n        this.animationMixer = GameContext.GameResources.resourceMap.get('AnimationMixer') as THREE.AnimationMixer;\r\n        arms.visible = true;\r\n        this.scene.add(armature);\r\n        this.scene.add(arms);\r\n    }\r\n\r\n}","export default \"\\r\\nattribute float generTime;\\r\\nattribute float rand;\\r\\n\\r\\nuniform float uTime;\\r\\nuniform float uScale;\\r\\n\\r\\nvarying float vElapsed;\\r\\nvarying float vRand;\\r\\n\\r\\nvoid main(){\\r\\n    \\r\\n    float elapsed=uTime-generTime;\\r\\n    vElapsed=elapsed;\\r\\n    vRand=rand;\\r\\n    \\r\\n    float randFactor=.5+.5*rand;\\r\\n    float speedFactor=2.;\\r\\n    float powerFactorVert=2.*randFactor;\\r\\n    float powerFactorHorize=1.2*randFactor;\\r\\n    \\r\\n    vec3 rightVelocity=powerFactorHorize*vec3(0.,0.,1.);// 向右\\r\\n    vec3 upVelocity=powerFactorVert*vec3(0.,1.,0);// 向上\\r\\n    vec3 downVelcity=vec3(0,-9.8,-0);// 向下\\r\\n    \\r\\n    vec3 position1=position;\\r\\n    position1+=speedFactor*rightVelocity*elapsed;// 左右分量\\r\\n    position1+=speedFactor*(upVelocity*elapsed+.5*downVelcity*elapsed*elapsed);// 上下分量\\r\\n    \\r\\n    gl_Position=projectionMatrix*viewMatrix*modelMatrix*vec4(position1,1.);\\r\\n    \\r\\n    gl_PointSize=32.*uScale;\\r\\n    gl_PointSize*=(.8+.2*rand);\\r\\n    vec4 viewPosition=viewMatrix*vec4(position,1.);\\r\\n    gl_PointSize*=(1./-viewPosition.z);// 点大小受到距离远近影响\\r\\n    \\r\\n}\"","export default \"\\r\\nuniform sampler2D uBulletShellT;\\r\\nuniform float uDisapperTime;\\r\\n\\r\\nvarying float vElapsed;\\r\\nvarying float vRand;\\r\\n\\r\\nmat4 makeRotationZ(float theta)\\r\\n{\\r\\n    return mat4(\\r\\n        cos(theta),-sin(theta),0,0,\\r\\n        sin(theta),cos(theta),0,0,\\r\\n        0,0,1,0,\\r\\n        0,0,0,1\\r\\n    );\\r\\n}\\r\\n\\r\\nfloat pcurve(float x,float a,float b)\\r\\n{\\r\\n    float k=pow(a+b,a+b)/(pow(a,a)*pow(b,b));\\r\\n    return k*pow(x,a)*pow(1.-x,b);\\r\\n}\\r\\n\\r\\nvoid main(){\\r\\n    \\r\\n    if(uDisapperTime>.4){\\r\\n        discard;\\r\\n    }\\r\\n    \\r\\n    // 旋转\\r\\n    float rotateRandomFactor=pcurve(vElapsed/uDisapperTime,vRand,vElapsed);\\r\\n    vec4 randRotate=makeRotationZ(vRand*3.1415926+rotateRandomFactor)*vec4(gl_PointCoord-vec2(.5),0.,1.);// gl.POINTS, (left,top):(0,0) (right, bottom): (1, 1)\\r\\n    vec4 colorFromT=texture2D(uBulletShellT,randRotate.xy+vec2(.5));// matrix 是用(0, 0)点做中心点进行旋转的\\r\\n    \\r\\n    // 不旋转\\r\\n    // vec4 temp=texture2D(uBulletShellT,gl_PointCoord);\\r\\n    \\r\\n    gl_FragColor=colorFromT;\\r\\n    \\r\\n}\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABgFBMVEUAAAAkJBwnJx4qKiE1NSktLSM3NysyMiY9PS87Oy4wMCabmns5OS1AQTMwMCU+PjGSkHFpaVVGRjpYWEWEhGhISDgzMycxMSdqaVM3Nys5OTEoKB8mJh5fX0svLycUFA8dHRYREQ4QEA0KCgh3dlygn32JiGs+PTHBv6S6uJ6zsZejooyVlH2JiHZ2dWJsbF5XV0l5eF9jYkxxcFk3NypWVkMpKR9MTENhYUxOTj0hIRlZWUZBQTMoKCAwMCcjIxsrKyEZGRM9PTYcHBZXV0RGRjdPTz4cHBY5OS0jIxsLCwkQEA0KCgjBv5vSz6nIxZ+dm36HhmpUVEKqqIZ1dV53dl7AvperqYeEg2h0c1thYExdXEhQUD+zsIuqp4aopoWUknOLiWyGhGpmZlBjY07Gwpm8upefnn9gYExeXUpSUkFRUUDV0qvNy6PKx6DDwZ/Gw5y1soyjooimpIGBgGd6eWHIxqa9u5+4tZKwroiXlXiGhXF8e2Fvb1hZWUlOTj6dvx0qAAAATXRSTlMAsbCw5LDk5OPjsf3u5eTj/Pz7+eno5NfMyce3paOZlo6BcVX6+fnv7u7u7u7u7u7t6eno5+Lc2czLy8nAv7y1s7GrqKKgn5+WgGtgQ5N14WIAAAEpSURBVDjLY6AikJMy0NPR0tDU1tU3d8KmgJmnrjQgray8qFpQSAqbAmme6JJ4f7/8opJMdTusCkyiI8Jzc/LTS4PYHLApYGQBKsjL8Q0IDWJjxqaAiS06ItjfD7+CeHwKmDkzI+KACtJDg1iYcChIIqAgA6wgIDRLDKcCsCNDstkZyVLAyhEVGA5WEEO5Aj6cCoIJKsBvRUpgcEFuGndINvZwYOUHKvDNq6iKzMIeklz8KYnxYQWFCZFBOBTwJgMVpMbiVRBMSEEcWEEWOyMONwQWp4VVCtTWYw8HGXHhGu7YwuLAZCEzZ2wKFGxFBdW4VQVUhHms5LEpUHKXNDUWETE0EhV3VMSmQFlRxsZaQsLCUtJe3gubAh9vTw83WVkXVzkFJWUS8jQAPttaQ4x+UukAAAAASUVORK5CYII=\"","import bulletShellVert from '@assets/shaders/bullet/shell/bulletshell.vert?raw';\r\nimport bulletShellFrag from '@assets/shaders/bullet/shell/bulletshell.frag?raw';\r\n\r\nimport bulletshellTexture from '@assets/textures/bullet.shell.png';\r\nimport { GameContext } from '@src/core/GameContext';\r\nimport { CycleInterface } from '../../core/inferface/CycleInterface';\r\nimport { LoopInterface } from '../../core/inferface/LoopInterface';\r\nimport { GameLogicEventPipe, WeaponEquipEvent } from '../../gameplay/pipes/GameLogicEventPipe';\r\nimport { LayerEventPipe, ShotOutWeaponFireEvent } from '../../gameplay/pipes/LayerEventPipe';\r\nimport { BufferAttribute, BufferGeometry, CustomBlending, Points, ShaderMaterial, Texture, Vector3 } from 'three';\r\n\r\n// 材质\r\n\r\nconst image = new Image();\r\nconst texture = new Texture(image);\r\nimage.src = bulletshellTexture;\r\nimage.onload = () => { texture.needsUpdate = true; }\r\n\r\n// 工具变量\r\n\r\nconst array3Util: Array<number> = new Array<number>(3);\r\nconst array1Util: Array<number> = new Array<number>(1);\r\nconst chamberPositionUtil = new Vector3(); // 弹膛位置\r\n\r\n/**\r\n * 开枪子弹壳从弹舱中弹出,掉落到地面并且反弹起来\r\n * 需要的参数: 玩家位置, 当前弹舱的相对位置, \r\n */\r\nexport class ChamberBulletShell implements CycleInterface, LoopInterface {\r\n\r\n    scene: THREE.Scene;\r\n    camera: THREE.Camera;\r\n\r\n    ifRender: boolean = false; // 是否渲染该层\r\n\r\n    maximun: number = 10; // 最大产生弹壳贴图的数量\r\n\r\n    bulletShellOpacity: number = 1.; // 弹孔透明度\r\n    bulletShellScale: number = 1.2; // 弹孔大小\r\n    bulletShellDisappearTime: number = .4; // 弹孔存在时间(多少秒后开始渐变消失) Math.sqrt(1.8/9.8) 约等于0.4 \r\n\r\n    bulletShellsGeometry = new BufferGeometry();\r\n    bulletShellsMaterial = new ShaderMaterial({\r\n        uniforms: {\r\n            uTime: { value: -20 },\r\n            uDisapperTime: { value: this.bulletShellDisappearTime },\r\n            uScale: { value: this.bulletShellScale },\r\n            uOpacity: { value: this.bulletShellOpacity },\r\n            uBulletShellT: { value: texture },\r\n        },\r\n        blending: CustomBlending,\r\n        vertexShader: bulletShellVert,\r\n        fragmentShader: bulletShellFrag,\r\n        // depthTest: THREE.NeverDepth, // 只会渲染到本地画面,不启用深度检测\r\n    });\r\n\r\n    positionFoat32Array: Float32Array; // 击中三角面的点位置\r\n    generTimeFLoat32Array: Float32Array; // 生成该弹壳的时间\r\n    randFoat32Array: Float32Array; // 随机种子\r\n\r\n    positionBufferAttribute: THREE.BufferAttribute;\r\n    generTimeBufferAttribute: THREE.BufferAttribute;\r\n    randBufferAttribute: THREE.BufferAttribute;\r\n\r\n    bulletShellIndex: number = 0;\r\n\r\n    init(): void {\r\n\r\n        // 绑定指针\r\n        this.scene = GameContext.Scenes.Handmodel;\r\n        this.camera = GameContext.Cameras.HandModelCamera;\r\n\r\n        // 添加弹点精灵\r\n        const bulletShells = new Points(this.bulletShellsGeometry, this.bulletShellsMaterial);\r\n        bulletShells.frustumCulled = false; // 不管如何都会渲染\r\n        this.scene.add(bulletShells);\r\n\r\n        // 初始化buffers\r\n        this.initBuffers();\r\n\r\n        // 监听当前装备武器的弹舱位置\r\n        GameLogicEventPipe.addEventListener(WeaponEquipEvent.type, (e: CustomEvent) => {\r\n            const _weaponInstance = WeaponEquipEvent.detail.weaponInstance;\r\n            if (_weaponInstance && _weaponInstance.chamberPosition) {\r\n                this.ifRender = true;\r\n                chamberPositionUtil.copy(_weaponInstance.chamberPosition);\r\n            } else this.ifRender = false;\r\n\r\n        })\r\n\r\n        // 监听开火事件\r\n        LayerEventPipe.addEventListener(ShotOutWeaponFireEvent.type, (e: CustomEvent) => {\r\n            if (this.ifRender) this.render();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 初始化buffers\r\n     */\r\n    initBuffers() {\r\n\r\n        // 生成 array buffer\r\n\r\n        this.positionFoat32Array = new Float32Array(new ArrayBuffer(4 * 3 * this.maximun));\r\n        this.generTimeFLoat32Array = new Float32Array(new ArrayBuffer(4 * this.maximun));\r\n        this.randFoat32Array = new Float32Array(new ArrayBuffer(4 * this.maximun));\r\n\r\n        for (let i = 0; i < this.maximun; i++) { // 默认初始化时所有弹点都不显示, 给他们赋予生成时间为-10s\r\n            array1Util[0] = -10;\r\n            this.generTimeFLoat32Array.set(array1Util, i);\r\n        }\r\n\r\n        // 生成 BufferAttribute\r\n\r\n        this.positionBufferAttribute = new BufferAttribute(this.positionFoat32Array, 3);\r\n        this.generTimeBufferAttribute = new BufferAttribute(this.generTimeFLoat32Array, 1);\r\n        this.randBufferAttribute = new BufferAttribute(this.randFoat32Array, 1);\r\n\r\n        // 指定 BufferAttribute\r\n\r\n        this.bulletShellsGeometry.setAttribute('position', this.positionBufferAttribute);\r\n        this.bulletShellsGeometry.setAttribute('generTime', this.generTimeBufferAttribute);\r\n        this.bulletShellsGeometry.setAttribute('rand', this.randBufferAttribute);\r\n\r\n    }\r\n\r\n    /** \r\n     * 添加弹壳\r\n     */\r\n    render() {\r\n\r\n        // 弹舱位置\r\n\r\n        this.positionFoat32Array.set(chamberPositionUtil.toArray(array3Util, 0), this.bulletShellIndex * 3);\r\n        this.positionBufferAttribute.needsUpdate = true;\r\n\r\n        // 弹壳生成时间\r\n\r\n        array1Util[0] = GameContext.GameLoop.Clock.getElapsedTime();\r\n        this.generTimeFLoat32Array.set(array1Util, this.bulletShellIndex);\r\n        this.generTimeBufferAttribute.needsUpdate = true;\r\n\r\n        // 弹壳随机种子\r\n\r\n        const random = Math.random();\r\n        array1Util[0] = random;\r\n        this.randFoat32Array.set(array1Util, this.bulletShellIndex);\r\n        this.randBufferAttribute.needsUpdate = true;\r\n\r\n        // 更新index\r\n\r\n        if (this.bulletShellIndex + 1 >= this.maximun) this.bulletShellIndex = 0; // 如果index+1超过了设置最大显示弹点的上限,那么就从0开始重新循环\r\n        else this.bulletShellIndex += 1;\r\n\r\n    }\r\n\r\n    callEveryFrame(deltaTime?: number, elapsedTime?: number): void {\r\n\r\n        this.bulletShellsMaterial.uniforms.uTime.value = elapsedTime; // 跟新当前时间\r\n\r\n    }\r\n\r\n}","export default \"uniform float uTime;\\r\\nuniform float uSpeed;\\r\\n\\r\\nattribute float generTime;\\r\\nattribute float rand;\\r\\nattribute vec3 direction;\\r\\n\\r\\nvarying float vElapsed;\\r\\nvarying float vRand;\\r\\n\\r\\nvec3 upperDirection=vec3(0,1,0);\\r\\n\\r\\nfloat almostIdentity(float x,float n)\\r\\n{\\r\\n    return sqrt(x*x+n);\\r\\n}\\r\\n\\r\\nvoid main(){\\r\\n    \\r\\n    // 传递变量\\r\\n    \\r\\n    float elapsed=uTime-generTime;\\r\\n    vElapsed=elapsed;\\r\\n    vRand=rand;\\r\\n    \\r\\n    // 计算位置(烟雾处于运动状态)\\r\\n    \\r\\n    vec3 position1=position;\\r\\n    position1+=direction*uSpeed*elapsed;// S = v*t\\r\\n    position1+=upperDirection*elapsed*(rand*.3+.1);\\r\\n    \\r\\n    gl_Position=projectionMatrix*viewMatrix*modelMatrix*vec4(position1,1.);\\r\\n    \\r\\n    gl_PointSize=512.;// 烟雾基础大小\\r\\n    gl_PointSize*=.3*rand+.7;// 烟雾大小需要添加一些随机值看上去更加真实\\r\\n    gl_PointSize*=almostIdentity(elapsed,1.);// 烟雾扩散(增大点大小)\\r\\n    vec4 positionViewCoord=viewMatrix*modelMatrix*vec4(position1,1.);\\r\\n    gl_PointSize*=(1./-positionViewCoord.z);// 点大小受到距离远近影响\\r\\n    \\r\\n}\"","export default \"\\r\\nuniform sampler2D uSmokeT;\\r\\nuniform float uOpacityFactor;\\r\\n\\r\\nuniform float uDisappearTime;\\r\\nuniform float uFadeTime;\\r\\n\\r\\nvarying float vElapsed;\\r\\nvarying float vRand;\\r\\n\\r\\n// 我感觉该函数作为淡入淡出的函数非常不错\\r\\nfloat pcurve(float x,float a,float b)\\r\\n{\\r\\n    float k=pow(a+b,a+b)/(pow(a,a)*pow(b,b));\\r\\n    return k*pow(x,a)*pow(1.-x,b);\\r\\n}\\r\\n\\r\\nmat4 makeRotationZ(float theta)\\r\\n{\\r\\n    return mat4(\\r\\n        cos(theta),-sin(theta),0,0,\\r\\n        sin(theta),cos(theta),0,0,\\r\\n        0,0,1,0,\\r\\n        0,0,0,1\\r\\n    );\\r\\n}\\r\\n\\r\\nvoid main(){\\r\\n    \\r\\n    // shader优化\\r\\n    \\r\\n    if(vElapsed>uDisappearTime+uFadeTime){discard;}\\r\\n    \\r\\n    vec4 temp=vec4(1.);\\r\\n    \\r\\n    // 旋转后取出贴图基本色\\r\\n    \\r\\n    vec2 pointCoord=gl_PointCoord;\\r\\n    pointCoord=pointCoord-vec2(.5);\\r\\n    vec4 randRotate=makeRotationZ(vRand*3.14)*vec4(pointCoord,0.,1.);\\r\\n    vec4 colorFromT=texture2D(uSmokeT,randRotate.xy+vec2(.5));\\r\\n    temp=colorFromT;\\r\\n    \\r\\n    // 淡入淡出\\r\\n    \\r\\n    float fadeFactor=pcurve(vElapsed,uDisappearTime,uFadeTime);\\r\\n    \\r\\n    gl_FragColor=vec4(temp.rgb,temp.a*uOpacityFactor*fadeFactor);\\r\\n    // gl_FragColor=vec4(vec3(1.),fadeFactor);\\r\\n    \\r\\n}\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAmVBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VHQRUAAAAM3RSTlMABAcxLAsTXFdSI01IDjk1QxdgG4gnaGRsQIOYPX8fjHBzepCclKWgqne0ua6xvcLGytKIhcH1AAAacElEQVR42sSVy07FMAxEG7+ETJyHrCwqRfn/z8RhgWAB3IJ0a6lZtAuPz4yb41ql48ZKwJCibhMBZpIONjhuKhHpBtbtLiO2AO9d1fgWBdx1DKzkuoSP55ctqpUItS8VeDqCZLIqIQUEpdHt2QIg2W49VJXCB+r86OJAHADGDP/Cbwfs7u60wgFClfTIb8N2aAHE+hrE/8m/MztWkpHRbNFQ59/aJxNRUleLAbgTDvurcQDmYhoCVskNg4CL/4wgWbRlYF++lrAsQtzYeme7ukIS+FbfAlRHy3kWpCVd4Ef48X27z6rejb3mk9BNCesSu5R+HwGcaGkpNDC3NoMEKQN8Dz/om7j2bf1wd6NWmlLB0F6qX9ph8/UeeyqzlllanrUiDZIvAj5fUCAW5MW7YvCnSvUs7SzzPHMZGi9QLmQhiet76uM5Y/j5MrXijoF8vhQTc/qAv21XDQk4FrXXHNO/xhnwCs5CMY88DuCN8jLbjRSGguh023jHC4wxjgiJWpqH/P8PzjHRSPMYnKizNPiWq+rWbYorKwJg5hr7IWS3HTZELbjpv/qYbvr++VC1crl0Ra0QJ2zTtgdjQ7AhZWPiCoD55/5XihGcqC1ThnyaAE5Fco7//4uoa0yspPMYlvPqYCBF2k9wW9d6UJ/QzpoADFGEKM8fC0CCzcqJo8eEht3aLp1gwUhR36yjxAObwIqr60zDnWdB/oppgvfGcCeacTsHwEYJC0836iu2lMP2R4ydDQEgvwGsSk3XRWWYRIbQk2DrVThsT8PGwPW22SSOxIo9nmwUcVO58QmIZudMgg3ogCNDqTxrEiBCYuShS0WwvUpvcw5cBTTI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\"","import { Vector3 } from 'three';\r\nimport { GameContext } from '@src/core/GameContext';\r\nimport { GameLogicEventPipe, WeaponEquipEvent } from '@src/gameplay/pipes/GameLogicEventPipe';\r\n\r\nconst v3Util = new Vector3();\r\n\r\nconst cameraLookAt = new Vector3(0, 0, -1); // default camera lookAt\r\nconst cameraUp = new Vector3(0, 1, 0); // default camera up\r\n\r\nconst chamberPositionUtil = new Vector3();\r\nconst muzzlePositionUtil = new Vector3();\r\n\r\n/**\r\n * 监听武器切换事件并动态获取当前切换武器的弹膛/枪口在blender坐标中的位置;\r\n * 提供两个api分别可以动态计算出当前武器的弹膛/枪口位置 经过手部模型渲染层位置转换后 在 当前项目中的世界位置;  \r\n * \r\n * 分别用于:\r\n * 1. 弹膛位置: 每次开枪时, 在世界位置放出烟雾特效\r\n * 2. 枪口位置: 曳光弹的初始位置\r\n */\r\nexport class WeaponComponentsPositionUtil {\r\n\r\n    static instance: WeaponComponentsPositionUtil;\r\n    public static getInstance() {\r\n        if (!WeaponComponentsPositionUtil.instance) WeaponComponentsPositionUtil.instance = new WeaponComponentsPositionUtil();\r\n        return WeaponComponentsPositionUtil.instance;\r\n    }\r\n    handModelCamera: THREE.PerspectiveCamera = GameContext.Cameras.HandModelCamera; // 获取当前手模相机的位置\r\n    playerCamera = GameContext.Cameras.PlayerCamera;\r\n\r\n    chamberFrontDelta: number = 0;\r\n    chamberRightDelta: number = 0;\r\n    chamberDownDelta: number = 0;\r\n\r\n    muzzleFrontDelta: number = 0;\r\n    muzzleRightDelta: number = 0;\r\n    muzzleDownDelta: number = 0;\r\n\r\n    frontDirection = new Vector3();\r\n    rightDirection = new Vector3();\r\n    downDirection = new Vector3();\r\n\r\n    private constructor() {\r\n\r\n        // 计算出手部模型中枪膛位置转换到需要渲染场景的世界位置\r\n        GameLogicEventPipe.addEventListener(WeaponEquipEvent.type, (e: CustomEvent) => { // 监听当前武器切换事件\r\n            const _weaponInstance = WeaponEquipEvent.detail.weaponInstance;\r\n            if (_weaponInstance && _weaponInstance.chamberPosition) { // 如果存在更换的武器实例,判断是否有弹膛位置\r\n                v3Util.copy(_weaponInstance.chamberPosition); // 如果有弹膛位置就获取一下弹膛位置\r\n                // 然后更新一下弹膛和枪口位置\r\n                this.chamberFrontDelta = v3Util.x - this.handModelCamera.position.x;\r\n                this.chamberRightDelta = v3Util.z - this.handModelCamera.position.z;\r\n                this.chamberDownDelta = v3Util.y - this.handModelCamera.position.y;\r\n            }\r\n\r\n            // 枪口位置\r\n            if (_weaponInstance && _weaponInstance.muzzlePosition) {\r\n                v3Util.copy(_weaponInstance.muzzlePosition);\r\n                this.muzzleFrontDelta = v3Util.x - this.handModelCamera.position.x;\r\n                this.muzzleRightDelta = v3Util.z - this.handModelCamera.position.z;\r\n                this.muzzleDownDelta = v3Util.y - this.handModelCamera.position.y;\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 动态计算弹膛位置\r\n     * @returns 弹膛位置\r\n     */\r\n    public calculateChamberPosition(): THREE.Vector3 {\r\n\r\n        // 在切枪事件中已经确定了如下变量: frontDelta, rightDelta, downDelta;\r\n\r\n        // 计算方向 frontDirection, rightDirection, downDirection\r\n\r\n        v3Util.copy(cameraLookAt);\r\n        v3Util.applyEuler(this.playerCamera.rotation);\r\n        v3Util.normalize();\r\n        this.frontDirection.copy(v3Util);\r\n\r\n        v3Util.copy(cameraUp);\r\n        v3Util.applyEuler(this.playerCamera.rotation);\r\n        v3Util.normalize();\r\n        this.downDirection.copy(v3Util);\r\n\r\n        v3Util.copy(this.frontDirection);\r\n        v3Util.cross(this.downDirection);\r\n        v3Util.normalize();\r\n        this.rightDirection.copy(v3Util);\r\n\r\n        // 渲染位置\r\n\r\n        chamberPositionUtil.copy(this.playerCamera.position);\r\n        chamberPositionUtil.addScaledVector(this.frontDirection, this.chamberFrontDelta); // 向前\r\n        chamberPositionUtil.addScaledVector(this.rightDirection, this.chamberRightDelta); // 右方\r\n        chamberPositionUtil.addScaledVector(this.downDirection, this.chamberDownDelta); // 下方\r\n\r\n        return chamberPositionUtil;\r\n\r\n    }\r\n\r\n    /**\r\n     * 动态计算枪口位置\r\n     * @returns 枪口位置\r\n     */\r\n    public calculateMuzzlePosition(): THREE.Vector3 {\r\n\r\n        // 在切枪事件中已经确定了如下变量: frontDelta, rightDelta, downDelta;\r\n\r\n        // 计算方向 frontDirection, rightDirection, downDirection\r\n\r\n        v3Util.copy(cameraLookAt);\r\n        v3Util.applyEuler(this.playerCamera.rotation);\r\n        v3Util.normalize();\r\n        this.frontDirection.copy(v3Util);\r\n\r\n        v3Util.copy(cameraUp);\r\n        v3Util.applyEuler(this.playerCamera.rotation);\r\n        v3Util.normalize();\r\n        this.downDirection.copy(v3Util);\r\n\r\n        v3Util.copy(this.frontDirection);\r\n        v3Util.cross(this.downDirection);\r\n        v3Util.normalize();\r\n        this.rightDirection.copy(v3Util);\r\n\r\n        // 渲染位置\r\n\r\n        muzzlePositionUtil.copy(this.playerCamera.position);\r\n        muzzlePositionUtil.addScaledVector(this.frontDirection, this.muzzleFrontDelta); // 向前\r\n        muzzlePositionUtil.addScaledVector(this.rightDirection, this.muzzleRightDelta); // 右方\r\n        muzzlePositionUtil.addScaledVector(this.downDirection, this.muzzleDownDelta); // 下方\r\n\r\n        return muzzlePositionUtil;\r\n\r\n    }\r\n\r\n}","\r\n\r\nimport { GameContext } from '@src/core/GameContext'\r\n\r\nimport chamberSmokeVert from '@assets/shaders/chamber/smoke.vert?raw'\r\nimport chamberSmokeFrag from '@assets/shaders/chamber/smoke.frag?raw'\r\n\r\n\r\nimport smokeTexture from '@assets/textures/smoke.png';\r\nimport { CycleInterface } from '@src/core/inferface/CycleInterface';\r\nimport { LoopInterface } from '@src/core/inferface/LoopInterface';\r\nimport { WeaponComponentsPositionUtil } from '@src/core/lib/WeaponComponentsPositionUtil';\r\nimport { GameLogicEventPipe, WeaponEquipEvent } from '@src/gameplay/pipes/GameLogicEventPipe';\r\nimport { LayerEventPipe, ShotOutWeaponFireEvent } from '@src/gameplay/pipes/LayerEventPipe';\r\nimport { AdditiveBlending, BufferAttribute, BufferGeometry, Camera, Points, Scene, ShaderMaterial, Texture } from 'three';\r\n\r\nconst image = new Image();\r\nconst texture = new Texture(image);\r\nimage.src = smokeTexture;\r\nimage.onload = () => { texture.needsUpdate = true; }\r\n\r\n// 工具变量\r\n\r\nconst array3Util: Array<number> = new Array<number>(3);\r\nconst array1Util: Array<number> = new Array<number>(1);\r\n/**\r\n * 武器开火烟雾效果\r\n */\r\nexport class ChamberSmokeLayer implements CycleInterface, LoopInterface {\r\n\r\n    ifRender: boolean = false;\r\n\r\n    scene: Scene;\r\n    camera: Camera;\r\n    handModelCamera: Camera;\r\n\r\n    maximun: number = 20 * 2; // 最大产生弹壳贴图的数量\r\n\r\n    weaponComponentsPositionUtil: WeaponComponentsPositionUtil;\r\n\r\n    chamberSmokeOpacityFactor: number = .1; // 透明度\r\n    chamberSmokeDisapperTime: number = 1.; // 消散时间\r\n    chamberSmokeFadeTime: number = 1.5; // 消散渐变时间\r\n    chamberSmokeScale: number = 1.5; // 弹孔大小\r\n    chamberSmokeSpeed: number = .2; // 烟雾运动速度\r\n    chamberSmokeDisappearTime: number = .4; // 弹孔存在时间(多少秒后开始渐变消失) Math.sqrt(1.8/9.8) 约等于0.4 \r\n\r\n    chamberSmokeGeometry: BufferGeometry = new BufferGeometry();\r\n    chamberSmokeSM: ShaderMaterial = new ShaderMaterial({\r\n        transparent: true,\r\n        blending: AdditiveBlending,\r\n        uniforms: {\r\n            uTime: { value: 0. },\r\n            uSmokeT: { value: texture },\r\n            uOpacityFactor: { value: this.chamberSmokeOpacityFactor },\r\n            uDisappearTime: { value: this.chamberSmokeDisapperTime },\r\n            uSpeed: { value: this.chamberSmokeSpeed },\r\n            uFadeTime: { value: this.chamberSmokeFadeTime },\r\n            uScale: { value: this.chamberSmokeScale },\r\n            uDisapperTime: { value: this.chamberSmokeDisappearTime },\r\n        },\r\n        // depthTest: NeverDepth,\r\n        depthWrite: false, // 目的是在进行深度检测时自己不会影响自己\r\n        vertexShader: chamberSmokeVert,\r\n        fragmentShader: chamberSmokeFrag,\r\n    });\r\n\r\n    positionFoat32Array: Float32Array; // 击中三角面的点位置\r\n    directionFloat32Array: Float32Array; // 烟雾运动方向\r\n    generTimeFLoat32Array: Float32Array; // 生成该弹壳的时间\r\n    randFoat32Array: Float32Array; // 随机种子\r\n\r\n    positionBufferAttribute: BufferAttribute;\r\n    directionBufferAttribute: BufferAttribute;\r\n    generTimeBufferAttribute: BufferAttribute;\r\n    randBufferAttribute: BufferAttribute;\r\n\r\n    chamberSmokeIndex: number = 0;\r\n\r\n    init(): void {\r\n\r\n        this.scene = GameContext.Scenes.Sprites;\r\n        this.camera = GameContext.Cameras.PlayerCamera\r\n        this.handModelCamera = GameContext.Cameras.HandModelCamera;\r\n\r\n        // 添加弹点精灵\r\n\r\n        const chamberSmokes = new Points(this.chamberSmokeGeometry, this.chamberSmokeSM);\r\n        chamberSmokes.frustumCulled = false; // 不管如何都会渲染\r\n        this.scene.add(chamberSmokes);\r\n\r\n        // 初始化buffers\r\n\r\n        this.initBuffers();\r\n\r\n        // 当前装备武器的弹舱位置\r\n\r\n        this.listenChamberPosition();\r\n\r\n        // 监听开火事件\r\n        LayerEventPipe.addEventListener(ShotOutWeaponFireEvent.type, (e: CustomEvent) => {\r\n            if (this.ifRender) this.render();\r\n        });\r\n\r\n    }\r\n\r\n    initBuffers() {\r\n\r\n        this.positionFoat32Array = new Float32Array(new ArrayBuffer(4 * 3 * this.maximun));\r\n        this.directionFloat32Array = new Float32Array(new ArrayBuffer(4 * 3 * this.maximun));\r\n        this.generTimeFLoat32Array = new Float32Array(new ArrayBuffer(4 * this.maximun));\r\n        this.randFoat32Array = new Float32Array(new ArrayBuffer(4 * this.maximun));\r\n\r\n        for (let i = 0; i < this.maximun; i++) { // 默认初始化时所有弹点都不显示, 给他们赋予生成时间为-10s\r\n            array1Util[0] = -10;\r\n            this.generTimeFLoat32Array.set(array1Util, i);\r\n        }\r\n\r\n        // 生成 BufferAttribute\r\n\r\n        this.positionBufferAttribute = new BufferAttribute(this.positionFoat32Array, 3);\r\n        this.directionBufferAttribute = new BufferAttribute(this.directionFloat32Array, 3);\r\n        this.generTimeBufferAttribute = new BufferAttribute(this.generTimeFLoat32Array, 1);\r\n        this.randBufferAttribute = new BufferAttribute(this.randFoat32Array, 1);\r\n\r\n        // 指定 BufferAttribute\r\n\r\n        this.chamberSmokeGeometry.setAttribute('position', this.positionBufferAttribute);\r\n        this.chamberSmokeGeometry.setAttribute('direction', this.directionBufferAttribute);\r\n        this.chamberSmokeGeometry.setAttribute('generTime', this.generTimeBufferAttribute);\r\n        this.chamberSmokeGeometry.setAttribute('rand', this.randBufferAttribute);\r\n\r\n    }\r\n\r\n    /**\r\n   * 更新当前装备武器的弹舱位置: 只有定义了弹舱位置的武器才会渲染该层效果\r\n   */\r\n    listenChamberPosition() {\r\n        this.weaponComponentsPositionUtil = WeaponComponentsPositionUtil.getInstance();\r\n        GameLogicEventPipe.addEventListener(WeaponEquipEvent.type, (e: CustomEvent) => {\r\n            const _weaponInstance = WeaponEquipEvent.detail.weaponInstance;\r\n            if (_weaponInstance && _weaponInstance.chamberPosition) this.ifRender = true;\r\n            else this.ifRender = false;\r\n        });\r\n    }\r\n\r\n    render() {\r\n\r\n        // positions\r\n\r\n        this.positionFoat32Array.set(\r\n            this.weaponComponentsPositionUtil.calculateChamberPosition().toArray(array3Util, 0),\r\n            this.chamberSmokeIndex * 3\r\n        );\r\n        this.positionBufferAttribute.needsUpdate = true;\r\n\r\n        // directions\r\n\r\n        const rightDirection = this.weaponComponentsPositionUtil.rightDirection; // 烟雾大致向右运动\r\n        this.directionFloat32Array.set(\r\n            rightDirection.toArray(array3Util, 0),\r\n            this.chamberSmokeIndex * 3\r\n        );\r\n        this.directionBufferAttribute.needsUpdate = true;\r\n\r\n        // genderTimes\r\n\r\n        array1Util[0] = GameContext.GameLoop.Clock.getElapsedTime();\r\n        this.generTimeFLoat32Array.set(array1Util, this.chamberSmokeIndex * 1);\r\n        this.generTimeBufferAttribute.needsUpdate = true;\r\n\r\n        // rands\r\n\r\n        array1Util[0] = Math.random();\r\n        this.randFoat32Array.set(array1Util, this.chamberSmokeIndex * 1);\r\n        this.randBufferAttribute.needsUpdate = true;\r\n\r\n        if (this.chamberSmokeIndex + 1 >= this.maximun) this.chamberSmokeIndex = 0; // 如果index+1超过了设置最大显示弹点的上限,那么就从0开始重新循环\r\n        else this.chamberSmokeIndex += 1;\r\n\r\n    }\r\n\r\n    callEveryFrame(deltaTime?: number, elapsedTime?: number): void {\r\n\r\n        this.chamberSmokeSM.uniforms.uTime.value = elapsedTime;\r\n\r\n    }\r\n\r\n}","export default \"attribute float rand;\\r\\n\\r\\nuniform float uScale;\\r\\n\\r\\nvarying float vRand;\\r\\n\\r\\nvoid main(){\\r\\n    \\r\\n    vRand=rand;\\r\\n    \\r\\n    gl_PointSize=200.;// basic\\r\\n    gl_PointSize*=uScale;// 自定义大小\\r\\n    \\r\\n    gl_Position=projectionMatrix*viewMatrix*modelMatrix*vec4(position,1.);\\r\\n}\"","export default \"uniform sampler2D uOpenFireT;\\r\\nuniform float uTime;\\r\\nuniform float uFireTime;\\r\\nuniform float uFlashTime;// 出现闪光的持续时间\\r\\n\\r\\nvarying float vRand;\\r\\n\\r\\nfloat expImpulse(float x,float k)\\r\\n{\\r\\n    float h=k*x;\\r\\n    return h*exp(1.-h);\\r\\n}\\r\\n\\r\\nmat4 makeRotationZ(float theta)\\r\\n{\\r\\n    return mat4(\\r\\n        cos(theta),-sin(theta),0,0,\\r\\n        sin(theta),cos(theta),0,0,\\r\\n        0,0,1,0,\\r\\n        0,0,0,1\\r\\n    );\\r\\n}\\r\\n\\r\\nvoid main(){\\r\\n    \\r\\n    vec4 randRotate=makeRotationZ(vRand*3.14)*vec4(gl_PointCoord-vec2(.5),0.,1.);\\r\\n    vec4 colorFromT=texture2D(uOpenFireT,randRotate.xy+vec2(.5));\\r\\n    \\r\\n    float elapsedTime=uTime-uFireTime;\\r\\n    float flashMask=step(elapsedTime,uFlashTime);\\r\\n    \\r\\n    gl_FragColor=vec4(colorFromT.rgb,colorFromT.a*flashMask);\\r\\n    \\r\\n}\"","export default \"data:image/png;base64,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\"","import { AdditiveBlending, BufferAttribute, BufferGeometry, Camera, Points, Scene, ShaderMaterial, Texture, Vector3 } from 'three';\r\nimport muzzlesflashVert from '@assets/shaders/muzzle/flash.vert?raw'\r\nimport muzzlesflashFrag from '@assets/shaders/muzzle/flash.frag?raw'\r\n\r\nimport { GameContext } from '@src/core/GameContext'\r\n\r\nimport flashTexture from '@assets/textures/muzzle.flash.png';\r\nimport { CycleInterface } from '@src/core/inferface/CycleInterface';\r\nimport { LoopInterface } from '@src/core/inferface/LoopInterface';\r\nimport { GameLogicEventPipe, WeaponEquipEvent } from '@src/gameplay/pipes/GameLogicEventPipe';\r\nimport { LayerEventPipe, ShotOutWeaponFireEvent } from '../../gameplay/pipes/LayerEventPipe';\r\n\r\nconst image = new Image();\r\nconst texture = new Texture(image);\r\nimage.src = flashTexture;\r\nimage.onload = () => { texture.needsUpdate = true; }\r\n\r\nconst muzzlePositionUtil = new Vector3(); // 枪口位置\r\nconst array3Util: Array<number> = new Array<number>(3);\r\nconst array1Util: Array<number> = new Array<number>(1);\r\n\r\n/**\r\n * 枪口火光\r\n */\r\nexport class MuzzleFlashLayer implements CycleInterface, LoopInterface {\r\n\r\n    ifRender: boolean = false;\r\n\r\n    scene: Scene;\r\n    camera: Camera;\r\n\r\n    muzzleFlashSize: number = 1.5;\r\n    muzzleFlashTime: number = .01;\r\n\r\n    muzzleFlashGeometry: BufferGeometry = new BufferGeometry();\r\n    muzzleFlashSM: ShaderMaterial = new ShaderMaterial({\r\n        uniforms: {\r\n            uScale: { value: this.muzzleFlashSize },\r\n            uTime: { value: -1. },\r\n            uFireTime: { value: -1. },\r\n            uOpenFireT: { value: texture },\r\n            uFlashTime: { value: this.muzzleFlashTime },\r\n        },\r\n        vertexShader: muzzlesflashVert,\r\n        fragmentShader: muzzlesflashFrag,\r\n        blending: AdditiveBlending,\r\n    });\r\n\r\n    positionFoat32Array: Float32Array;\r\n    positionBufferAttribute: BufferAttribute;\r\n    randFloat32Array: Float32Array;\r\n    randBufferAttribute: BufferAttribute;\r\n\r\n    init(): void {\r\n\r\n        // 类指针\r\n        this.scene = GameContext.Scenes.Handmodel;\r\n        this.camera = GameContext.Cameras.PlayerCamera;\r\n\r\n        // 添加物体至场景\r\n        const muzzleFlash = new Points(this.muzzleFlashGeometry, this.muzzleFlashSM);\r\n        muzzleFlash.frustumCulled = false;\r\n        this.scene.add(muzzleFlash);\r\n\r\n        // 初始化buffers\r\n        this.initBuffers();\r\n\r\n        // 监听当前武器的枪口位置\r\n        GameLogicEventPipe.addEventListener(WeaponEquipEvent.type, (e: CustomEvent) => {\r\n            const _weaponInstance = WeaponEquipEvent.detail.weaponInstance;\r\n            if (WeaponEquipEvent.detail.weaponInstance && WeaponEquipEvent.detail.weaponInstance.muzzlePosition) {\r\n                muzzlePositionUtil.copy(_weaponInstance.muzzlePosition); // 判断是否有枪口位置, 有枪口位置就渲染火光\r\n                this.ifRender = true;\r\n            }\r\n            else this.ifRender = false;\r\n        })\r\n\r\n        // 监听渲染事件\r\n        LayerEventPipe.addEventListener(ShotOutWeaponFireEvent.type, (e: CustomEvent) => {\r\n            if (this.ifRender) this.render();\r\n        });\r\n    }\r\n\r\n    initBuffers(): void {\r\n\r\n        this.positionFoat32Array = new Float32Array(new ArrayBuffer(4 * 3));\r\n        this.randFloat32Array = new Float32Array(new ArrayBuffer(4 * 1));\r\n        this.positionBufferAttribute = new BufferAttribute(this.positionFoat32Array, 3);\r\n        this.randBufferAttribute = new BufferAttribute(this.randFloat32Array, 1);\r\n\r\n        // 创建几何\r\n\r\n        this.muzzleFlashGeometry.setAttribute('position', this.positionBufferAttribute);\r\n        this.muzzleFlashGeometry.setAttribute('rand', this.randBufferAttribute);\r\n    }\r\n    render() {\r\n        // 枪口位置\r\n        this.positionFoat32Array.set(muzzlePositionUtil.toArray(array3Util, 0), 0);\r\n        this.positionBufferAttribute.needsUpdate = true;\r\n\r\n        // 开火时间\r\n        this.muzzleFlashSM.uniforms.uFireTime.value = GameContext.GameLoop.Clock.getElapsedTime();\r\n\r\n        // 闪光随机种子\r\n        const rand = Math.random();\r\n        array1Util[0] = rand;\r\n        this.randFloat32Array.set(array1Util, 0);\r\n        this.randBufferAttribute.needsUpdate = true;\r\n    }\r\n\r\n    callEveryFrame(deltaTime?: number, elapsedTime?: number): void {\r\n        this.muzzleFlashSM.uniforms.uTime.value = elapsedTime; // 每帧向显卡传入当前渲染时间\r\n    }\r\n\r\n}","import { LevelMirage } from '../gameplay/levels/LevelMirage';\r\nimport { LocalPlayer } from '../gameplay/player/LocalPlayer';\r\nimport { DOMLayer } from '../viewlayers/DomLayer';\r\nimport { GLViewportLayer } from '../viewlayers/GLViewportLayer';\r\nimport { BulletHoleAshLayer } from '../viewlayers/scene/BulletHoleAshLayer';\r\nimport { BulletHoleFlashLayer } from '../viewlayers/scene/BulletHoleFlashLayer';\r\nimport { BulletHoleLayer } from '../viewlayers/scene/BulletHoleLayer';\r\nimport { SkyLayer } from '../viewlayers/SkyLayer';\r\nimport { CrosshairLayer } from '../viewlayers/ui/CrosshairLayer';\r\nimport { HandModelLayer } from '../viewlayers/ui/HandModelLayer';\r\nimport { ChamberBulletShell } from '../viewlayers/weapon/ChamberBulletShellLayer';\r\nimport { ChamberSmokeLayer } from '../viewlayers/weapon/ChamberSmokeLayer';\r\nimport { MuzzleFlashLayer } from '../viewlayers/weapon/MuzzleFlashLayer';\r\nimport { CycleInterface } from './inferface/CycleInterface';\r\nimport { LoopInterface } from './inferface/LoopInterface';\r\n\r\nconst GameObjects: Array<LoopInterface | CycleInterface> = [\r\n    new DOMLayer(), // DOM层\r\n    new SkyLayer(), // 天空盒\r\n    new HandModelLayer(), // 手模\r\n    new CrosshairLayer(), // 准星\r\n    new BulletHoleLayer(), // 弹孔\r\n    new BulletHoleFlashLayer(), // 单孔闪光\r\n    new BulletHoleAshLayer(), // 单孔尘\r\n    new ChamberBulletShell(), // 弹舱弹壳\r\n    new ChamberSmokeLayer(), // 弹舱烟雾\r\n    new MuzzleFlashLayer(), // 枪口闪光\r\n    new GLViewportLayer(), // WEBGL渲染层\r\n    new LevelMirage(),\r\n    LocalPlayer.getInstance(),\r\n];\r\n\r\n/** 游戏封装类型对象 */\r\nexport const GameObjectsMap = new Map<string, LoopInterface | CycleInterface>();\r\nGameObjects.forEach(item => { GameObjectsMap.set(item.constructor.name, item); })"],"names":["_v1","_v2","GameObjectMaterialEnum","WeaponClassificationEnum","startRecover","startRecoverLine","cameraRotationBasicTotal","recovercameraRotateTotalX","bPointRecoiledScreenCoord","InventorySlotEnum","Stats","image","texture","array3Util","array1Util","flashTexture","bulletHoleVertex","bulletHoleFrag","chamberPositionUtil","muzzlePositionUtil"],"mappings":"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,GACtB;AAEJ;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,UAAU,GAAG;AACnB;AACA,CAAC,QAAQ,EAAE;AACX;AACA,EAAE,UAAU,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE;AAC7B,EAAE,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,OAAO,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,GAAG,GAAG,EAAE,EAAE;AAC3D;AACA,EAAE;AACF;AACA,CAAC,YAAY,YAAY,CAAC;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,CAAC;AACJ;AACA,CAAC,cAAc,EAAE,CAAC;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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"}